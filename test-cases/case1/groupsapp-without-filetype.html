<!doctype html>
<html lang="he">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ניהול קבוצות פיזיותרפיה</title>
    <script type="module" crossorigin>(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const un=!1;var La=Array.isArray,ns=Array.prototype.indexOf,Ba=Array.from,pn=Object.defineProperty,Rr=Object.getOwnPropertyDescriptor,fn=Object.getOwnPropertyDescriptors,ss=Object.prototype,is=Array.prototype,Fa=Object.getPrototypeOf,Ua=Object.isExtensible;const Nr=()=>{};function os(e){return e()}function Na(e){for(var r=0;r<e.length;r++)e[r]()}function hn(){var e,r,a=new Promise((i,o)=>{e=i,r=o});return{promise:a,resolve:e,reject:r}}function ls(e,r){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const a=[];for(const i of e)if(a.push(i),a.length===r)break;return a}const me=2,Oa=4,oa=8,rr=16,ar=32,kr=64,la=128,pe=1024,Me=2048,qe=4096,Pe=8192,or=16384,Ya=32768,br=65536,qa=1<<17,ds=1<<18,Tr=1<<19,_n=1<<20,Be=256,aa=512,na=32768,Ea=1<<21,Ra=1<<22,xr=1<<23,lr=Symbol("$state"),Sr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function vs(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function cs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function us(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ps(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function fs(e){throw new Error("https://svelte.dev/e/effect_orphan")}function hs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function _s(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ms(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function xs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function gs(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const da=1,va=2,mn=4,bs=8,ys=16,ws=1,Is=2,_e=Symbol(),ks="http://www.w3.org/1999/xhtml";function $s(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Ms(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let As=!1;function xn(e){return e===this.v}function gn(e,r){return e!=e?r==r:e!==r||e!==null&&typeof e=="object"||typeof e=="function"}function bn(e){return!gn(e,this.v)}let Kr=!1,Ss=!1;function Ns(){Kr=!0}let oe=null;function Cr(e){oe=e}function xe(e,r=!1,a){oe={p:oe,i:!1,c:null,e:null,s:e,x:null,l:Kr&&!r?{s:null,u:null,$:[]}:null}}function ge(e){var r=oe,a=r.e;if(a!==null){r.e=null;for(var i of a)Tn(i)}return r.i=!0,oe=r.p,{}}function Qr(){return!Kr||oe!==null&&oe.l===null}let _r=[];function yn(){var e=_r;_r=[],Na(e)}function Lr(e){if(_r.length===0&&!Vr){var r=_r;queueMicrotask(()=>{r===_r&&yn()})}_r.push(e)}function Es(){for(;_r.length>0;)yn()}function wn(e){var r=Wt;if(r===null)return zt.f|=xr,e;if(r.f&Ya)Gr(e,r);else{if(!(r.f&la))throw e;r.b.error(e)}}function Gr(e,r){for(;r!==null;){if(r.f&la)try{r.b.error(e);return}catch(a){e=a}r=r.parent}throw e}const ea=new Set;let Zt=null,zr=null,Oe=null,Ve=[],ca=null,Pa=!1,Vr=!1;class He{committed=!1;current=new Map;previous=new Map;#t=new Set;#e=new Set;#r=0;#a=0;#l=null;#i=[];#o=[];skipped_effects=new Set;is_fork=!1;process(r){Ve=[],zr=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of r)this.#n(i,a);this.is_fork||this.#d(),this.#a>0||this.is_fork?(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects)):(zr=this,Zt=null,Ja(a.render_effects),Ja(a.effects),zr=null,this.#l?.resolve()),Oe=null}#n(r,a){r.f^=pe;for(var i=r.first;i!==null;){var o=i.f,s=(o&(ar|kr))!==0,d=s&&(o&pe)!==0,v=d||(o&Pe)!==0||this.skipped_effects.has(i);if(i.f&la&&i.b?.is_pending()&&(a={parent:a,effect:i,effects:[],render_effects:[],block_effects:[]}),!v&&i.fn!==null){s?i.f^=pe:o&Oa?a.effects.push(i):Fr(i)&&(i.f&rr&&a.block_effects.push(i),jr(i));var c=i.first;if(c!==null){i=c;continue}}var u=i.parent;for(i=i.next;i===null&&u!==null;)u===a.effect&&(this.#s(a.effects),this.#s(a.render_effects),this.#s(a.block_effects),a=a.parent),i=u.next,u=u.parent}}#s(r){for(const a of r)(a.f&Me?this.#i:this.#o).push(a),fe(a,pe)}capture(r,a){this.previous.has(r)||this.previous.set(r,a),this.current.set(r,r.v),Oe?.set(r,r.v)}activate(){Zt=this}deactivate(){Zt=null,Oe=null}flush(){if(this.activate(),Ve.length>0){if(In(),Zt!==null&&Zt!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const r of this.#e)r(this);this.#e.clear()}#d(){if(this.#a===0){for(const r of this.#t)r();this.#t.clear()}this.#r===0&&this.#v()}#v(){if(ea.size>1){this.previous.clear();var r=Oe,a=!0,i={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const o of ea){if(o===this){a=!1;continue}const s=[];for(const[v,c]of this.current){if(o.current.has(v))if(a&&c!==o.current.get(v))o.current.set(v,c);else continue;s.push(v)}if(s.length===0)continue;const d=[...o.current.keys()].filter(v=>!this.current.has(v));if(d.length>0){const v=new Set,c=new Map;for(const u of s)kn(u,d,v,c);if(Ve.length>0){Zt=o,o.apply();for(const u of Ve)o.#n(u,i);Ve=[],o.deactivate()}}}Zt=null,Oe=r}this.committed=!0,ea.delete(this)}increment(r){this.#r+=1,r&&(this.#a+=1)}decrement(r){this.#r-=1,r&&(this.#a-=1),this.revive()}revive(){for(const r of this.#i)fe(r,Me),yr(r);for(const r of this.#o)fe(r,qe),yr(r);this.#i=[],this.#o=[],this.flush()}oncommit(r){this.#t.add(r)}ondiscard(r){this.#e.add(r)}settled(){return(this.#l??=hn()).promise}static ensure(){if(Zt===null){const r=Zt=new He;ea.add(Zt),Vr||He.enqueue(()=>{Zt===r&&r.flush()})}return Zt}static enqueue(r){Lr(r)}apply(){}}function Ps(e){var r=Vr;Vr=!0;try{for(var a;;){if(Es(),Ve.length===0&&(Zt?.flush(),Ve.length===0))return ca=null,a;In()}}finally{Vr=r}}function In(){var e=Pr;Pa=!0;try{var r=0;for(Za(!0);Ve.length>0;){var a=He.ensure();if(r++>1e3){var i,o;Cs()}a.process(Ve),dr.clear()}}finally{Pa=!1,Za(e),ca=null}}function Cs(){try{hs()}catch(e){Gr(e,ca)}}let Ze=null;function Ja(e){var r=e.length;if(r!==0){for(var a=0;a<r;){var i=e[a++];if(!(i.f&(or|Pe))&&Fr(i)&&(Ze=new Set,jr(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null&&i.ac===null?On(i):i.fn=null),Ze?.size>0)){dr.clear();for(const o of Ze){if(o.f&(or|Pe))continue;const s=[o];let d=o.parent;for(;d!==null;)Ze.has(d)&&(Ze.delete(d),s.push(d)),d=d.parent;for(let v=s.length-1;v>=0;v--){const c=s[v];c.f&(or|Pe)||jr(c)}}Ze.clear()}}Ze=null}}function kn(e,r,a,i){if(!a.has(e)&&(a.add(e),e.reactions!==null))for(const o of e.reactions){const s=o.f;s&me?kn(o,r,a,i):s&(Ra|rr)&&!(s&Me)&&$n(o,r,i)&&(fe(o,Me),yr(o))}}function $n(e,r,a){const i=a.get(e);if(i!==void 0)return i;if(e.deps!==null)for(const o of e.deps){if(r.includes(o))return!0;if(o.f&me&&$n(o,r,a))return a.set(o,!0),!0}return a.set(e,!1),!1}function yr(e){for(var r=ca=e;r.parent!==null;){r=r.parent;var a=r.f;if(Pa&&r===Wt&&a&rr)return;if(a&(kr|ar)){if(!(a&pe))return;r.f^=pe}}Ve.push(r)}function Gs(e){let r=0,a=wr(0),i;return()=>{Js()&&(t(a),Zr(()=>(r===0&&(i=f(()=>e(()=>Hr(a)))),r+=1,()=>{Lr(()=>{r-=1,r===0&&(i?.(),i=void 0,Hr(a))})})))}}var Ds=br|Tr|la;function js(e,r,a){new Ts(e,r,a)}class Ts{parent;#t=!1;#e;#r=null;#a;#l;#i;#o=null;#n=null;#s=null;#d=null;#v=null;#p=0;#c=0;#f=!1;#u=null;#g=Gs(()=>(this.#u=wr(this.#p),()=>{this.#u=null}));constructor(r,a,i){this.#e=r,this.#a=a,this.#l=i,this.parent=Wt.b,this.#t=!!this.#a.pending,this.#i=ha(()=>{Wt.b=this;{var o=this.#m();try{this.#o=Fe(()=>i(o))}catch(s){this.error(s)}this.#c>0?this.#_():this.#t=!1}return()=>{this.#v?.remove()}},Ds)}#b(){try{this.#o=Fe(()=>this.#l(this.#e))}catch(r){this.error(r)}this.#t=!1}#y(){const r=this.#a.pending;r&&(this.#n=Fe(()=>r(this.#e)),He.enqueue(()=>{var a=this.#m();this.#o=this.#h(()=>(He.ensure(),Fe(()=>this.#l(a)))),this.#c>0?this.#_():(Er(this.#n,()=>{this.#n=null}),this.#t=!1)}))}#m(){var r=this.#e;return this.#t&&(this.#v=vr(),this.#e.before(this.#v),r=this.#v),r}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#a.pending}#h(r){var a=Wt,i=zt,o=oe;Ue(this.#i),$e(this.#i),Cr(this.#i.ctx);try{return r()}catch(s){return wn(s),null}finally{Ue(a),$e(i),Cr(o)}}#_(){const r=this.#a.pending;this.#o!==null&&(this.#d=document.createDocumentFragment(),this.#d.append(this.#v),zn(this.#o,this.#d)),this.#n===null&&(this.#n=Fe(()=>r(this.#e)))}#x(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#x(r);return}this.#c+=r,this.#c===0&&(this.#t=!1,this.#n&&Er(this.#n,()=>{this.#n=null}),this.#d&&(this.#e.before(this.#d),this.#d=null))}update_pending_count(r){this.#x(r),this.#p+=r,this.#u&&Ir(this.#u,this.#p)}get_effect_pending(){return this.#g(),t(this.#u)}error(r){var a=this.#a.onerror;let i=this.#a.failed;if(this.#f||!a&&!i)throw r;this.#o&&(we(this.#o),this.#o=null),this.#n&&(we(this.#n),this.#n=null),this.#s&&(we(this.#s),this.#s=null);var o=!1,s=!1;const d=()=>{if(o){Ms();return}o=!0,s&&gs(),He.ensure(),this.#p=0,this.#s!==null&&Er(this.#s,()=>{this.#s=null}),this.#t=this.has_pending_snippet(),this.#o=this.#h(()=>(this.#f=!1,Fe(()=>this.#l(this.#e)))),this.#c>0?this.#_():this.#t=!1};var v=zt;try{$e(null),s=!0,a?.(r,d),s=!1}catch(c){Gr(c,this.#i&&this.#i.parent)}finally{$e(v)}i&&Lr(()=>{this.#s=this.#h(()=>{He.ensure(),this.#f=!0;try{return Fe(()=>{i(this.#e,()=>r,()=>d)})}catch(c){return Gr(c,this.#i.parent),null}finally{this.#f=!1}})})}}function Ls(e,r,a,i){const o=Qr()?ua:ie;if(a.length===0&&e.length===0){i(r.map(o));return}var s=Zt,d=Wt,v=Bs();function c(){Promise.all(a.map(u=>Fs(u))).then(u=>{v();try{i([...r.map(o),...u])}catch(w){d.f&or||Gr(w,d)}s?.deactivate(),sa()}).catch(u=>{Gr(u,d)})}e.length>0?Promise.all(e).then(()=>{v();try{return c()}finally{s?.deactivate(),sa()}}):c()}function Bs(){var e=Wt,r=zt,a=oe,i=Zt;return function(s=!0){Ue(e),$e(r),Cr(a),s&&i?.activate()}}function sa(){Ue(null),$e(null),Cr(null)}function ua(e){var r=me|Me,a=zt!==null&&zt.f&me?zt:null;return Wt===null||a!==null&&a.f&Be?r|=Be:Wt.f|=Tr,{ctx:oe,deps:null,effects:null,equals:xn,f:r,fn:e,reactions:null,rv:0,v:_e,wv:0,parent:a??Wt,ac:null}}function Fs(e,r){let a=Wt;a===null&&cs();var i=a.b,o=void 0,s=wr(_e),d=!zt,v=new Map;return Xs(()=>{var c=hn();o=c.promise;try{Promise.resolve(e()).then(c.resolve,c.reject).then(()=>{u===Zt&&u.committed&&u.deactivate(),sa()})}catch(I){c.reject(I),sa()}var u=Zt;if(d){var w=!i.is_pending();i.update_pending_count(1),u.increment(w),v.get(u)?.reject(Sr),v.delete(u),v.set(u,c)}const h=(I,y=void 0)=>{if(u.activate(),y)y!==Sr&&(s.f|=xr,Ir(s,y));else{s.f&xr&&(s.f^=xr),Ir(s,I);for(const[m,g]of v){if(v.delete(m),m===u)break;g.reject(Sr)}}d&&(i.update_pending_count(-1),u.decrement(w))};c.promise.then(h,I=>h(null,I||"unknown"))}),fa(()=>{for(const c of v.values())c.reject(Sr)}),new Promise(c=>{function u(w){function h(){w===o?c(s):u(o)}w.then(h,h)}u(o)})}function Os(e){const r=ua(e);return Vn(r),r}function ie(e){const r=ua(e);return r.equals=bn,r}function Mn(e){var r=e.effects;if(r!==null){e.effects=null;for(var a=0;a<r.length;a+=1)we(r[a])}}function Ys(e){for(var r=e.parent;r!==null;){if(!(r.f&me))return r;r=r.parent}return null}function za(e){var r,a=Wt;Ue(Ys(e));try{e.f&=~na,Mn(e),r=qn(e)}finally{Ue(a)}return r}function An(e){var r=za(e);if(e.equals(r)||(e.v=r,e.wv=Wn()),!Br)if(Oe!==null)Oe.set(e,e.v);else{var a=(ir||e.f&Be)&&e.deps!==null?qe:pe;fe(e,a)}}let Ca=new Set;const dr=new Map;let Sn=!1;function wr(e,r){var a={f:0,v:e,reactions:null,equals:xn,rv:0,wv:0};return a}function sr(e,r){const a=wr(e);return Vn(a),a}function b(e,r=!1,a=!0){const i=wr(e);return r||(i.equals=bn),Kr&&a&&oe!==null&&oe.l!==null&&(oe.l.s??=[]).push(i),i}function Xe(e,r){return p(e,f(()=>t(e))),r}function p(e,r,a=!1){zt!==null&&(!Ye||zt.f&qa)&&Qr()&&zt.f&(me|rr|Ra|qa)&&!er?.includes(e)&&xs();let i=a?Or(r):r;return Ir(e,i)}function Ir(e,r){if(!e.equals(r)){var a=e.v;Br?dr.set(e,r):dr.set(e,a),e.v=r;var i=He.ensure();i.capture(e,a),e.f&me&&(e.f&Me&&za(e),fe(e,e.f&Be?qe:pe)),e.wv=Wn(),Nn(e,Me),Qr()&&Wt!==null&&Wt.f&pe&&!(Wt.f&(ar|kr))&&(je===null?ri([e]):je.push(e)),!i.is_fork&&Ca.size>0&&!Sn&&Rs()}return r}function Rs(){Sn=!1;const e=Array.from(Ca);for(const r of e)r.f&pe&&fe(r,qe),Fr(r)&&jr(r);Ca.clear()}function zs(e,r=1){var a=t(e),i=r===1?a++:a--;return p(e,a),i}function Hr(e){p(e,e.v+1)}function Nn(e,r){var a=e.reactions;if(a!==null)for(var i=Qr(),o=a.length,s=0;s<o;s++){var d=a[s],v=d.f;if(!(!i&&d===Wt)){var c=(v&Me)===0;c&&fe(d,r),v&me?v&na||(d.f|=na,Nn(d,qe)):c&&(v&rr&&Ze!==null&&Ze.add(d),yr(d))}}}function Or(e){if(typeof e!="object"||e===null||lr in e)return e;const r=Fa(e);if(r!==ss&&r!==is)return e;var a=new Map,i=La(e),o=sr(0),s=gr,d=v=>{if(gr===s)return v();var c=zt,u=gr;$e(null),en(s);var w=v();return $e(c),en(u),w};return i&&a.set("length",sr(e.length)),new Proxy(e,{defineProperty(v,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&_s();var w=a.get(c);return w===void 0?w=d(()=>{var h=sr(u.value);return a.set(c,h),h}):p(w,u.value,!0),!0},deleteProperty(v,c){var u=a.get(c);if(u===void 0){if(c in v){const w=d(()=>sr(_e));a.set(c,w),Hr(o)}}else p(u,_e),Hr(o);return!0},get(v,c,u){if(c===lr)return e;var w=a.get(c),h=c in v;if(w===void 0&&(!h||Rr(v,c)?.writable)&&(w=d(()=>{var y=Or(h?v[c]:_e),m=sr(y);return m}),a.set(c,w)),w!==void 0){var I=t(w);return I===_e?void 0:I}return Reflect.get(v,c,u)},getOwnPropertyDescriptor(v,c){var u=Reflect.getOwnPropertyDescriptor(v,c);if(u&&"value"in u){var w=a.get(c);w&&(u.value=t(w))}else if(u===void 0){var h=a.get(c),I=h?.v;if(h!==void 0&&I!==_e)return{enumerable:!0,configurable:!0,value:I,writable:!0}}return u},has(v,c){if(c===lr)return!0;var u=a.get(c),w=u!==void 0&&u.v!==_e||Reflect.has(v,c);if(u!==void 0||Wt!==null&&(!w||Rr(v,c)?.writable)){u===void 0&&(u=d(()=>{var I=w?Or(v[c]):_e,y=sr(I);return y}),a.set(c,u));var h=t(u);if(h===_e)return!1}return w},set(v,c,u,w){var h=a.get(c),I=c in v;if(i&&c==="length")for(var y=u;y<h.v;y+=1){var m=a.get(y+"");m!==void 0?p(m,_e):y in v&&(m=d(()=>sr(_e)),a.set(y+"",m))}if(h===void 0)(!I||Rr(v,c)?.writable)&&(h=d(()=>sr(void 0)),p(h,Or(u)),a.set(c,h));else{I=h.v!==_e;var g=d(()=>Or(u));p(h,g)}var A=Reflect.getOwnPropertyDescriptor(v,c);if(A?.set&&A.set.call(w,u),!I){if(i&&typeof c=="string"){var j=a.get("length"),R=Number(c);Number.isInteger(R)&&R>=j.v&&p(j,R+1)}Hr(o)}return!0},ownKeys(v){t(o);var c=Reflect.ownKeys(v).filter(h=>{var I=a.get(h);return I===void 0||I.v!==_e});for(var[u,w]of a)w.v!==_e&&!(u in v)&&c.push(u);return c},setPrototypeOf(){ms()}})}function Ka(e){try{if(e!==null&&typeof e=="object"&&lr in e)return e[lr]}catch{}return e}function Vs(e,r){return Object.is(Ka(e),Ka(r))}var Qa,En,Pn,Cn;function Hs(){if(Qa===void 0){Qa=window,En=/Firefox/.test(navigator.userAgent);var e=Element.prototype,r=Node.prototype,a=Text.prototype;Pn=Rr(r,"firstChild").get,Cn=Rr(r,"nextSibling").get,Ua(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ua(a)&&(a.__t=void 0)}}function vr(e=""){return document.createTextNode(e)}function Dr(e){return Pn.call(e)}function Xr(e){return Cn.call(e)}function n(e,r){return Dr(e)}function Xt(e,r=!1){{var a=Dr(e);return a instanceof Comment&&a.data===""?Xr(a):a}}function l(e,r=1,a=!1){let i=e;for(;r--;)i=Xr(i);return i}function Ws(e){e.textContent=""}function Gn(){return!1}let Xa=!1;function Us(){Xa||(Xa=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const r of e.target.elements)r.__on_r?.()})},{capture:!0}))}function pa(e){var r=zt,a=Wt;$e(null),Ue(null);try{return e()}finally{$e(r),Ue(a)}}function Dn(e,r,a,i=a){e.addEventListener(r,()=>pa(a));const o=e.__on_r;o?e.__on_r=()=>{o(),i(!0)}:e.__on_r=()=>i(!0),Us()}function jn(e){Wt===null&&zt===null&&fs(),zt!==null&&zt.f&Be&&Wt===null&&ps(),Br&&us()}function qs(e,r){var a=r.last;a===null?r.last=r.first=e:(a.next=e,e.prev=a,r.last=e)}function Je(e,r,a,i=!0){var o=Wt;o!==null&&o.f&Pe&&(e|=Pe);var s={ctx:oe,deps:null,nodes_start:null,nodes_end:null,f:e|Me,first:null,fn:r,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(a)try{jr(s),s.f|=Ya}catch(c){throw we(s),c}else r!==null&&yr(s);if(i){var d=s;if(a&&d.deps===null&&d.teardown===null&&d.nodes_start===null&&d.first===d.last&&!(d.f&Tr)&&(d=d.first,e&rr&&e&br&&d!==null&&(d.f|=br)),d!==null&&(d.parent=o,o!==null&&qs(d,o),zt!==null&&zt.f&me&&!(e&kr))){var v=zt;(v.effects??=[]).push(d)}}return s}function Js(){return zt!==null&&!Ye}function fa(e){const r=Je(oa,null,!1);return fe(r,pe),r.teardown=e,r}function Ga(e){jn();var r=Wt.f,a=!zt&&(r&ar)!==0&&(r&Ya)===0;if(a){var i=oe;(i.e??=[]).push(e)}else return Tn(e)}function Tn(e){return Je(Oa|_n,e,!1)}function Ks(e){return jn(),Je(oa|_n,e,!0)}function Qs(e){He.ensure();const r=Je(kr|Tr,e,!0);return(a={})=>new Promise(i=>{a.outro?Er(r,()=>{we(r),i(void 0)}):(we(r),i(void 0))})}function Ln(e){return Je(Oa,e,!1)}function Z(e,r){var a=oe,i={effect:null,ran:!1,deps:e};a.l.$.push(i),i.effect=Zr(()=>{e(),!i.ran&&(i.ran=!0,f(r))})}function Ce(){var e=oe;Zr(()=>{for(var r of e.l.$){r.deps();var a=r.effect;a.f&pe&&fe(a,qe),Fr(a)&&jr(a),r.ran=!1}})}function Xs(e){return Je(Ra|Tr,e,!0)}function Zr(e,r=0){return Je(oa|r,e,!0)}function L(e,r=[],a=[],i=[]){Ls(i,r,a,o=>{Je(oa,()=>e(...o.map(t)),!0)})}function ha(e,r=0){var a=Je(rr|r,e,!0);return a}function Fe(e,r=!0){return Je(ar|Tr,e,!0,r)}function Bn(e){var r=e.teardown;if(r!==null){const a=Br,i=zt;tn(!0),$e(null);try{r.call(null)}finally{tn(a),$e(i)}}}function Fn(e,r=!1){var a=e.first;for(e.first=e.last=null;a!==null;){const o=a.ac;o!==null&&pa(()=>{o.abort(Sr)});var i=a.next;a.f&kr?a.parent=null:we(a,r),a=i}}function Zs(e){for(var r=e.first;r!==null;){var a=r.next;r.f&ar||we(r),r=a}}function we(e,r=!0){var a=!1;(r||e.f&ds)&&e.nodes_start!==null&&e.nodes_end!==null&&(ti(e.nodes_start,e.nodes_end),a=!0),Fn(e,r&&!a),ia(e,0),fe(e,or);var i=e.transitions;if(i!==null)for(const s of i)s.stop();Bn(e);var o=e.parent;o!==null&&o.first!==null&&On(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function ti(e,r){for(;e!==null;){var a=e===r?null:Xr(e);e.remove(),e=a}}function On(e){var r=e.parent,a=e.prev,i=e.next;a!==null&&(a.next=i),i!==null&&(i.prev=a),r!==null&&(r.first===e&&(r.first=i),r.last===e&&(r.last=a))}function Er(e,r,a=!0){var i=[];Va(e,i,!0),Yn(i,()=>{a&&we(e),r&&r()})}function Yn(e,r){var a=e.length;if(a>0){var i=()=>--a||r();for(var o of e)o.out(i)}else r()}function Va(e,r,a){if(!(e.f&Pe)){if(e.f^=Pe,e.transitions!==null)for(const d of e.transitions)(d.is_global||a)&&r.push(d);for(var i=e.first;i!==null;){var o=i.next,s=(i.f&br)!==0||(i.f&ar)!==0&&(e.f&rr)!==0;Va(i,r,s?a:!1),i=o}}}function Ha(e){Rn(e,!0)}function Rn(e,r){if(e.f&Pe){e.f^=Pe,e.f&pe||(fe(e,Me),yr(e));for(var a=e.first;a!==null;){var i=a.next,o=(a.f&br)!==0||(a.f&ar)!==0;Rn(a,o?r:!1),a=i}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||r)&&s.in()}}function zn(e,r){for(var a=e.nodes_start,i=e.nodes_end;a!==null;){var o=a===i?null:Xr(a);r.append(a),a=o}}let Ar=null;function ei(e){var r=Ar;try{if(Ar=new Set,f(e),r!==null)for(var a of Ar)r.add(a);return Ar}finally{Ar=r}}function Te(e){for(var r of ei(e))Ir(r,r.v)}let Pr=!1;function Za(e){Pr=e}let Br=!1;function tn(e){Br=e}let zt=null,Ye=!1;function $e(e){zt=e}let Wt=null;function Ue(e){Wt=e}let er=null;function Vn(e){zt!==null&&(er===null?er=[e]:er.push(e))}let be=null,Ee=0,je=null;function ri(e){je=e}let Hn=1,Ur=0,gr=Ur;function en(e){gr=e}let ir=!1;function Wn(){return++Hn}function Fr(e){var r=e.f;if(r&Me)return!0;if(r&qe){var a=e.deps,i=(r&Be)!==0;if(r&me&&(e.f&=~na),a!==null){var o,s,d=(r&aa)!==0,v=i&&Wt!==null&&!ir,c=a.length;if((d||v)&&(Wt===null||!(Wt.f&or))){var u=e,w=u.parent;for(o=0;o<c;o++)s=a[o],(d||!s?.reactions?.includes(u))&&(s.reactions??=[]).push(u);d&&(u.f^=aa),v&&w!==null&&!(w.f&Be)&&(u.f^=Be)}for(o=0;o<c;o++)if(s=a[o],Fr(s)&&An(s),s.wv>e.wv)return!0}(!i||Wt!==null&&!ir)&&fe(e,pe)}return!1}function Un(e,r,a=!0){var i=e.reactions;if(i!==null&&!er?.includes(e))for(var o=0;o<i.length;o++){var s=i[o];s.f&me?Un(s,r,!1):r===s&&(a?fe(s,Me):s.f&pe&&fe(s,qe),yr(s))}}function qn(e){var r=be,a=Ee,i=je,o=zt,s=ir,d=er,v=oe,c=Ye,u=gr,w=e.f;be=null,Ee=0,je=null,ir=(w&Be)!==0&&(Ye||!Pr||zt===null),zt=w&(ar|kr)?null:e,er=null,Cr(e.ctx),Ye=!1,gr=++Ur,e.ac!==null&&(pa(()=>{e.ac.abort(Sr)}),e.ac=null);try{e.f|=Ea;var h=e.fn,I=h(),y=e.deps;if(be!==null){var m;if(ia(e,Ee),y!==null&&Ee>0)for(y.length=Ee+be.length,m=0;m<be.length;m++)y[Ee+m]=be[m];else e.deps=y=be;if(!ir||w&me&&e.reactions!==null)for(m=Ee;m<y.length;m++)(y[m].reactions??=[]).push(e)}else y!==null&&Ee<y.length&&(ia(e,Ee),y.length=Ee);if(Qr()&&je!==null&&!Ye&&y!==null&&!(e.f&(me|qe|Me)))for(m=0;m<je.length;m++)Un(je[m],e);return o!==null&&o!==e&&(Ur++,je!==null&&(i===null?i=je:i.push(...je))),e.f&xr&&(e.f^=xr),I}catch(g){return wn(g)}finally{e.f^=Ea,be=r,Ee=a,je=i,zt=o,ir=s,er=d,Cr(v),Ye=c,gr=u}}function ai(e,r){let a=r.reactions;if(a!==null){var i=ns.call(a,e);if(i!==-1){var o=a.length-1;o===0?a=r.reactions=null:(a[i]=a[o],a.pop())}}a===null&&r.f&me&&(be===null||!be.includes(r))&&(fe(r,qe),r.f&(Be|aa)||(r.f^=aa),Mn(r),ia(r,0))}function ia(e,r){var a=e.deps;if(a!==null)for(var i=r;i<a.length;i++)ai(e,a[i])}function jr(e){var r=e.f;if(!(r&or)){fe(e,pe);var a=Wt,i=Pr;Wt=e,Pr=!0;try{r&rr?Zs(e):Fn(e),Bn(e);var o=qn(e);e.teardown=typeof o=="function"?o:null,e.wv=Hn;var s;un&&Ss&&e.f&Me&&e.deps}finally{Pr=i,Wt=a}}}async function ni(){await Promise.resolve(),Ps()}function t(e){var r=e.f,a=(r&me)!==0;if(Ar?.add(e),zt!==null&&!Ye){var i=Wt!==null&&(Wt.f&or)!==0;if(!i&&!er?.includes(e)){var o=zt.deps;if(zt.f&Ea)e.rv<Ur&&(e.rv=Ur,be===null&&o!==null&&o[Ee]===e?Ee++:be===null?be=[e]:(!ir||!be.includes(e))&&be.push(e));else{(zt.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[zt]:s.includes(zt)||s.push(zt)}}}else if(a&&e.deps===null&&e.effects===null){var d=e,v=d.parent;v!==null&&!(v.f&Be)&&(d.f^=Be)}if(Br){if(dr.has(e))return dr.get(e);if(a){d=e;var c=d.v;return(!(d.f&pe)&&d.reactions!==null||Jn(d))&&(c=za(d)),dr.set(d,c),c}}else if(a){if(d=e,Oe?.has(d))return Oe.get(d);Fr(d)&&An(d)}if(Oe?.has(e))return Oe.get(e);if(e.f&xr)throw e.v;return e.v}function Jn(e){if(e.v===_e)return!0;if(e.deps===null)return!1;for(const r of e.deps)if(dr.has(r)||r.f&me&&Jn(r))return!0;return!1}function f(e){var r=Ye;try{return Ye=!0,e()}finally{Ye=r}}const si=-7169;function fe(e,r){e.f=e.f&si|r}function Ht(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(lr in e)Da(e);else if(!Array.isArray(e))for(let r in e){const a=e[r];typeof a=="object"&&a&&lr in a&&Da(a)}}}function Da(e,r=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!r.has(e)){r.add(e),e instanceof Date&&e.getTime();for(let i in e)try{Da(e[i],r)}catch{}const a=Fa(e);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const i=fn(a);for(let o in i){const s=i[o].get;if(s)try{s.call(e)}catch{}}}}}const ii=["touchstart","touchmove"];function oi(e){return ii.includes(e)}const li=new Set,rn=new Set;function di(e,r,a,i={}){function o(s){if(i.capture||Yr.call(r,s),!s.cancelBubble)return pa(()=>a?.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Lr(()=>{r.addEventListener(e,o,i)}):r.addEventListener(e,o,i),o}function N(e,r,a,i,o){var s={capture:i,passive:o},d=di(e,r,a,s);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&fa(()=>{r.removeEventListener(e,d,s)})}let an=null;function Yr(e){var r=this,a=r.ownerDocument,i=e.type,o=e.composedPath?.()||[],s=o[0]||e.target;an=e;var d=0,v=an===e&&e.__root;if(v){var c=o.indexOf(v);if(c!==-1&&(r===document||r===window)){e.__root=r;return}var u=o.indexOf(r);if(u===-1)return;c<=u&&(d=c)}if(s=o[d]||e.target,s!==r){pn(e,"currentTarget",{configurable:!0,get(){return s||a}});var w=zt,h=Wt;$e(null),Ue(null);try{for(var I,y=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var g=s["__"+i];g!=null&&(!s.disabled||e.target===s)&&g.call(s,e)}catch(A){I?y.push(A):I=A}if(e.cancelBubble||m===r||m===null)break;s=m}if(I){for(let A of y)queueMicrotask(()=>{throw A});throw I}}finally{e.__root=r,delete e.currentTarget,$e(w),Ue(h)}}}function Kn(e){var r=document.createElement("template");return r.innerHTML=e.replaceAll("<!>","\x3C!---->"),r.content}function qr(e,r){var a=Wt;a.nodes_start===null&&(a.nodes_start=e,a.nodes_end=r)}function k(e,r){var a=(r&ws)!==0,i=(r&Is)!==0,o,s=!e.startsWith("<!>");return()=>{o===void 0&&(o=Kn(s?e:"<!>"+e),a||(o=Dr(o)));var d=i||En?document.importNode(o,!0):o.cloneNode(!0);if(a){var v=Dr(d),c=d.lastChild;qr(v,c)}else qr(d,d);return d}}function vi(e,r,a="svg"){var i=!e.startsWith("<!>"),o=`<${a}>${i?e:"<!>"+e}</${a}>`,s;return()=>{if(!s){var d=Kn(o),v=Dr(d);s=Dr(v)}var c=s.cloneNode(!0);return qr(c,c),c}}function ta(e,r){return vi(e,r,"svg")}function Jr(e=""){{var r=vr(e+"");return qr(r,r),r}}function We(){var e=document.createDocumentFragment(),r=document.createComment(""),a=vr();return e.append(r,a),qr(r,a),e}function x(e,r){e!==null&&e.before(r)}function _(e,r){var a=r==null?"":typeof r=="object"?r+"":r;a!==(e.__t??=e.nodeValue)&&(e.__t=a,e.nodeValue=a+"")}function ci(e,r){return ui(e,r)}const $r=new Map;function ui(e,{target:r,anchor:a,props:i={},events:o,context:s,intro:d=!0}){Hs();var v=new Set,c=h=>{for(var I=0;I<h.length;I++){var y=h[I];if(!v.has(y)){v.add(y);var m=oi(y);r.addEventListener(y,Yr,{passive:m});var g=$r.get(y);g===void 0?(document.addEventListener(y,Yr,{passive:m}),$r.set(y,1)):$r.set(y,g+1)}}};c(Ba(li)),rn.add(c);var u=void 0,w=Qs(()=>{var h=a??r.appendChild(vr());return js(h,{pending:()=>{}},I=>{if(s){xe({});var y=oe;y.c=s}o&&(i.$$events=o),u=e(I,i)||{},s&&ge()}),()=>{for(var I of v){r.removeEventListener(I,Yr);var y=$r.get(I);--y===0?(document.removeEventListener(I,Yr),$r.delete(I)):$r.set(I,y)}rn.delete(c),h!==a&&h.parentNode?.removeChild(h)}});return pi.set(u,w),u}let pi=new WeakMap;class Qn{anchor;#t=new Map;#e=new Map;#r=new Map;#a=!0;constructor(r,a=!0){this.anchor=r,this.#a=a}#l=()=>{var r=Zt;if(this.#t.has(r)){var a=this.#t.get(r),i=this.#e.get(a);if(i)Ha(i);else{var o=this.#r.get(a);o&&(this.#e.set(a,o.effect),this.#r.delete(a),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),i=o.effect)}for(const[s,d]of this.#t){if(this.#t.delete(s),s===r)break;const v=this.#r.get(d);v&&(we(v.effect),this.#r.delete(d))}for(const[s,d]of this.#e){if(s===a)continue;const v=()=>{if(Array.from(this.#t.values()).includes(s)){var u=document.createDocumentFragment();zn(d,u),u.append(vr()),this.#r.set(s,{effect:d,fragment:u})}else we(d);this.#e.delete(s)};this.#a||!i?Er(d,v,!1):v()}}};#i=r=>{this.#t.delete(r);const a=Array.from(this.#t.values());for(const[i,o]of this.#r)a.includes(i)||(we(o.effect),this.#r.delete(i))};ensure(r,a){var i=Zt,o=Gn();if(a&&!this.#e.has(r)&&!this.#r.has(r))if(o){var s=document.createDocumentFragment(),d=vr();s.append(d),this.#r.set(r,{effect:Fe(()=>a(d)),fragment:s})}else this.#e.set(r,Fe(()=>a(this.anchor)));if(this.#t.set(i,r),o){for(const[v,c]of this.#e)v===r?i.skipped_effects.delete(c):i.skipped_effects.add(c);for(const[v,c]of this.#r)v===r?i.skipped_effects.delete(c.effect):i.skipped_effects.add(c.effect);i.oncommit(this.#l),i.ondiscard(this.#i)}else this.#l()}}function at(e,r,a=!1){var i=new Qn(e),o=a?br:0;function s(d,v){i.ensure(d,v)}ha(()=>{var d=!1;r((v,c=!0)=>{d=!0,s(c,v)}),d||s(!1,null)},o)}function de(e,r){return r}function fi(e,r,a){for(var i=e.items,o=[],s=r.length,d=0;d<s;d++)Va(r[d].e,o,!0);var v=s>0&&o.length===0&&a!==null;if(v){var c=a.parentNode;Ws(c),c.append(a),i.clear(),ze(e,r[0].prev,r[s-1].next)}Yn(o,()=>{for(var u=0;u<s;u++){var w=r[u];v||(i.delete(w.k),ze(e,w.prev,w.next)),we(w.e,!v)}})}function ne(e,r,a,i,o,s=null){var d=e,v={flags:r,items:new Map,first:null},c=(r&mn)!==0;if(c){var u=e;d=u.appendChild(vr())}var w=null,h=!1,I=new Map,y=ie(()=>{var j=a();return La(j)?j:j==null?[]:Ba(j)}),m,g;function A(){hi(g,m,v,I,d,o,r,i,a),s!==null&&(m.length===0?w?Ha(w):w=Fe(()=>s(d)):w!==null&&Er(w,()=>{w=null}))}ha(()=>{g??=Wt,m=t(y);var j=m.length;if(!(h&&j===0)){h=j===0;var R,B,et,U;if(Gn()){var C=new Set,Y=Zt;for(B=0;B<j;B+=1){et=m[B],U=i(et,B);var ot=v.items.get(U)??I.get(U);ot?r&(da|va)&&Xn(ot,et,B,r):(R=Zn(null,v,null,null,et,U,B,o,r,a,!0),I.set(U,R)),C.add(U)}for(const[It,H]of v.items)C.has(It)||Y.skipped_effects.add(H.e);Y.oncommit(A)}else A();t(y)}})}function hi(e,r,a,i,o,s,d,v,c){var u=(d&bs)!==0,w=(d&(da|va))!==0,h=r.length,I=a.items,y=a.first,m=y,g,A=null,j,R=[],B=[],et,U,C,Y;if(u)for(Y=0;Y<h;Y+=1)et=r[Y],U=v(et,Y),C=I.get(U),C!==void 0&&(C.a?.measure(),(j??=new Set).add(C));for(Y=0;Y<h;Y+=1){if(et=r[Y],U=v(et,Y),C=I.get(U),C===void 0){var ot=i.get(U);if(ot!==void 0){i.delete(U),I.set(U,ot);var It=A?A.next:m;ze(a,A,ot),ze(a,ot,It),$a(ot,It,o),A=ot}else{var H=m?m.e.nodes_start:o;A=Zn(H,a,A,A===null?a.first:A.next,et,U,Y,s,d,c)}I.set(U,A),R=[],B=[],m=A.next;continue}if(w&&Xn(C,et,Y,d),C.e.f&Pe&&(Ha(C.e),u&&(C.a?.unfix(),(j??=new Set).delete(C))),C!==m){if(g!==void 0&&g.has(C)){if(R.length<B.length){var rt=B[0],T;A=rt.prev;var S=R[0],F=R[R.length-1];for(T=0;T<R.length;T+=1)$a(R[T],rt,o);for(T=0;T<B.length;T+=1)g.delete(B[T]);ze(a,S.prev,F.next),ze(a,A,S),ze(a,F,rt),m=rt,A=F,Y-=1,R=[],B=[]}else g.delete(C),$a(C,m,o),ze(a,C.prev,C.next),ze(a,C,A===null?a.first:A.next),ze(a,A,C),A=C;continue}for(R=[],B=[];m!==null&&m.k!==U;)m.e.f&Pe||(g??=new Set).add(m),B.push(m),m=m.next;if(m===null)continue;C=m}R.push(C),A=C,m=C.next}if(m!==null||g!==void 0){for(var Q=g===void 0?[]:Ba(g);m!==null;)m.e.f&Pe||Q.push(m),m=m.next;var $=Q.length;if($>0){var q=d&mn&&h===0?o:null;if(u){for(Y=0;Y<$;Y+=1)Q[Y].a?.measure();for(Y=0;Y<$;Y+=1)Q[Y].a?.fix()}fi(a,Q,q)}}u&&Lr(()=>{if(j!==void 0)for(C of j)C.a?.apply()}),e.first=a.first&&a.first.e,e.last=A&&A.e;for(var G of i.values())we(G.e);i.clear()}function Xn(e,r,a,i){i&da&&Ir(e.v,r),i&va?Ir(e.i,a):e.i=a}function Zn(e,r,a,i,o,s,d,v,c,u,w){var h=(c&da)!==0,I=(c&ys)===0,y=h?I?b(o,!1,!1):wr(o):o,m=c&va?wr(d):d,g={i:m,v:y,k:s,a:null,e:null,prev:a,next:i};try{if(e===null){var A=document.createDocumentFragment();A.append(e=vr())}return g.e=Fe(()=>v(e,y,m,u),As),g.e.prev=a&&a.e,g.e.next=i&&i.e,a===null?w||(r.first=g):(a.next=g,a.e.next=g.e),i!==null&&(i.prev=g,i.e.prev=g.e),g}finally{}}function $a(e,r,a){for(var i=e.next?e.next.e.nodes_start:a,o=r?r.e.nodes_start:a,s=e.e.nodes_start;s!==null&&s!==i;){var d=Xr(s);o.before(s),s=d}}function ze(e,r,a){r===null?e.first=a:(r.next=a,r.e.next=a&&a.e),a!==null&&(a.prev=r,a.e.prev=r&&r.e)}function _i(e,r,a){var i=new Qn(e);ha(()=>{var o=r()??null;i.ensure(o,o&&(s=>a(s,o)))},br)}const nn=[...` 	
\r\f \v\uFEFF`];function mi(e,r,a){var i=e==null?"":""+e;if(r&&(i=i?i+" "+r:r),a){for(var o in a)if(a[o])i=i?i+" "+o:o;else if(i.length)for(var s=o.length,d=0;(d=i.indexOf(o,d))>=0;){var v=d+s;(d===0||nn.includes(i[d-1]))&&(v===i.length||nn.includes(i[v]))?i=(d===0?"":i.substring(0,d))+i.substring(v+1):d=v}}return i===""?null:i}function ye(e,r,a,i,o,s){var d=e.__className;if(d!==a||d===void 0){var v=mi(a,i,s);v==null?e.removeAttribute("class"):e.className=v,e.__className=a}else if(s&&o!==s)for(var c in s){var u=!!s[c];(o==null||u!==!!o[c])&&e.classList.toggle(c,u)}return s}function ts(e,r,a=!1){if(e.multiple){if(r==null)return;if(!La(r))return $s();for(var i of e.options)i.selected=r.includes(Wr(i));return}for(i of e.options){var o=Wr(i);if(Vs(o,r)){i.selected=!0;return}}(!a||r!==void 0)&&(e.selectedIndex=-1)}function xi(e){var r=new MutationObserver(()=>{ts(e,e.__value)});r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),fa(()=>{r.disconnect()})}function Le(e,r,a=r){var i=new WeakSet,o=!0;Dn(e,"change",s=>{var d=s?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(d),Wr);else{var c=e.querySelector(d)??e.querySelector("option:not([disabled])");v=c&&Wr(c)}a(v),Zt!==null&&i.add(Zt)}),Ln(()=>{var s=r();if(e===document.activeElement){var d=zr??Zt;if(i.has(d))return}if(ts(e,s,o),o&&s===void 0){var v=e.querySelector(":checked");v!==null&&(s=Wr(v),a(s))}e.__value=s,o=!1}),xi(e)}function Wr(e){return"__value"in e?e.__value:e.value}const gi=Symbol("is custom element"),bi=Symbol("is html");function sn(e,r){var a=es(e);a.checked!==(a.checked=r??void 0)&&(e.checked=r)}function mr(e,r,a,i){var o=es(e);o[r]!==(o[r]=a)&&(a==null?e.removeAttribute(r):typeof a!="string"&&yi(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function es(e){return e.__attributes??={[gi]:e.nodeName.includes("-"),[bi]:e.namespaceURI===ks}}var on=new Map;function yi(e){var r=e.getAttribute("is")||e.nodeName,a=on.get(r);if(a)return a;on.set(r,a=[]);for(var i,o=e,s=Element.prototype;s!==o;){i=fn(o);for(var d in i)i[d].set&&a.push(d);o=Fa(o)}return a}function Jt(e,r,a=r){var i=new WeakSet;Dn(e,"input",async o=>{var s=o?e.defaultValue:e.value;if(s=Ma(e)?Aa(s):s,a(s),Zt!==null&&i.add(Zt),await ni(),s!==(s=r())){var d=e.selectionStart,v=e.selectionEnd,c=e.value.length;if(e.value=s??"",v!==null){var u=e.value.length;d===v&&v===c&&u>c?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=d,e.selectionEnd=Math.min(v,u))}}}),f(r)==null&&e.value&&(a(Ma(e)?Aa(e.value):e.value),Zt!==null&&i.add(Zt)),Zr(()=>{var o=r();if(e===document.activeElement){var s=zr??Zt;if(i.has(s))return}Ma(e)&&o===Aa(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function Ma(e){var r=e.type;return r==="number"||r==="range"}function Aa(e){return e===""?null:+e}function ln(e,r){return e===r||e?.[lr]===r}function wi(e={},r,a,i){return Ln(()=>{var o,s;return Zr(()=>{o=s,s=[],f(()=>{e!==a(...s)&&(r(e,...s),o&&ln(a(...o),e)&&r(null,...o))})}),()=>{Lr(()=>{s&&ln(a(...s),e)&&r(null,...s)})}}),e}function dn(e){return function(...r){var a=r[0];return a.stopPropagation(),e?.apply(this,r)}}function Wa(e){return function(...r){var a=r[0];return a.preventDefault(),e?.apply(this,r)}}function Ae(e=!1){const r=oe,a=r.l.u;if(!a)return;let i=()=>Ht(r.s);if(e){let o=0,s={};const d=ua(()=>{let v=!1;const c=r.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],v=!0);return v&&o++,o});i=()=>t(d)}a.b.length&&Ks(()=>{vn(r,i),Na(a.b)}),Ga(()=>{const o=f(()=>a.m.map(os));return()=>{for(const s of o)typeof s=="function"&&s()}}),a.a.length&&Ga(()=>{vn(r,i),Na(a.a)})}function vn(e,r){if(e.l.s)for(const a of e.l.s)t(a);r()}function rs(e,r,a){if(e==null)return r(void 0),Nr;const i=f(()=>e.subscribe(r,a));return i.unsubscribe?()=>i.unsubscribe():i}const Mr=[];function Ii(e,r){return{subscribe:ki(e,r).subscribe}}function ki(e,r=Nr){let a=null;const i=new Set;function o(v){if(gn(e,v)&&(e=v,a)){const c=!Mr.length;for(const u of i)u[1](),Mr.push(u,e);if(c){for(let u=0;u<Mr.length;u+=2)Mr[u][0](Mr[u+1]);Mr.length=0}}}function s(v){o(v(e))}function d(v,c=Nr){const u=[v,c];return i.add(u),i.size===1&&(a=r(o,s)||Nr),v(e),()=>{i.delete(u),i.size===0&&a&&(a(),a=null)}}return{set:o,update:s,subscribe:d}}function $i(e){let r;return rs(e,a=>r=a)(),r}let ja=Symbol();function cr(e,r,a){const i=a[r]??={store:null,source:b(void 0),unsubscribe:Nr};if(i.store!==e&&!(ja in a))if(i.unsubscribe(),i.store=e??null,e==null)i.source.v=void 0,i.unsubscribe=Nr;else{var o=!0;i.unsubscribe=rs(e,s=>{o?i.source.v=s:p(i.source,s)}),o=!1}return e&&ja in a?$i(e):t(i.source)}function ur(){const e={};function r(){fa(()=>{for(var a in e)e[a].unsubscribe();pn(e,ja,{enumerable:!1,value:!0})})}return[e,r]}function Mi(e){oe===null&&vs(),Kr&&oe.l!==null?Ai(oe).m.push(e):Ga(()=>{const r=f(e);if(typeof r=="function")return r})}function Ai(e){var r=e.l;return r.u??={a:[],b:[],m:[]}}const Si="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Si);Ns();function cn(){let e=location.hash||"#/groupsList";e.startsWith("#/")?e=e.slice(2):e.startsWith("#")&&(e=e.slice(1));const[r,...a]=e.split("/").filter(Boolean);return{name:r||"groupsList",segments:a}}const pr=Ii(cn(),e=>{const r=()=>e(cn());return addEventListener("hashchange",r),()=>removeEventListener("hashchange",r)});function ae(e){location.hash=e.startsWith("/")?`#${e}`:`#/${e}`}function Ni(){const e=localStorage.getItem("phizio-db-v1");if(!e){alert("אין נתונים לגיבוי");return}let r;try{r=JSON.parse(e)}catch{alert("שגיאה בקריאת הנתונים מהדפדפן");return}const a="groupsdata.json",o="\uFEFF"+JSON.stringify(r,null,2),s=new Blob([o],{type:"application/json;charset=utf-8;"});if(typeof window.showSaveFilePicker=="function"&&!window.location.href.startsWith("file:"))window.showSaveFilePicker({suggestedName:a}).then(v=>v.createWritable()).then(v=>(v.write(o),v)).then(v=>v.close()).then(()=>alert("שמור")).catch(v=>{v.name!=="AbortError"&&console.error("File picker failed:",v)});else{const v=URL.createObjectURL(s),c=document.createElement("a");c.href=v,c.download=a,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(v),alert("שמור")}}function Ei(e){try{const r=JSON.parse(e);return Pi(r)?(localStorage.setItem("phizio-db-v1",e),alert("הנתונים שוחזרו בהצלחה"),!0):(alert("קובץ גיבוי לא תקין"),!1)}catch(r){return console.error("Import backup error:",r),alert("שגיאה בקריאת קובץ הגיבוי"),!1}}function Pi(e){if(!e)return!1;const r=["statuses","therapists","patients","groups","patientsInGroups","therapistsInGroups","attendance","patientPayments"];for(const a of r)if(!Array.isArray(e[a]))return console.error(`Missing or invalid field: ${a}`),!1;if(e.statuses.length<2)return console.error("Database must have at least 2 statuses (active/inactive)"),!1;for(const a of e.patients)if(!a.id||!a.firstName||!a.lastName)return console.error("Invalid patient structure:",a),!1;return!0}var Ci=k(`<nav class="bg-white shadow-md"><div class="border-b border-gray-200"><div class="container px-4 h-14 flex items-center justify-end"><span class="text-sm text-gray-600 ml-3 whitespace-nowrap font-normal">ניהול קבוצות מחוץ לסל - מרפאת פיזיותרפיה עזריאלי מודיעין</span> <svg class="h-9 ml-6" viewBox="0 0 120 34" width="120" height="34" xmlns="http://www.w3.org/2000/svg"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;fill:#00A651;}
          .st1{fill-rule:evenodd;clip-rule:evenodd;fill:#00AEEF;}
          .st3{fill:#EDEDED;}
          .st4{fill:#1D439A;}</style><g><path class="st0" d="M28.1,5.5c0,0,0.3,1.7-0.6,5.9l-1.7,8.2h5.8 l1.7-8.2c0.8-3.8,0.6-5.9,0.6-5.9H28.1z"></path><path class="st0" d="M69.4,5.5l-1.2,5.8h4.7c2,0,3.2,1,2.1,6.4 c-1,4.8-2.6,6.4-4.7,6.4h-4.8l-1.2,5.8h7.4c4.1,0,7.5-3.8,9.3-12.2c1.9-9.2-0.8-12.2-4.2-12.2L69.4,5.5z"></path><path class="st0" d="M36.7,1c0,0.6,0,1.2-0.1,1.7l-0.5,2.8 c-0.5,3.5,0.3,5.8,4,5.8h1.8c3.2-0.2,1.8,1.9,0.7,4.6l-5.3,14h6.1l5.9-15.8c2.2-5.9,0.1-8.6-2.2-8.6c-1.7,0-2.4,0-3.8,0 c-1.5,0-1.3-1.4-1-2.6c0.1-0.7,0.1-1.5,0.1-1.9L36.7,1z"></path><path class="st0" d="M6.2,21.7c-1.1,4.9-3.2,3.7-4.7,3.4 c-0.4,1.8-1,4.6-1,4.6c1.6,0.3,3.2,0.4,4.7,0.4c3.1-0.1,5.3-1.5,6.8-8.9l2.1-9.9h2.1c2.6,0,2.5,1.1,1.9,4.5l-2.9,14.1H21l3.2-15.4 c1.8-8.3-0.8-9.1-4.8-9.1H9.6L6.2,21.7z"></path><path class="st0" d="M52.6,1c0,0.6,0,1.2-0.1,1.7 C52.3,3.9,52,5.5,52,5.5c-0.5,3.5,0.3,5.8,4,5.8h1.8c3.2-0.2,1.8,1.9,0.7,4.6l-5.3,14h6.1l5.9-15.8c2.2-5.9,0.1-8.6-2.2-8.6 c-1.7,0-2.4,0-3.8,0c-1.5,0-1.3-1.4-1-2.6c0.1-0.7,0.1-1.5,0.1-1.9L52.6,1z"></path><path class="st1" d="M102.4,1.6l-7.6,6.3 c-0.3,0.3-0.7,0.4-1.2,0.4h-5c-0.4,0-0.7,0.3-0.8,0.7l-1,4.7c0,0.2,0,0.3,0.1,0.5c0.1,0.1,0.3,0.2,0.4,0.2h9 c0.6,0,1.1-0.2,1.6-0.5l5.4-4.5c0.2-0.1,0.4-0.2,0.6-0.2c0.3,0,0.5,0.1,0.7,0.3l3.6,4.2c0.4,0.5,1.1,0.8,1.7,0.7h8.1 c0.4,0,0.7-0.3,0.8-0.7l1-4.7c0-0.2,0-0.3-0.1-0.5c-0.1-0.1-0.3-0.2-0.4-0.2h-6.8c-0.3,0-0.5-0.1-0.7-0.3l-5.4-6.3 c-0.5-0.6-1.2-0.9-1.9-0.9C103.7,0.7,102.9,1,102.4,1.6"></path><path class="st0" d="M86.1,19.8c-0.4,0-0.7,0.3-0.8,0.7l-1,4.7 c0,0.2,0,0.3,0.1,0.5c0.1,0.1,0.3,0.2,0.4,0.2h6.8c0.3,0,0.5,0.1,0.7,0.3l5.4,6.3c0.5,0.6,1.2,0.9,1.9,0.9c0.8,0,1.6-0.3,2.1-0.9 l7.5-6.3c0.3-0.3,0.7-0.4,1.2-0.4h5c0.4,0,0.7-0.3,0.8-0.7l1-4.6c0-0.2,0-0.3-0.1-0.5c-0.1-0.1-0.3-0.2-0.4-0.2h-9 c-0.6,0-1.1,0.1-1.6,0.5l-5.4,4.5c-0.2,0.1-0.4,0.2-0.6,0.2c-0.2,0-0.5-0.1-0.7-0.3l-3.6-4.2c-0.4-0.5-1.1-0.8-1.7-0.7L86.1,19.8z"></path></g></svg></div></div> <div class="bg-gray-50"><div class="container px-4 h-12 flex items-center justify-center"><div class="flex items-center"><button class="px-4 text-sm text-gray-700 hover:text-blue-600 hover:bg-white py-3 transition-colors">ממתינים</button> <div class="h-6 w-px bg-gray-300"></div> <button class="px-4 text-sm text-gray-700 hover:text-blue-600 hover:bg-white py-3 transition-colors">מטופלים</button> <div class="h-6 w-px bg-gray-300"></div> <button class="px-4 text-sm text-gray-700 hover:text-blue-600 hover:bg-white py-3 transition-colors">מנחים</button> <div class="h-6 w-px bg-gray-300"></div> <button class="px-4 text-sm text-gray-700 hover:text-blue-600 hover:bg-white py-3 transition-colors">קבוצות</button> <div class="h-6 w-px bg-gray-300"></div> <button class="px-4 text-sm text-gray-700 hover:text-blue-600 hover:bg-white py-3 transition-colors">דוח חודשי</button> <div class="h-6 w-px bg-gray-300"></div> <button class="px-4 text-sm text-gray-700 hover:text-blue-600 hover:bg-white py-3 transition-colors">מדדים</button> <div class="h-6 w-px bg-gray-300"></div> <button class="px-4 text-sm text-green-600 hover:text-green-700 hover:bg-white py-3 font-medium transition-colors">שמירה</button> <div class="h-6 w-px bg-gray-300"></div> <button class="px-4 text-sm text-blue-600 hover:text-blue-700 hover:bg-white py-3 font-medium transition-colors">טעינה</button></div></div></div> <input type="file" accept=".csv,.json" class="hidden"/></nav>`);function Gi(e,r){xe(r,!1);let a=b();function i(R){const B=R.target,et=B.files?.[0];if(et){const U=new FileReader;U.onload=C=>{const Y=C.target?.result;et.name.endsWith(".json")&&(Ei(Y)?(alert("נתונים נטענו בהצלחה!"),location.reload()):alert("שגיאה בטעינת הנתונים. אנא בדק את הקובץ."))},U.readAsText(et)}B.value=""}function o(){t(a).click()}Ae();var s=Ci(),d=l(n(s),2),v=n(d),c=n(v),u=n(c),w=l(u,4),h=l(w,4),I=l(h,4),y=l(I,4),m=l(y,4),g=l(m,4),A=l(g,4),j=l(d,2);wi(j,R=>p(a,R),()=>t(a)),N("click",u,()=>ae("/waitlist")),N("click",w,()=>ae("/patients")),N("click",h,()=>ae("/therapists")),N("click",I,()=>ae("/groupsList")),N("click",y,()=>ae("/monthlyReport")),N("click",m,()=>ae("/indicators")),N("click",g,function(...R){Ni?.apply(this,R)}),N("click",A,o),N("change",j,i),x(e,s),ge()}const Ta="phizio-db-v1";function tr(){return crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2)}function Ut(){const e=localStorage.getItem(Ta);if(e){const o=JSON.parse(e);return o.attendance||(o.attendance=[]),o.patientPayments||(o.patientPayments=[]),o.patientsInGroups&&(o.patientsInGroups=o.patientsInGroups.map(s=>s.enrolled===void 0?{...s,enrolled:1}:s)),o.attendance&&(o.attendance=o.attendance.map(s=>s.isMakeup===void 0?{...s,isMakeup:!1}:s)),o.groups&&o.patientsInGroups&&o.groups.forEach(s=>{const d=o.patientsInGroups.filter(v=>v.groupId===s.id&&v.enrolled===1).length;s.available=s.capacity-d}),o}const r={id:tr(),code:"active"},a={id:tr(),code:"inactive"},i={statuses:[r,a],therapists:[],patients:[],groups:[],patientsInGroups:[],therapistsInGroups:[],attendance:[],patientPayments:[]};return localStorage.setItem(Ta,JSON.stringify(i)),i}function le(e){localStorage.setItem(Ta,JSON.stringify(e))}function ra(e,r){return e.statuses.find(a=>a.code===r).id}const $t={addTherapist(e,r){const a=Date.now();e.therapists.push({id:tr(),name:r,createdAt:a,updatedAt:a,statusId:ra(e,"active")}),le(e)},updateTherapist(e,r,a){const i=e.therapists.find(o=>o.id===r);i&&(Object.assign(i,a,{updatedAt:Date.now()}),le(e))},removeTherapist(e,r){e.therapists=e.therapists.filter(a=>a.id!==r),e.therapistsInGroups=e.therapistsInGroups.filter(a=>a.therapistId!==r),le(e)},addPatient(e,r){const a=Date.now();e.patients.push({id:tr(),...r,createdAt:a,updatedAt:a,statusId:ra(e,"active")}),le(e)},updatePatient(e,r,a){const i=e.patients.find(o=>o.id===r);i&&(Object.assign(i,a,{updatedAt:Date.now()}),le(e))},removePatient(e,r){e.patients=e.patients.filter(a=>a.id!==r),e.patientsInGroups=e.patientsInGroups.filter(a=>a.patientId!==r),e.attendance=e.attendance.filter(a=>a.patientId!==r),le(e)},addGroup(e,r,a=15,i=15,o="open"){const s=Date.now();e.groups.push({id:tr(),name:r,capacity:a,available:i,when:o,createdAt:s,updatedAt:s}),le(e)},updateGroup(e,r,a){const i=e.groups.find(o=>o.id===r);i&&(Object.assign(i,a,{updatedAt:Date.now()}),le(e))},removeGroup(e,r){e.groups=e.groups.filter(a=>a.id!==r),e.patientsInGroups=e.patientsInGroups.filter(a=>a.groupId!==r),e.therapistsInGroups=e.therapistsInGroups.filter(a=>a.groupId!==r),e.attendance=e.attendance.filter(a=>a.groupId!==r),le(e)},setTherapistForGroup(e,r,a){e.therapistsInGroups=e.therapistsInGroups.filter(i=>i.groupId!==r),e.therapistsInGroups.push({id:tr(),therapistId:a,groupId:r,createdAt:Date.now(),updatedAt:Date.now(),statusId:ra(e,"active")}),le(e)},addPatientToGroup(e,r,a,i){if(e.patientsInGroups.some(c=>c.groupId===r&&c.patientId===a))return;const o=e.groups.find(c=>c.id===r);if(!o)return;const v=$t.getAvailableWithActiveSubscriptions(e,r)>0?1:0;if(e.patientsInGroups.push({id:tr(),patientId:a,groupId:r,receipt:i,enrolled:v,createdAt:Date.now(),updatedAt:Date.now(),statusId:ra(e,"active")}),v===1){const c=e.patientsInGroups.filter(u=>u.groupId===r&&u.enrolled===1).length;o.available=o.capacity-c,o.updatedAt=Date.now()}le(e)},removePatientFromGroup(e,r,a){const o=e.patientsInGroups.find(s=>s.groupId===r&&s.patientId===a)?.enrolled===1;if(e.patientsInGroups=e.patientsInGroups.filter(s=>!(s.groupId===r&&s.patientId===a)),o){const s=e.groups.find(d=>d.id===r);if(s){const d=e.patientsInGroups.filter(v=>v.groupId===r&&v.enrolled===0).sort((v,c)=>v.createdAt-c.createdAt)[0];if(d)d.enrolled=1,d.updatedAt=Date.now();else{const v=e.patientsInGroups.filter(c=>c.groupId===r&&c.enrolled===1).length;s.available=s.capacity-v,s.updatedAt=Date.now()}}}le(e)},updatePatientReceipt(e,r,a,i){const o=e.patientsInGroups.find(s=>s.groupId===r&&s.patientId===a);o&&(o.receipt=i,o.updatedAt=Date.now(),le(e))},markAttendance(e,r,a,i,o,s=!1){const d=e.attendance.find(v=>v.groupId===r&&v.patientId===a&&v.date===o);if(d){d.therapistId=i,d.isMakeup=s,le(e);return}e.attendance.push({id:tr(),patientId:a,groupId:r,therapistId:i,date:o,isMakeup:s,createdAt:Date.now()}),le(e)},unmarkAttendance(e,r,a,i){e.attendance=e.attendance.filter(o=>!(o.groupId===r&&o.patientId===a&&o.date===i)),le(e)},getAttendanceForGroupAndDate(e,r,a){return new Set(e.attendance.filter(i=>i.groupId===r&&i.date===a).map(i=>i.patientId))},addPayment(e,r){const a=Date.now();e.patientPayments.push({id:tr(),...r,createdAt:a,updatedAt:a}),le(e)},updatePayment(e,r,a){const i=e.patientPayments.find(o=>o.id===r);i&&(Object.assign(i,a,{updatedAt:Date.now()}),le(e))},deletePayment(e,r){e.patientPayments=e.patientPayments.filter(a=>a.id!==r),le(e)},getPaymentsByPatient(e,r){return e.patientPayments.filter(a=>a.patientId===r).sort((a,i)=>i.createdAt-a.createdAt)},getPaymentsByGroup(e,r){return e.patientPayments.filter(a=>a.groupId===r).sort((a,i)=>i.createdAt-a.createdAt)},recalculateAvailableSpots(e){e.groups.forEach(r=>{const a=e.patientsInGroups.filter(i=>i.groupId===r.id&&i.enrolled===1).length;r.available=r.capacity-a,r.updatedAt=Date.now()}),le(e)},hasActiveSubscription(e,r,a){const i=new Date,o=i.getMonth()+1,s=i.getFullYear();return e.patientPayments.filter(v=>v.patientId===r&&v.groupId===a).some(v=>{const[c,u]=v.fromMonth.split("/"),w=parseInt(c),h=parseInt(u),[I,y]=v.toMonth.split("/"),m=parseInt(I),g=parseInt(y),A=s*12+o,j=h*12+w,R=g*12+m;return j<=A&&A<=R})},getActiveSubscriptionCount(e,r){return e.patientsInGroups.filter(i=>i.groupId===r&&i.enrolled===1).filter(i=>$t.hasActiveSubscription(e,i.patientId,r)).length},getAvailableWithActiveSubscriptions(e,r){const a=e.groups.find(o=>o.id===r);if(!a)return 0;const i=$t.getActiveSubscriptionCount(e,r);return a.capacity-i},getPatientsWithActiveSubscriptions(e,r){return e.patientsInGroups.filter(a=>a.groupId===r&&a.enrolled===1&&$t.hasActiveSubscription(e,a.patientId,r))}};function fr(e,r){if(!e||e.length===0){alert("אין נתונים לייצוא");return}const a=Object.keys(e[0]),i="\uFEFF",o=a.join(","),s=e.map(w=>a.map(h=>{const I=w[h]??"",y=String(I);return y.includes(",")||y.includes('"')||y.includes(`
`)?`"${y.replace(/"/g,'""')}"`:y}).join(",")),d=i+o+`
`+s.join(`
`),v=new Blob([d],{type:"text/csv;charset=utf-8"}),c=window.URL.createObjectURL(v),u=document.createElement("a");u.href=c,u.download=`${r}_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(c)}var Di=k('<input class="border rounded px-2 py-1 w-full" dir="rtl"/>'),ji=k('<span class="text-gray-900"> </span>'),Ti=k('<button class="text-green-600 hover:underline text-sm">שמור</button> <button class="text-gray-600 hover:underline text-sm">ביטול</button>',1),Li=k('<button class="text-blue-600 hover:text-blue-700 p-1" title="ערוך" aria-label="ערוך"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button> <button class="text-red-600 hover:text-red-700 p-1" title="מחק" aria-label="מחק"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button>',1),Bi=k('<div class="flex items-center justify-between py-2"><div class="flex-1 max-w-sm"><!></div> <div class="flex gap-1 min-w-[80px] justify-end"><!></div></div>'),Fi=k('<div class="py-8 text-center text-gray-500">אין מנחים</div>'),Oi=k('<section class="space-y-6"><div class="bg-white rounded-lg shadow p-4"><div class="flex justify-between items-center mb-4"><button class="text-blue-600 hover:text-blue-700 text-sm font-medium">ייצוא</button> <h2 class="text-lg font-semibold">מנחה</h2></div> <form><div class="flex flex-row-reverse items-center gap-2"><input class="flex-1 border rounded px-3 h-10" style="text-align: right;" placeholder="שם מלא" dir="rtl"/> <button type="submit" class="big-green-button" style="min-width: 100px;">הוסף/י</button></div></form></div> <div class="bg-white rounded-lg shadow p-4"><div class="flex items-center justify-between py-2 border-b mb-2"><div class="flex-1 max-w-sm"><button class="py-1 px-2 inline-flex items-center"><span class="text-gray-700 font-semibold text-sm">שם מנחה</span> <svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></button></div> <div class="flex gap-1 min-w-[80px] justify-end"></div></div> <div class="space-y-2"><!> <!></div></div></section>');function Yi(e,r){xe(r,!1);const a=b();let i=b(Ut()),o=b(""),s=b(""),d=b(""),v=b("asc");function c(){t(o).trim()&&($t.addTherapist(t(i),t(o).trim()),p(o,""),p(i,Ut()))}function u($){confirm("למחוק מנחה?")&&($t.removeTherapist(t(i),$),p(i,Ut()))}function w($,q){p(s,$),p(d,q)}function h(){p(s,""),p(d,"")}function I(){t(d).trim()&&($t.updateTherapist(t(i),t(s),{name:t(d).trim()}),p(s,""),p(d,""),p(i,Ut()))}function y(){p(v,t(v)==="asc"?"desc":"asc")}function m(){const $=t(a).map(q=>({"שם מנחה":q.name}));fr($,"therapists")}Z(()=>(t(i),t(v)),()=>{p(a,[...t(i).therapists].sort((q,G)=>{const K=(q.name||"").localeCompare(G.name||"","he");return t(v)==="asc"?K:-K}))}),Ce(),Ae();var g=Oi(),A=n(g),j=n(A),R=n(j),B=l(j,2),et=n(B),U=n(et),C=l(A,2),Y=n(C),ot=n(Y),It=n(ot),H=l(n(It),2),rt=n(H),T=l(Y,2),S=n(T);ne(S,1,()=>t(a),$=>$.id,($,q)=>{var G=Bi(),K=n(G),it=n(K);{var mt=lt=>{var M=Di();L(()=>M.dir=M.dir),Jt(M,()=>t(d),V=>p(d,V)),N("keydown",M,V=>V.key==="Enter"&&I()),x(lt,M)},yt=lt=>{var M=ji(),V=n(M);L(()=>_(V,(t(q),f(()=>t(q).name)))),x(lt,M)};at(it,lt=>{t(s),t(q),f(()=>t(s)===t(q).id)?lt(mt):lt(yt,!1)})}var xt=l(K,2),Tt=n(xt);{var Pt=lt=>{var M=Ti(),V=Xt(M),ct=l(V,2);N("click",V,I),N("click",ct,h),x(lt,M)},dt=lt=>{var M=Li(),V=Xt(M),ct=l(V,2);N("click",V,()=>w(t(q).id,t(q).name)),N("click",ct,()=>u(t(q).id)),x(lt,M)};at(Tt,lt=>{t(s),t(q),f(()=>t(s)===t(q).id)?lt(Pt):lt(dt,!1)})}x($,G)});var F=l(S,2);{var Q=$=>{var q=Fi();x($,q)};at(F,$=>{t(a),f(()=>t(a).length===0)&&$(Q)})}L(()=>{U.dir=U.dir,mr(rt,"d",t(v)==="asc"?"M5 15l7-7 7 7":"M19 9l-7 7-7-7")}),N("click",R,m),Jt(U,()=>t(o),$=>p(o,$)),N("submit",B,Wa(c)),N("click",It,y),x(e,g),ge()}var Ri=k('<div class="flex flex-row-reverse items-center gap-2"><input class="flex-1 border rounded px-3 py-1 text-sm" style="text-align: right;" placeholder="שם פרטי" dir="rtl" aria-label="עריכת שם פרטי"/> <input class="border rounded px-3 py-1 text-sm" style="text-align: right; min-width: 150px; flex: 0.8;" placeholder="שם משפחה" dir="rtl" aria-label="עריכת שם משפחה"/> <input class="border rounded px-3 py-1 text-sm" style="text-align: right; width: 120px;" placeholder="ת.ז." dir="rtl" aria-label="עריכת תעודת זהות"/> <input class="border rounded px-3 py-1 text-sm" style="text-align: right; width: 140px;" placeholder="טלפון" dir="rtl" aria-label="עריכת טלפון"/></div>'),zi=k('<button class="text-gray-900 text-left hover:bg-gray-50 rounded px-2 py-1 transition-colors"><span class="font-medium hover:text-blue-600"> </span> <span class="text-gray-600 text-sm mr-3"> </span> <span class="text-gray-600 text-sm"> </span></button>'),Vi=k('<button class="big-blue-button" style="height: auto; padding: 0.25rem 0.5rem; font-size: 0.875rem;">שמור</button> <button class="big-orange-button" style="height: auto; padding: 0.25rem 0.5rem; font-size: 0.875rem;">ביטול</button>',1),Hi=k('<button class="text-green-600 hover:text-green-700 p-1" title="רישום" aria-label="רישום"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button> <button class="text-purple-600 hover:text-purple-700 p-1" title="היסטוריה" aria-label="היסטוריה"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button> <button class="text-indigo-600 hover:text-indigo-700 p-1" title="קבוצות" aria-label="קבוצות"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></button> <button class="text-blue-600 hover:text-blue-700 p-1" title="ערוך" aria-label="ערוך"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button> <button class="text-red-600 hover:text-red-700 p-1" title="מחק" aria-label="מחק"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button>',1),Wi=k('<div><div class="flex-1 min-w-0"><!></div> <div class="flex gap-1" style="min-width: 90px;"><!></div></div>'),Ui=k('<div class="py-8 text-center text-gray-500"><!></div>'),qi=k('<section class="space-y-6"><div class="bg-white rounded-lg shadow p-4"><div class="flex justify-between items-center mb-4"><button class="text-blue-600 hover:text-blue-700 text-sm font-medium">ייצוא</button> <h2 class="text-lg font-semibold">מטופלים</h2></div> <div class="mb-3"><input type="text" class="w-full border rounded-full px-4 py-2 text-sm" style="text-align: right;" placeholder="חיפוש..." dir="rtl"/></div> <form><div class="flex flex-row-reverse items-center gap-2"><input class="flex-1 border rounded px-3 h-10" style="text-align: right;" placeholder="שם פרטי" dir="rtl" aria-label="שם פרטי"/> <input class="border rounded px-3 h-10" style="text-align: right; min-width: 150px; flex: 0.8;" placeholder="שם משפחה" dir="rtl" aria-label="שם משפחה"/> <input class="border rounded px-3 h-10" style="text-align: right; width: 120px;" placeholder="ת.ז." dir="rtl" aria-label="תעודת זהות"/> <input class="border rounded px-3 h-10" style="text-align: right; width: 140px;" placeholder="טלפון" dir="rtl" aria-label="טלפון"/> <button class="big-green-button" style="min-width: 90px;">הוסף/י</button></div></form></div> <div class="bg-white rounded-lg shadow p-4"><div class="flex items-center gap-4 py-2 border-b mb-2"><div class="flex-1 min-w-0"><button class="py-1 px-2 inline-flex items-center"><span class="text-gray-700 font-semibold text-sm">פרטי מטופל</span> <svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></button></div> <div class="flex gap-1 min-w-[80px] justify-end"></div></div> <div class="space-y-2"><!> <!></div></div></section>');function Ji(e,r){xe(r,!1);const a=b();let i=b(Ut()),o=b(""),s=b(""),d=b(""),v=b(""),c=b(""),u=b(""),w=b(""),h=b(""),I=b(""),y=b(""),m=b("asc");function g(){!t(o)||!t(s)||($t.addPatient(t(i),{firstName:t(o),lastName:t(s),nationalId:t(d),phone:t(v)}),p(o,p(s,p(d,p(v,"")))),p(i,Ut()))}function A(M){confirm("למחוק מטופל/ת?")&&($t.removePatient(t(i),M),p(i,Ut()))}function j(M){p(c,M.id),p(u,M.firstName),p(w,M.lastName),p(h,M.nationalId),p(I,M.phone)}function R(){p(c,""),p(u,p(w,p(h,p(I,""))))}function B(){!t(u).trim()||!t(w).trim()||($t.updatePatient(t(i),t(c),{firstName:t(u).trim(),lastName:t(w).trim(),nationalId:t(h).trim(),phone:t(I).trim()}),p(c,""),p(u,p(w,p(h,p(I,"")))),p(i,Ut()))}function et(){p(m,t(m)==="asc"?"desc":"asc")}function U(){const M=t(a).map(V=>({"שם פרטי":V.firstName,"שם משפחה":V.lastName,"ת.ז.":V.nationalId,טלפון:V.phone}));fr(M,"patients")}Z(()=>(t(i),t(y),t(m)),()=>{p(a,(()=>{let M=[...t(i).patients];if(t(y).trim()){const V=t(y).trim().toLowerCase();M=M.filter(ct=>[ct.firstName||"",ct.lastName||"",ct.nationalId||"",ct.phone||""].join(" ").toLowerCase().includes(V))}return M.sort((V,ct)=>{const Ft=`${V.firstName||""} ${V.lastName||""}`,Ot=`${ct.firstName||""} ${ct.lastName||""}`,_t=Ft.localeCompare(Ot,"he");return t(m)==="asc"?_t:-_t})})())}),Ce(),Ae();var C=qi(),Y=n(C),ot=n(Y),It=n(ot),H=l(ot,2),rt=n(H),T=l(H,2),S=n(T),F=n(S),Q=l(F,2),$=l(Q,2),q=l($,2),G=l(Y,2),K=n(G),it=n(K),mt=n(it),yt=l(n(mt),2),xt=n(yt),Tt=l(K,2),Pt=n(Tt);ne(Pt,1,()=>t(a),M=>M.id,(M,V)=>{var ct=Wi(),Ft=n(ct),Ot=n(Ft);{var _t=St=>{var E=Ri(),z=n(E),tt=l(z,2),ft=l(tt,2),Mt=l(ft,2);L(()=>{z.dir=z.dir,tt.dir=tt.dir,ft.dir=ft.dir,Mt.dir=Mt.dir}),Jt(z,()=>t(u),ut=>p(u,ut)),Jt(tt,()=>t(w),ut=>p(w,ut)),Jt(ft,()=>t(h),ut=>p(h,ut)),Jt(Mt,()=>t(I),ut=>p(I,ut)),x(St,E)},Nt=St=>{var E=zi(),z=n(E),tt=n(z),ft=l(z,2),Mt=n(ft),ut=l(ft,2),wt=n(ut);L(()=>{_(tt,`${t(V),f(()=>t(V).firstName)??""} ${t(V),f(()=>t(V).lastName)??""}`),_(Mt,`ת.ז. ${t(V),f(()=>t(V).nationalId)??""}`),_(wt,`טל. ${t(V),f(()=>t(V).phone)??""}`)}),N("click",E,()=>ae(`/patientAttendance/${t(V).id}`)),x(St,E)};at(Ot,St=>{t(c),t(V),f(()=>t(c)===t(V).id)?St(_t):St(Nt,!1)})}var Bt=l(Ft,2),Vt=n(Bt);{var Qt=St=>{var E=Vi(),z=Xt(E),tt=l(z,2);N("click",z,B),N("click",tt,R),x(St,E)},te=St=>{var E=Hi(),z=Xt(E),tt=l(z,2),ft=l(tt,2),Mt=l(ft,2),ut=l(Mt,2);N("click",z,()=>ae(`/registration/${t(V).id}`)),N("click",tt,()=>ae(`/history/${t(V).id}`)),N("click",ft,()=>ae(`/groupsForPatient/${t(V).id}`)),N("click",Mt,()=>j(t(V))),N("click",ut,()=>A(t(V).id)),x(St,E)};at(Vt,St=>{t(c),t(V),f(()=>t(c)===t(V).id)?St(Qt):St(te,!1)})}L(()=>ye(ct,1,`flex ${t(c),t(V),f(()=>t(c)===t(V).id?"flex-row-reverse":"")??""} items-center gap-4 py-2`)),x(M,ct)});var dt=l(Pt,2);{var lt=M=>{var V=Ui(),ct=n(V);{var Ft=_t=>{var Nt=Jr();L(()=>_(Nt,`לא נמצאו תוצאות עבור "${t(y)??""}"`)),x(_t,Nt)},Ot=_t=>{var Nt=Jr("אין מטופלים");x(_t,Nt)};at(ct,_t=>{t(y),f(()=>t(y).trim())?_t(Ft):_t(Ot,!1)})}x(M,V)};at(dt,M=>{t(a),f(()=>t(a).length===0)&&M(lt)})}L(()=>{rt.dir=rt.dir,F.dir=F.dir,Q.dir=Q.dir,$.dir=$.dir,q.dir=q.dir,mr(xt,"d",t(m)==="asc"?"M5 15l7-7 7 7":"M19 9l-7 7-7-7")}),N("click",It,U),Jt(rt,()=>t(y),M=>p(y,M)),Jt(F,()=>t(o),M=>p(o,M)),Jt(Q,()=>t(s),M=>p(s,M)),Jt($,()=>t(d),M=>p(d,M)),Jt(q,()=>t(v),M=>p(v,M)),N("submit",T,Wa(g)),N("click",mt,et),x(e,C),ge()}var Ki=k('<div class="bg-white rounded-lg shadow p-4"><p class="text-center text-gray-500 py-8">קבוצה לא נמצאה</p></div>'),Qi=k('<input id="group-name" class="flex-1 border rounded px-3 h-10" style="text-align: right;" dir="rtl"/>'),Xi=k('<div class="flex-1 px-3 py-2"><span class="text-lg font-medium"> </span></div>'),Zi=k("<option> </option>"),to=k('<select id="therapist" class="flex-1 border rounded px-3 h-10" style="text-align: right;" dir="rtl"><option disabled>בחר/י</option><!></select>'),eo=k('<div class="flex-1 px-3 py-2"><span class="text-lg font-medium"> </span></div>'),ro=k('<input id="when-input" class="w-40 border rounded px-3 h-10" style="text-align: right;" dir="rtl"/>'),ao=k('<div class="w-40 px-3 py-2"><span> </span></div>'),no=k('<div class="w-20 px-3 py-2 text-center bg-gray-100 rounded"><span class="text-gray-600"> </span></div>'),so=k('<div class="w-20 px-3 py-2 text-center"><span> </span></div>'),io=k('<input id="capacity-input" class="w-20 border rounded px-3 h-10" style="text-align: right;" type="number" dir="rtl"/>'),oo=k('<div class="w-20 px-3 py-2 text-center"><span> </span></div>'),lo=k('<button class="big-blue-button">שמור</button> <button class="big-orange-button">ביטול</button>',1),vo=k('<button class="big-blue-button">ערוך פרטים</button> <button class="big-red-button">מחק קבוצה</button>',1),co=k('<div class="bg-white rounded-lg shadow p-4 space-y-4"><div class="flex flex-row-reverse items-center gap-3"><label class="text-sm text-gray-600 font-medium whitespace-nowrap" for="group-name">שם קבוצה</label> <!></div> <div class="flex flex-row-reverse items-center gap-3"><label class="text-sm text-gray-600 font-medium whitespace-nowrap" for="therapist">מנחה</label> <!></div> <div class="flex flex-row-reverse items-center gap-3"><label class="text-sm text-gray-600 font-medium whitespace-nowrap" for="when-input">מתי</label> <!> <span class="text-sm text-gray-600 font-medium whitespace-nowrap">פנוי</span> <!> <label class="text-sm text-gray-600 font-medium whitespace-nowrap" for="capacity-input">קיבולת</label> <!></div> <div class="flex justify-center gap-3 pt-4 border-t"><!></div> <div class="mt-6 pt-4 border-t"><h3 class="text-sm font-medium text-gray-600 mb-2">סטטיסטיקה</h3> <div class="grid grid-cols-3 gap-4 text-center"><div><div class="text-2xl font-bold text-blue-600"> </div> <div class="text-sm text-gray-500">רשומים</div></div> <div><div class="text-2xl font-bold text-orange-600"> </div> <div class="text-sm text-gray-500">ממתינים</div></div> <div><div> </div> <div class="text-sm text-gray-500">מקומות פנויים</div></div></div></div></div>'),uo=k('<section class="space-y-6"><div class="bg-white rounded-lg shadow p-4"><div class="flex justify-between items-center mb-4"><button class="text-blue-600 hover:underline text-sm">חזרה לרשימה</button> <h2 class="text-lg font-semibold">עריכת קבוצה</h2></div></div> <!></section>');function po(e,r){xe(r,!1);const a=()=>cr(pr,"$route",i),[i,o]=ur(),s=b(),d=b(),v=b(),c=b(),u=b(),w=b();let h=b(Ut()),I=b(!1),y=b(""),m=b(15),g=b("open"),A=b("");function j(){t(d)&&(p(I,!0),p(y,t(d).name),p(m,t(d).capacity||15),p(g,t(d).when||"open"),p(A,t(v)?.therapistId||""))}function R(){p(I,!1),p(y,""),p(m,15),p(g,"open"),p(A,"")}function B(){if(!t(y).trim()||!t(s))return;const S=t(h).patientsInGroups.filter(Q=>Q.groupId===t(s)&&Q.enrolled===1).length,F=t(m)-S;$t.updateGroup(t(h),t(s),{name:t(y).trim(),capacity:t(m),available:F,when:t(g)}),t(A)!==(t(v)?.therapistId||"")&&$t.setTherapistForGroup(t(h),t(s),t(A)),p(I,!1),p(h,Ut())}function et(){t(s)&&confirm("למחוק קבוצה?")&&($t.removeGroup(t(h),t(s)),ae("groupsList"))}function U(){ae("groupsList")}Z(()=>a(),()=>{p(s,a().segments[0]||null)}),Z(()=>(t(s),t(h)),()=>{p(d,t(s)?t(h).groups.find(S=>S.id===t(s)):null)}),Z(()=>(t(s),t(h)),()=>{p(v,t(s)?t(h).therapistsInGroups.find(S=>S.groupId===t(s)):null)}),Z(()=>(t(s),t(h)),()=>{p(c,t(s)?t(h).patientsInGroups.filter(S=>S.groupId===t(s)&&S.enrolled===1).length:0)}),Z(()=>(t(s),t(h)),()=>{p(u,t(s)?t(h).patientsInGroups.filter(S=>S.groupId===t(s)&&S.enrolled===0).length:0)}),Z(()=>(t(d),t(c)),()=>{p(w,t(d)?t(d).capacity-t(c):0)}),Ce(),Ae();var C=uo(),Y=n(C),ot=n(Y),It=n(ot),H=l(Y,2);{var rt=S=>{var F=Ki();x(S,F)},T=S=>{var F=co(),Q=n(F),$=l(n(Q),2);{var q=W=>{var J=Qi();L(()=>J.dir=J.dir),Jt(J,()=>t(y),O=>p(y,O)),N("keydown",J,O=>O.key==="Enter"&&B()),x(W,J)},G=W=>{var J=Xi(),O=n(J),nt=n(O);L(()=>_(nt,(t(d),f(()=>t(d).name)))),x(W,J)};at($,W=>{t(I)?W(q):W(G,!1)})}var K=l(Q,2),it=l(n(K),2);{var mt=W=>{var J=to();L(()=>{t(A),Te(()=>{t(h)})});var O=n(J);O.value=O.__value="";var nt=l(O);ne(nt,1,()=>(t(h),f(()=>t(h).therapists)),de,(gt,kt)=>{var X=Zi(),vt=n(X),pt={};L(()=>{_(vt,(t(kt),f(()=>t(kt).name))),pt!==(pt=(t(kt),f(()=>t(kt).id)))&&(X.value=(X.__value=(t(kt),f(()=>t(kt).id)))??"")}),x(gt,X)}),L(()=>J.dir=J.dir),Le(J,()=>t(A),gt=>p(A,gt)),x(W,J)},yt=W=>{const J=ie(()=>(t(v),t(h),f(()=>t(v)?t(h).therapists.find(kt=>kt.id===t(v).therapistId):null)));var O=eo(),nt=n(O),gt=n(nt);L(()=>_(gt,(Ht(t(J)),f(()=>t(J)?t(J).name:"-")))),x(W,O)};at(it,W=>{t(I)?W(mt):W(yt,!1)})}var xt=l(K,2),Tt=l(n(xt),2);{var Pt=W=>{var J=ro();L(()=>J.dir=J.dir),Jt(J,()=>t(g),O=>p(g,O)),x(W,J)},dt=W=>{var J=ao(),O=n(J),nt=n(O);L(()=>_(nt,(t(d),f(()=>t(d).when||"open")))),x(W,J)};at(Tt,W=>{t(I)?W(Pt):W(dt,!1)})}var lt=l(Tt,4);{var M=W=>{var J=no(),O=n(J),nt=n(O);L(()=>_(nt,t(m)-t(c))),x(W,J)},V=W=>{var J=so(),O=n(J),nt=n(O);L(()=>_(nt,t(w))),x(W,J)};at(lt,W=>{t(I)?W(M):W(V,!1)})}var ct=l(lt,4);{var Ft=W=>{var J=io();L(()=>J.dir=J.dir),Jt(J,()=>t(m),O=>p(m,O)),x(W,J)},Ot=W=>{var J=oo(),O=n(J),nt=n(O);L(()=>_(nt,(t(d),f(()=>t(d).capacity)))),x(W,J)};at(ct,W=>{t(I)?W(Ft):W(Ot,!1)})}var _t=l(xt,2),Nt=n(_t);{var Bt=W=>{var J=lo(),O=Xt(J),nt=l(O,2);N("click",O,B),N("click",nt,R),x(W,J)},Vt=W=>{var J=vo(),O=Xt(J),nt=l(O,2);N("click",O,j),N("click",nt,et),x(W,J)};at(Nt,W=>{t(I)?W(Bt):W(Vt,!1)})}var Qt=l(_t,2),te=l(n(Qt),2),St=n(te),E=n(St),z=n(E),tt=l(St,2),ft=n(tt),Mt=n(ft),ut=l(tt,2),wt=n(ut),Dt=n(wt);L(()=>{_(z,t(c)),_(Mt,t(u)),ye(wt,1,`text-2xl font-bold ${t(w)<=0?"text-red-600":t(w)<=3?"text-orange-600":"text-green-600"}`),_(Dt,t(w))}),x(S,F)};at(H,S=>{t(d)?S(T,!1):S(rt)})}N("click",It,U),x(e,C),ge(),o()}var fo=ta('<svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>'),ho=ta('<svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>'),_o=ta('<svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>'),mo=ta('<svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>'),xo=k("<option> </option>"),go=k('<div class="flex items-center" style="gap: 8px; padding-right: 58px;"><select class="border rounded px-3 py-1 text-sm text-center" style="min-width: 150px; width: 200px;" dir="rtl"><option>בחר מנחה</option><!></select> <input type="text" class="border rounded px-3 py-1 text-sm text-center" style="min-width: 100px; width: 150px;" dir="rtl" placeholder="מתי"/> <input type="text" class="border rounded px-3 py-1 text-sm text-center font-medium" style="flex: 1;" dir="rtl" placeholder="שם קבוצה"/></div>'),bo=k('<div class="grid" style="grid-template-columns: 50px minmax(100px, 1fr) minmax(100px, 1fr) 3fr;"><div class="text-gray-600 text-center"><span dir="ltr" style="display: inline-block;"> </span></div> <div class="text-gray-600 text-center"><span> </span></div> <div class="text-gray-600 text-center"><span class="font-medium"> </span></div> <div class="text-gray-900 text-center"><span class="font-medium"> </span></div></div>'),yo=k('<button class="big-blue-button" style="height: auto; padding: 0.25rem 0.5rem; font-size: 0.875rem;">שמור</button> <button class="big-orange-button" style="height: auto; padding: 0.25rem 0.5rem; font-size: 0.875rem;">ביטול</button>',1),wo=k('<button class="text-indigo-600 hover:text-indigo-700 p-1" title="מטופלים" aria-label="מטופלים"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></button> <button class="text-green-600 hover:text-green-700 p-1" title="נוכחות" aria-label="נוכחות"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button> <button class="text-blue-600 hover:text-blue-700 p-1" title="ערוך" aria-label="ערוך"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button> <button class="text-red-600 hover:text-red-700 p-1" title="מחק" aria-label="מחק"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button>',1),Io=k('<div><div class="flex-1"><!></div> <div class="flex gap-1" style="min-width: 90px;"><!></div></div>'),ko=k('<div class="py-8 text-center text-gray-500"><!></div>'),$o=k('<section class="space-y-6"><div class="bg-white rounded-lg shadow p-4"><div class="flex justify-between items-center mb-4"><button class="text-blue-600 hover:text-blue-700 text-sm font-medium">ייצוא</button> <h2 class="text-lg font-semibold">קבוצות</h2></div> <div class="mb-3"><input type="text" class="w-full border rounded-full px-4 py-2 text-sm" style="text-align: right;" placeholder="חיפוש..." dir="rtl"/></div> <form><div class="flex flex-row-reverse items-center gap-2"><label for="group-name" class="text-sm text-gray-500 whitespace-nowrap">שם קבוצה</label> <input id="group-name" class="flex-1 border rounded px-3 h-10" style="text-align: right;" placeholder="שם קבוצה" dir="rtl"/> <label for="group-when" class="text-sm text-gray-500 whitespace-nowrap ml-2">מתי</label> <input id="group-when" class="border rounded px-3 h-10" style="text-align: right; width: 150px;" placeholder="יום ושעה" dir="rtl"/> <label for="group-available" class="text-sm text-gray-500 whitespace-nowrap ml-2">פנוי</label> <input id="group-available" class="border rounded px-3 h-10" style="text-align: right; width: 60px;" type="number" dir="rtl" max="99"/> <label for="group-capacity" class="text-sm text-gray-500 whitespace-nowrap ml-2">קיבולת</label> <input id="group-capacity" class="border rounded px-3 h-10" style="text-align: right; width: 60px;" type="number" dir="rtl" max="99"/> <button type="submit" class="big-green-button" style="min-width: 100px;">הוסף/י</button></div></form></div> <div class="bg-white rounded-lg shadow p-4"><div class="flex items-center py-2 border-b mb-2"><div class="flex-1 grid" style="grid-template-columns: 50px minmax(100px, 1fr) minmax(100px, 1fr) 3fr;"><button class="text-gray-700 text-center font-semibold text-sm py-1 px-2 flex items-center justify-center"><span>זמין</span> <!></button> <button class="text-gray-700 text-center font-semibold text-sm py-1 px-2 flex items-center justify-center"><span>מנחה</span> <!></button> <button class="text-gray-700 text-center font-semibold text-sm py-1 px-2 flex items-center justify-center"><span>מתי</span> <!></button> <button class="text-gray-700 text-center font-semibold text-sm py-1 px-2 flex items-center justify-center"><span>שם קבוצה</span> <!></button></div> <div class="flex gap-1 min-w-[90px] justify-end"></div></div> <div class="space-y-2"><!> <!></div></div></section>');function Sa(e,r){xe(r,!1);const a=b(),i=b();let o=b(Ut()),s=b(""),d=b(15),v=b(15),c=b(""),u=b(""),w=b(""),h=b(""),I=b(""),y=b(""),m=b(null),g=b("asc");function A(){t(s).trim()&&($t.addGroup(t(o),t(s).trim(),t(d),t(v),t(c)),p(s,""),p(d,15),p(v,15),p(c,""),p(o,Ut()))}function j(E){p(w,E.id),p(h,E.name||""),p(I,E.when||"");const z=t(o).therapistsInGroups.find(tt=>tt.groupId===E.id);p(y,z?.therapistId||"")}function R(){p(w,""),p(h,""),p(I,""),p(y,"")}function B(){if(!t(h).trim())return;const E=t(o).groups.find(z=>z.id===t(w));E&&($t.updateGroup(t(o),t(w),{name:t(h).trim(),capacity:E.capacity,available:E.available,when:t(I).trim()}),t(y)?$t.setTherapistForGroup(t(o),t(w),t(y)):t(o).therapistsInGroups.find(tt=>tt.groupId===t(w))&&(Xe(o,t(o).therapistsInGroups=t(o).therapistsInGroups.filter(tt=>tt.groupId!==t(w))),le(t(o))),R(),p(o,Ut()))}function et(E){confirm("למחוק קבוצה?")&&($t.removeGroup(t(o),E),p(o,Ut()))}function U(E){ae(`groupAttendance/${E}`)}function C(E){ae(`patientsInGroup/${E}`)}function Y(E){t(m)===E?p(g,t(g)==="asc"?"desc":"asc"):(p(m,E),p(g,"asc"))}function ot(){const E=t(i).map(z=>{const tt=t(o).therapistsInGroups.find(Mt=>Mt.groupId===z.id),ft=tt?t(o).therapists.find(Mt=>Mt.id===tt.therapistId):null;return{"שם קבוצה":z.name,מנחה:ft?ft.name:"",מתי:z.when,קיבולת:z.capacity||15,זמין:z.available||15}});fr(E,"groups")}Z(()=>(t(u),t(o)),()=>{p(a,(()=>{if(!t(u).trim())return t(o).groups;const E=t(u).toLowerCase();return t(o).groups.filter(z=>{if(z.name?.toLowerCase().includes(E)||z.when?.toLowerCase().includes(E))return!0;const tt=t(o).therapistsInGroups.find(ft=>ft.groupId===z.id);return!!(tt&&t(o).therapists.find(Mt=>Mt.id===tt.therapistId)?.name?.toLowerCase().includes(E))})})())}),Z(()=>(t(a),t(m),t(o),t(g)),()=>{p(i,(()=>{const E=[...t(a)];return t(m)?E.sort((z,tt)=>{let ft=0;if(t(m)==="name")ft=(z.name||"").localeCompare(tt.name||"","he");else if(t(m)==="therapist"){const Mt=t(o).therapistsInGroups.find(W=>W.groupId===z.id),ut=t(o).therapistsInGroups.find(W=>W.groupId===tt.id),wt=Mt&&t(o).therapists.find(W=>W.id===Mt.therapistId)?.name||"",Dt=ut&&t(o).therapists.find(W=>W.id===ut.therapistId)?.name||"";ft=wt.localeCompare(Dt,"he")}else if(t(m)==="when")ft=(z.when||"").localeCompare(tt.when||"","he");else if(t(m)==="available"){const Mt=$t.getAvailableWithActiveSubscriptions(t(o),z.id),ut=$t.getAvailableWithActiveSubscriptions(t(o),tt.id);ft=Mt-ut}return t(g)==="asc"?ft:-ft}):E})())}),Ce(),Ae();var It=$o(),H=n(It),rt=n(H),T=n(rt),S=l(rt,2),F=n(S),Q=l(S,2),$=n(Q),q=l(n($),2),G=l(q,4),K=l(G,4),it=l(K,4),mt=l(H,2),yt=n(mt),xt=n(yt),Tt=n(xt),Pt=l(n(Tt),2);{var dt=E=>{var z=fo(),tt=n(z);L(()=>mr(tt,"d",t(g)==="asc"?"M5 15l7-7 7 7":"M19 9l-7 7-7-7")),x(E,z)};at(Pt,E=>{t(m)==="available"&&E(dt)})}var lt=l(Tt,2),M=l(n(lt),2);{var V=E=>{var z=ho(),tt=n(z);L(()=>mr(tt,"d",t(g)==="asc"?"M5 15l7-7 7 7":"M19 9l-7 7-7-7")),x(E,z)};at(M,E=>{t(m)==="therapist"&&E(V)})}var ct=l(lt,2),Ft=l(n(ct),2);{var Ot=E=>{var z=_o(),tt=n(z);L(()=>mr(tt,"d",t(g)==="asc"?"M5 15l7-7 7 7":"M19 9l-7 7-7-7")),x(E,z)};at(Ft,E=>{t(m)==="when"&&E(Ot)})}var _t=l(ct,2),Nt=l(n(_t),2);{var Bt=E=>{var z=mo(),tt=n(z);L(()=>mr(tt,"d",t(g)==="asc"?"M5 15l7-7 7 7":"M19 9l-7 7-7-7")),x(E,z)};at(Nt,E=>{t(m)==="name"&&E(Bt)})}var Vt=l(yt,2),Qt=n(Vt);ne(Qt,1,()=>t(i),E=>E.id,(E,z)=>{const tt=ie(()=>(t(o),t(z),f(()=>t(o).therapistsInGroups.find(X=>X.groupId===t(z).id)))),ft=ie(()=>(Ht(t(tt)),t(o),f(()=>t(tt)?t(o).therapists.find(X=>X.id===t(tt).therapistId):null))),Mt=ie(()=>(Ht($t),t(o),t(z),f(()=>$t.getAvailableWithActiveSubscriptions(t(o),t(z).id))));var ut=Io(),wt=n(ut),Dt=n(wt);{var W=X=>{var vt=go(),pt=n(vt);L(()=>{t(y),Te(()=>{t(o)})});var At=n(pt);At.value=At.__value="";var jt=l(At);ne(jt,1,()=>(t(o),f(()=>t(o).therapists)),de,(D,P,ht,Gt)=>{var qt=xo(),Kt=n(qt),Ct={};L(()=>{_(Kt,(t(P),f(()=>t(P).name))),Ct!==(Ct=(t(P),f(()=>t(P).id)))&&(qt.value=(qt.__value=(t(P),f(()=>t(P).id)))??"")}),x(D,qt)});var bt=l(pt,2),st=l(bt,2);L(()=>{pt.dir=pt.dir,bt.dir=bt.dir,st.dir=st.dir}),Le(pt,()=>t(y),D=>p(y,D)),Jt(bt,()=>t(I),D=>p(I,D)),Jt(st,()=>t(h),D=>p(h,D)),x(X,vt)},J=X=>{var vt=bo(),pt=n(vt),At=n(pt),jt=n(At),bt=l(pt,2),st=n(bt),D=n(st),P=l(bt,2),ht=n(P),Gt=n(ht),qt=l(P,2),Kt=n(qt),Ct=n(Kt);L(()=>{ye(At,1,t(Mt)<=0?"text-red-600 font-bold":t(Mt)<=3?"text-orange-500":""),_(jt,t(Mt)),At.dir=At.dir,_(D,(Ht(t(ft)),f(()=>t(ft)?t(ft).name:"-"))),_(Gt,(t(z),f(()=>t(z).when))),_(Ct,(t(z),f(()=>t(z).name)))}),x(X,vt)};at(Dt,X=>{t(w),t(z),f(()=>t(w)===t(z).id)?X(W):X(J,!1)})}var O=l(wt,2),nt=n(O);{var gt=X=>{var vt=yo(),pt=Xt(vt),At=l(pt,2);N("click",pt,B),N("click",At,R),x(X,vt)},kt=X=>{var vt=wo(),pt=Xt(vt),At=l(pt,2),jt=l(At,2),bt=l(jt,2);N("click",pt,()=>C(t(z).id)),N("click",At,()=>U(t(z).id)),N("click",jt,()=>j(t(z))),N("click",bt,()=>et(t(z).id)),x(X,vt)};at(nt,X=>{t(w),t(z),f(()=>t(w)===t(z).id)?X(gt):X(kt,!1)})}L(()=>ye(ut,1,`flex ${t(w),t(z),f(()=>t(w)===t(z).id?"flex-row-reverse":"")??""} items-center py-2 gap-4`)),x(E,ut)});var te=l(Qt,2);{var St=E=>{var z=ko(),tt=n(z);{var ft=ut=>{var wt=Jr();L(()=>_(wt,`לא נמצאו תוצאות עבור "${t(u)??""}"`)),x(ut,wt)},Mt=ut=>{var wt=Jr("אין קבוצות");x(ut,wt)};at(tt,ut=>{t(u),f(()=>t(u).trim())?ut(ft):ut(Mt,!1)})}x(E,z)};at(te,E=>{t(i),f(()=>t(i).length===0)&&E(St)})}L(()=>{F.dir=F.dir,q.dir=q.dir,G.dir=G.dir,K.dir=K.dir,it.dir=it.dir}),N("click",T,ot),Jt(F,()=>t(u),E=>p(u,E)),Jt(q,()=>t(s),E=>p(s,E)),Jt(G,()=>t(c),E=>p(c,E)),Jt(K,()=>t(v),E=>p(v,E)),Jt(it,()=>t(d),E=>p(d,E)),N("submit",Q,Wa(A)),N("click",Tt,()=>Y("available")),N("click",lt,()=>Y("therapist")),N("click",ct,()=>Y("when")),N("click",_t,()=>Y("name")),x(e,It),ge()}var Mo=k('<span class="text-xs text-orange-600 font-medium">מנחה מחליף/ה</span>'),Ao=k("<option> <!></option>"),So=k('<p class="text-gray-500 text-center py-8">אין מטופלים רשומים לקבוצה זו</p>'),No=k('<div class="flex items-center justify-between py-3 px-4 hover:bg-gray-50 rounded"><div class="flex-1"><span class="font-medium"> </span> <span class="text-sm text-gray-500 mr-3"> </span></div> <label class="flex items-center cursor-pointer gap-2"><input type="checkbox" class="w-5 h-5 text-blue-600 rounded focus:ring-blue-500"/> <span class="text-sm text-gray-600">נוכח/ת</span></label></div>'),Eo=k('<div class="space-y-2"></div> <div class="mt-6 pt-4 border-t"><div class="text-sm text-gray-600"><span class="font-semibold">סה"כ נוכחים:</span> <span class="mr-2"> </span></div></div>',1),Po=k('<div class="flex items-center justify-between py-3 px-4 hover:bg-gray-50 rounded border border-gray-100"><div class="flex-1"><span class="font-medium"> </span> <span class="text-sm text-gray-500 mr-3"> </span></div> <label class="flex items-center cursor-pointer gap-2"><input type="checkbox" class="w-5 h-5 text-blue-600 rounded focus:ring-blue-500"/> <span class="text-sm text-gray-600">נוכח/ת</span></label></div>'),Co=k('<div class="space-y-2 mb-4"></div>'),Go=k('<p class="text-gray-500 text-center py-4 text-sm">לא נמצאו מטופלים התואמים לחיפוש</p>'),Do=k('<div class="flex items-center justify-between py-2 px-3 bg-blue-50 rounded"><div class="flex-1"><span class="font-medium text-sm"> </span> <span class="text-xs text-gray-500 mr-3"> </span></div> <button class="text-red-600 hover:text-red-700 text-xs font-medium">הסר</button></div>'),jo=k('<div class="border-t pt-4 mt-4"><h4 class="text-sm font-semibold text-gray-700 mb-2 text-right">מטופלים בהשלמה</h4> <div class="space-y-2"></div></div>'),To=k('<div class="bg-white rounded-lg shadow p-4"><div class="flex justify-between items-center mb-4"><button class="text-blue-600 hover:underline text-sm">חזרה לרשימה</button> <h2 class="text-lg font-semibold"> </h2></div> <div class="space-y-3 mb-4"><div class="flex items-center gap-4 justify-end"><div class="text-sm text-gray-600" dir="rtl"> </div> <input id="date" type="date" class="border rounded px-3 py-2"/> <label for="date" class="text-sm text-gray-600">תאריך:</label></div> <div class="flex items-center gap-4 justify-end"><!> <select id="therapist" class="border rounded px-3 py-2 min-w-[200px] text-right" dir="rtl"><option disabled>בחר/י מנחה</option><!></select> <label for="therapist" class="text-sm text-gray-600">מנחה:</label></div></div></div> <div class="bg-white rounded-lg shadow p-4"><div class="flex justify-between items-center mb-4"><button class="text-blue-600 hover:text-blue-700 text-sm font-medium">ייצוא</button> <h3 class="text-base font-semibold">רשימת מטופלים</h3></div> <!></div> <div class="bg-white rounded-lg shadow p-4"><div class="mb-4"><h3 class="text-base font-semibold text-right">השלמות</h3></div> <div class="mb-3"><input type="text" class="w-full border rounded-full px-4 py-2 text-sm" style="text-align: right;" placeholder="חיפוש מטופל להשלמה..." dir="rtl"/></div> <!> <!> <div class="mt-4 pt-4 border-t"><div class="text-sm text-gray-600 space-y-1"><div><span class="font-semibold">סה"כ השלמות:</span> <span class="mr-2"> </span></div> <div class="text-xs text-gray-500"><span class="font-semibold">סה"כ כללי:</span> <span class="mr-2"> </span></div></div></div></div>',1),Lo=k('<div class="bg-white rounded-lg shadow p-8"><p class="text-center text-gray-500">קבוצה לא נמצאה</p> <div class="text-center mt-4"><button class="text-blue-600 hover:underline text-sm">חזרה לרשימה</button></div></div>'),Bo=k('<section class="space-y-6"><!></section>');function Fo(e,r){xe(r,!1);const a=()=>cr(pr,"$route",i),[i,o]=ur(),s=b(),d=b(),v=b(),c=b(),u=b(),w=b(),h=b(),I=b(),y=b();let m=b(Ut()),g=b(new Date().toISOString().split("T")[0]),A=b(""),j=b("");function R(H,rt=!1){if(!t(s)||!t(g)||!t(A)){t(A)||alert("נא לבחור מנחה");return}t(u).has(H)?$t.unmarkAttendance(t(m),t(s),H,t(g)):$t.markAttendance(t(m),t(s),H,t(A),t(g),rt),p(m,Ut())}function B(){ae("groupsList")}function et(H){return new Date(H).toLocaleDateString("he-IL",{year:"numeric",month:"long",day:"numeric"})}function U(){if(!t(d))return;const rt=Array.from(t(u)).map(S=>{const F=t(m).patients.find($=>$.id===S),Q=t(v).some($=>$.patientId===S);return F?{"שם פרטי":F.firstName,"שם משפחה":F.lastName,"ת.ז.":F.nationalId,טלפון:F.phone,סוג:Q?"רגיל":"השלמה",נוכח:"כן",תאריך:t(g),קבוצה:t(d).name}:null}).filter(Boolean),T=t(v).filter(S=>!t(u).has(S.patientId)).map(S=>{const F=t(m).patients.find(Q=>Q.id===S.patientId);return F?{"שם פרטי":F.firstName,"שם משפחה":F.lastName,"ת.ז.":F.nationalId,טלפון:F.phone,סוג:"רגיל",נוכח:"לא",תאריך:t(g),קבוצה:t(d).name}:null}).filter(Boolean);fr([...rt,...T],`attendance_${t(d).name}_${t(g)}`)}Z(()=>a(),()=>{p(s,a().segments[0]||null)}),Z(()=>(t(s),t(m)),()=>{p(d,t(s)?t(m).groups.find(H=>H.id===t(s)):null)}),Z(()=>(t(s),t(m)),()=>{p(v,t(s)?$t.getPatientsWithActiveSubscriptions(t(m),t(s)):[])}),Z(()=>(t(s),t(m)),()=>{p(c,t(s)&&t(m).therapistsInGroups.find(H=>H.groupId===t(s))?.therapistId||"")}),Z(()=>(t(c),t(A)),()=>{t(c)&&!t(A)&&p(A,t(c))}),Z(()=>(t(s),t(g),t(m)),()=>{p(u,t(s)&&t(g)?$t.getAttendanceForGroupAndDate(t(m),t(s),t(g)):new Set)}),Z(()=>(t(j),t(v),t(m)),()=>{p(w,(()=>{if(!t(j).trim())return[];const H=t(j).trim().toLowerCase(),rt=new Set(t(v).map(T=>T.patientId));return t(m).patients.filter(T=>rt.has(T.id)?!1:[T.firstName||"",T.lastName||"",T.nationalId||"",T.phone||""].join(" ").toLowerCase().includes(H))})())}),Z(()=>t(u),()=>{p(h,t(u).size)}),Z(()=>(t(v),t(u)),()=>{p(I,t(v).filter(H=>t(u).has(H.patientId)).length)}),Z(()=>(t(h),t(I)),()=>{p(y,t(h)-t(I))}),Ce(),Ae();var C=Bo(),Y=n(C);{var ot=H=>{var rt=To(),T=Xt(rt),S=n(T),F=n(S),Q=l(F,2),$=n(Q),q=l(S,2),G=n(q),K=n(G),it=n(K),mt=l(K,2),yt=l(G,2),xt=n(yt);{var Tt=O=>{var nt=Mo();x(O,nt)};at(xt,O=>{t(A)!==t(c)&&t(A)!==""&&O(Tt)})}var Pt=l(xt,2);L(()=>{t(A),Te(()=>{t(m),t(c)})});var dt=n(Pt);dt.value=dt.__value="";var lt=l(dt);ne(lt,1,()=>(t(m),f(()=>t(m).therapists)),de,(O,nt)=>{var gt=Ao(),kt=n(gt),X=l(kt);{var vt=At=>{var jt=Jr("(מנחה קבוע/ה)");x(At,jt)};at(X,At=>{t(nt),t(c),f(()=>t(nt).id===t(c))&&At(vt)})}var pt={};L(()=>{_(kt,`${t(nt),f(()=>t(nt).name)??""} `),pt!==(pt=(t(nt),f(()=>t(nt).id)))&&(gt.value=(gt.__value=(t(nt),f(()=>t(nt).id)))??"")}),x(O,gt)});var M=l(T,2),V=n(M),ct=n(V),Ft=l(V,2);{var Ot=O=>{var nt=So();x(O,nt)},_t=O=>{var nt=Eo(),gt=Xt(nt);ne(gt,5,()=>t(v),At=>At.id,(At,jt)=>{const bt=ie(()=>(t(m),t(jt),f(()=>t(m).patients.find(ht=>ht.id===t(jt).patientId))));var st=We(),D=Xt(st);{var P=ht=>{var Gt=No(),qt=n(Gt),Kt=n(qt),Ct=n(Kt),Et=l(Kt,2),Lt=n(Et),ee=l(qt,2),ve=n(ee);L(he=>{_(Ct,`${Ht(t(bt)),f(()=>t(bt).firstName)??""} ${Ht(t(bt)),f(()=>t(bt).lastName)??""}`),_(Lt,`ת.ז. ${Ht(t(bt)),f(()=>t(bt).nationalId)??""}`),sn(ve,he)},[()=>(t(u),Ht(t(bt)),f(()=>t(u).has(t(bt).id)))]),N("change",ve,()=>R(t(bt).id,!1)),x(ht,Gt)};at(D,ht=>{t(bt)&&ht(P)})}x(At,st)});var kt=l(gt,2),X=n(kt),vt=l(n(X),2),pt=n(vt);L(()=>_(pt,`${t(I)??""} מתוך ${t(v),f(()=>t(v).length)??""}`)),x(O,nt)};at(Ft,O=>{t(v),f(()=>t(v).length===0)?O(Ot):O(_t,!1)})}var Nt=l(M,2),Bt=l(n(Nt),2),Vt=n(Bt),Qt=l(Bt,2);{var te=O=>{var nt=Co();ne(nt,5,()=>t(w),gt=>gt.id,(gt,kt)=>{var X=Po(),vt=n(X),pt=n(vt),At=n(pt),jt=l(pt,2),bt=n(jt),st=l(vt,2),D=n(st);L(P=>{_(At,`${t(kt),f(()=>t(kt).firstName)??""} ${t(kt),f(()=>t(kt).lastName)??""}`),_(bt,`ת.ז. ${t(kt),f(()=>t(kt).nationalId)??""}`),sn(D,P)},[()=>(t(u),t(kt),f(()=>t(u).has(t(kt).id)))]),N("change",D,()=>R(t(kt).id,!0)),x(gt,X)}),x(O,nt)},St=O=>{var nt=We(),gt=Xt(nt);{var kt=X=>{var vt=Go();x(X,vt)};at(gt,X=>{t(j),t(w),f(()=>t(j).trim()&&t(w).length===0)&&X(kt)},!0)}x(O,nt)};at(Qt,O=>{t(j),t(w),f(()=>t(j).trim()&&t(w).length>0)?O(te):O(St,!1)})}var E=l(Qt,2);{var z=O=>{var nt=jo(),gt=l(n(nt),2);ne(gt,5,()=>(t(u),f(()=>Array.from(t(u)))),de,(kt,X)=>{var vt=We(),pt=Xt(vt);{var At=jt=>{const bt=ie(()=>(t(m),t(X),f(()=>t(m).patients.find(ht=>ht.id===t(X)))));var st=We(),D=Xt(st);{var P=ht=>{var Gt=Do(),qt=n(Gt),Kt=n(qt),Ct=n(Kt),Et=l(Kt,2),Lt=n(Et),ee=l(qt,2);L(()=>{_(Ct,`${Ht(t(bt)),f(()=>t(bt).firstName)??""} ${Ht(t(bt)),f(()=>t(bt).lastName)??""}`),_(Lt,`ת.ז. ${Ht(t(bt)),f(()=>t(bt).nationalId)??""}`)}),N("click",ee,()=>R(t(bt).id,!0)),x(ht,Gt)};at(D,ht=>{t(bt)&&ht(P)})}x(jt,st)};at(pt,jt=>{t(v),t(X),f(()=>!t(v).some(bt=>bt.patientId===t(X)))&&jt(At)})}x(kt,vt)}),x(O,nt)};at(E,O=>{t(y)>0&&O(z)})}var tt=l(E,2),ft=n(tt),Mt=n(ft),ut=l(n(Mt),2),wt=n(ut),Dt=l(Mt,2),W=l(n(Dt),2),J=n(W);L(O=>{_($,`נוכחות - ${t(d),f(()=>t(d).name)??""}`),_(it,O),K.dir=K.dir,Pt.dir=Pt.dir,Vt.dir=Vt.dir,_(wt,t(y)),_(J,`${t(h)??""} נוכחים`)},[()=>(t(g),f(()=>et(t(g))))]),N("click",F,B),Jt(mt,()=>t(g),O=>p(g,O)),N("change",mt,()=>p(m,Ut())),Le(Pt,()=>t(A),O=>p(A,O)),N("click",ct,U),Jt(Vt,()=>t(j),O=>p(j,O)),x(H,rt)},It=H=>{var rt=Lo(),T=l(n(rt),2),S=n(T);N("click",S,B),x(H,rt)};at(Y,H=>{t(d)?H(ot):H(It,!1)})}x(e,C),ge(),o()}var Oo=k('<p class="text-center text-gray-500 py-8">אין מטופלים ממתינים</p>'),Yo=k('<span class="text-xs"> </span>'),Ro=k('<span class="text-xs"> </span>'),zo=k('<span class="text-xs"> </span>'),Vo=ta('<svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>'),Ho=k('<div class="flex items-center gap-4 py-2"><div class="text-sm text-gray-600 text-center" style="width: 120px;"> </div> <div class="text-sm text-center" style="width: 50px;"><span> </span></div> <div class="text-sm font-medium text-right" style="width: 120px;"> </div> <div class="flex-1 min-w-0"><div class="text-gray-900 text-left px-2"><span class="font-medium"> </span> <span class="text-gray-600 text-sm mr-3"> </span> <span class="text-gray-600 text-sm"> </span></div></div> <div class="flex gap-1" style="min-width: 80px;"><button class="text-green-600 hover:text-green-700 p-1" title="רישום תשלום" aria-label="רישום תשלום"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button> <button class="text-red-600 hover:text-red-700 p-1" title="הסר מרשימת המתנה" aria-label="הסר מרשימת המתנה"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div>'),Wo=k('<div class="flex items-center gap-4 py-2 border-b mb-2"><div class="text-gray-700 font-semibold text-sm px-2" style="width: 120px;"><button class="hover:bg-gray-50 px-1 py-1 rounded cursor-pointer">בהמתנה מ <!></button></div> <div class="text-gray-700 font-semibold text-sm px-2" style="width: 50px;"><button class="hover:bg-gray-50 px-1 py-1 rounded cursor-pointer">פנוי <!></button></div> <div class="text-gray-700 font-semibold text-sm text-right" style="width: 120px;"><button class="hover:bg-gray-50 px-1 py-1 rounded cursor-pointer text-right w-full">קבוצה <!></button></div> <div class="flex-1 min-w-0"><button class="py-1 px-2 inline-flex items-center"><span class="text-gray-700 font-semibold text-sm">פרטי מטופל</span> <!></button></div> <div class="flex gap-1 min-w-[80px] justify-end"></div></div> <div class="space-y-2"></div> <div class="mt-4 pt-4 border-t"><div class="text-sm font-medium text-gray-700 text-center"> </div></div>',1),Uo=k('<section class="space-y-6"><div class="bg-white rounded-lg shadow p-4"><div class="flex justify-between items-center mb-4"><div class="flex gap-3"><button class="text-blue-600 hover:underline text-sm">רענן</button> <button class="text-green-600 hover:underline text-sm">ייצוא ל-CSV</button></div> <h2 class="text-xl font-semibold">ממתינים</h2></div> <!></div></section>');function qo(e,r){xe(r,!1);const a=b();let i=b(Ut()),o=b(null),s=b("asc");function d(){const et=[];for(const U of t(i).patientsInGroups)if(U.enrolled===0){const C=t(i).groups.find(ot=>ot.id===U.groupId),Y=t(i).patients.find(ot=>ot.id===U.patientId);if(C&&Y){const ot=$t.getAvailableWithActiveSubscriptions(t(i),C.id);et.push({groupId:C.id,patientId:Y.id,patient:Y,pig:U,groupName:C.name,available:ot,createdAt:U.createdAt})}}return t(o)?et.sort((U,C)=>{let Y,ot;switch(t(o)){case"name":Y=`${U.patient.lastName} ${U.patient.firstName}`.toLowerCase(),ot=`${C.patient.lastName} ${C.patient.firstName}`.toLowerCase();break;case"group":Y=U.groupName.toLowerCase(),ot=C.groupName.toLowerCase();break;case"available":Y=U.available,ot=C.available;break;case"date":Y=U.createdAt,ot=C.createdAt;break;default:return 0}return Y<ot?t(s)==="asc"?-1:1:Y>ot?t(s)==="asc"?1:-1:0}):et.sort((U,C)=>C.createdAt-U.createdAt),et}function v(et){t(o)===et?p(s,t(s)==="asc"?"desc":"asc"):(p(o,et),p(s,"asc"))}function c(et,U,C){confirm(`להסיר את ${C} מרשימת המתנה?`)&&($t.removePatientFromGroup(t(i),et,U),p(i,Ut()))}function u(){p(i,Ut())}function w(){const et=["שם קבוצה","מקומות פנויים","שם מטופל","תאריך הצטרפות לרשימת המתנה"],U=t(a).map(rt=>[rt.groupName,rt.available.toString(),rt.patientName,new Date(rt.createdAt).toLocaleDateString("he-IL")]),Y="\uFEFF"+[et.join(","),...U.map(rt=>rt.map(T=>`"${T}"`).join(","))].join(`
`),ot=new Blob([Y],{type:"text/csv;charset=utf-8;"}),It=document.createElement("a"),H=URL.createObjectURL(ot);It.setAttribute("href",H),It.setAttribute("download",`waitlist_${new Date().toISOString().split("T")[0]}.csv`),It.style.visibility="hidden",document.body.appendChild(It),It.click(),document.body.removeChild(It)}Z(()=>(t(i),t(o),t(s)),()=>{p(a,(t(i),t(o),t(s),d()))}),Ce(),Ae();var h=Uo(),I=n(h),y=n(I),m=n(y),g=n(m),A=l(g,2),j=l(y,2);{var R=et=>{var U=Oo();x(et,U)},B=et=>{var U=Wo(),C=Xt(U),Y=n(C),ot=n(Y),It=l(n(ot));{var H=lt=>{var M=Yo(),V=n(M);L(()=>_(V,t(s)==="asc"?"↑":"↓")),x(lt,M)};at(It,lt=>{t(o)==="date"&&lt(H)})}var rt=l(Y,2),T=n(rt),S=l(n(T));{var F=lt=>{var M=Ro(),V=n(M);L(()=>_(V,t(s)==="asc"?"↑":"↓")),x(lt,M)};at(S,lt=>{t(o)==="available"&&lt(F)})}var Q=l(rt,2),$=n(Q),q=l(n($));{var G=lt=>{var M=zo(),V=n(M);L(()=>_(V,t(s)==="asc"?"↑":"↓")),x(lt,M)};at(q,lt=>{t(o)==="group"&&lt(G)})}var K=l(Q,2),it=n(K),mt=l(n(it),2);{var yt=lt=>{var M=Vo(),V=n(M);L(()=>mr(V,"d",t(s)==="asc"?"M5 15l7-7 7 7":"M19 9l-7 7-7-7")),x(lt,M)};at(mt,lt=>{t(o)==="name"&&lt(yt)})}var xt=l(C,2);ne(xt,5,()=>t(a),de,(lt,M)=>{var V=Ho(),ct=n(V),Ft=n(ct),Ot=l(ct,2),_t=n(Ot);let Nt;var Bt=n(_t),Vt=l(Ot,2),Qt=n(Vt),te=l(Vt,2),St=n(te),E=n(St),z=n(E),tt=l(E,2),ft=n(tt),Mt=l(tt,2),ut=n(Mt),wt=l(te,2),Dt=n(wt),W=l(Dt,2);L(J=>{_(Ft,J),Nt=ye(_t,1,"font-semibold",null,Nt,{"text-red-600":t(M).available<=0,"text-orange-500":t(M).available>0&&t(M).available<=3,"text-green-600":t(M).available>3}),_(Bt,(t(M),f(()=>t(M).available))),_(Qt,(t(M),f(()=>t(M).groupName))),_(z,`${t(M),f(()=>t(M).patient.firstName)??""} ${t(M),f(()=>t(M).patient.lastName)??""}`),_(ft,`ת.ז. ${t(M),f(()=>t(M).patient.nationalId)??""}`),_(ut,`טל. ${t(M),f(()=>t(M).patient.phone)??""}`)},[()=>(t(M),f(()=>new Date(t(M).createdAt).toLocaleDateString("he-IL",{day:"2-digit",month:"2-digit",year:"2-digit"})))]),N("click",Dt,()=>ae(`/registration/${t(M).patientId}/${t(M).groupId}`)),N("click",W,()=>c(t(M).groupId,t(M).patientId,`${t(M).patient.firstName} ${t(M).patient.lastName}`)),x(lt,V)});var Tt=l(xt,2),Pt=n(Tt),dt=n(Pt);L(()=>_(dt,`סה"כ ממתינים: ${t(a),f(()=>t(a).length)??""}`)),N("click",ot,()=>v("date")),N("click",T,()=>v("available")),N("click",$,()=>v("group")),N("click",it,()=>v("name")),x(et,U)};at(j,et=>{t(a),f(()=>t(a).length===0)?et(R):et(B,!1)})}N("click",g,u),N("click",A,w),x(e,h),ge()}var Jo=k('<div class="bg-white rounded-lg shadow p-6"><div class="grid grid-cols-2 gap-4 max-w-md mx-auto"><div><label class="block text-sm font-medium text-gray-700 mb-2 text-right" for="year-input">שנה</label> <input id="year-input" type="number" min="2020" max="2030" class="w-full px-3 py-2 border border-gray-300 rounded-md text-right" placeholder="2025"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-2 text-right" for="month-select">חודש</label> <select id="month-select" class="w-full px-3 py-2 border border-gray-300 rounded-md text-right"><option>ינואר</option><option>פברואר</option><option>מרץ</option><option>אפריל</option><option>מאי</option><option>יוני</option><option>יולי</option><option>אוגוסט</option><option>ספטמבר</option><option>אוקטובר</option><option>נובמבר</option><option>דצמבר</option></select></div></div> <div class="mt-6 text-center"><button class="big-blue-button mx-auto">הצג דוח</button></div></div>'),Ko=k('<p class="text-center text-gray-500 py-8">אין נתוני נוכחות לחודש זה</p>'),Qo=k('<tr class="border-b border-gray-100 hover:bg-gray-50"><td class="p-2 text-right"> </td><td class="p-2 text-right"> </td><td class="p-2 text-right"> </td><td class="p-2 text-right"> </td><td class="p-2 text-right"> </td></tr>'),Xo=k('<div class="overflow-x-auto"><table class="w-full border-collapse"><thead><tr class="border-b border-gray-200"><th class="text-right p-2 font-medium">שם מטופל</th><th class="text-right p-2 font-medium">ת.ז.</th><th class="text-right p-2 font-medium">תאריך נוכחות</th><th class="text-right p-2 font-medium">קבלה</th><th class="text-right p-2 font-medium">מנחה</th></tr></thead><tbody></tbody></table></div>'),Zo=k('<p class="text-gray-500 text-center py-4">אין נתוני נוכחות לקבוצה זו</p>'),tl=k('<div class="mb-8 border-b border-gray-200 pb-6 last:border-b-0"><div class="mb-4 text-right"><h3 class="text-lg font-semibold"> <span class="mx-4"> </span> <span> </span></h3></div> <!></div>'),el=k('<div class="mb-4 flex gap-2 justify-end print:hidden"><button class="big-gray-button">חזור</button> <button class="big-green-button">ייצא ל-CSV</button> <button class="big-blue-button">הדפס</button></div> <div class="bg-white rounded-lg shadow p-6"><h2 class="text-xl font-bold mb-4 text-center"> </h2> <!></div>',1),rl=k('<div class="mx-auto max-w-7xl"><h1 class="text-2xl font-bold mb-6 text-right">ריכוז חודשי לקבוצות</h1> <!></div>');function al(e,r){xe(r,!1);let a=Ut(),i=b(""),o=b(""),s=b([]),d=b(!1);const v=new Date,c=(v.getMonth()+1).toString().padStart(2,"0"),u=v.getFullYear().toString();p(i,c),p(o,u);function w(R){return["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"][parseInt(R)-1]||""}function h(){if(!t(i)||!t(o)){alert("נא לבחור חודש ושנה");return}a=Ut(),p(s,[]);const R=`${t(o)}-${t(i)}-01`,B=`${t(o)}-${t(i)}-31`,et=a.attendance.filter(C=>C.date>=R&&C.date<=B&&!C.isMakeup),U=new Map;et.forEach(C=>{U.has(C.groupId)||U.set(C.groupId,[]),U.get(C.groupId).push(C)}),U.forEach((C,Y)=>{const ot=a.groups.find(S=>S.id===Y);if(!ot)return;const It=a.therapistsInGroups.find(S=>S.groupId===Y),rt=(It?a.therapists.find(S=>S.id===It.therapistId):null)?.name||"לא הוקצה",T=[];C.forEach(S=>{const F=a.patients.find(xt=>xt.id===S.patientId);if(!F)return;const $=a.patientsInGroups.find(xt=>xt.patientId===S.patientId&&xt.groupId===Y)?.receipt||"",G=a.therapists.find(xt=>xt.id===S.therapistId)?.name||"",[K,it,mt]=S.date.split("-"),yt=`${mt}/${it}/${K}`;T.push({patientName:`${F.firstName} ${F.lastName}`,patientId:F.nationalId,date:yt,receipt:$,therapistName:G})}),T.sort((S,F)=>{const Q=S.date.localeCompare(F.date);return Q!==0?Q:S.patientName.localeCompare(F.patientName)}),t(s).push({group:ot,therapistName:rt,attendance:T})}),t(s).sort((C,Y)=>C.group.name.localeCompare(Y.group.name)),p(d,!0)}function I(){if(t(s).length===0){alert("אין נתונים לייצוא");return}let R="\uFEFF";R+=`ריכוז חודשי לקבוצות לחודש ${w(t(i))} ${t(o)}

`,t(s).forEach(C=>{R+=`
קבוצה: ${C.group.name}
`,R+=`מנחה: ${C.therapistName}
`,R+=`יום: ${C.group.when}

`,R+=`שם מטופל,ת.ז.,תאריך נוכחות,קבלה,מנחה
`,C.attendance.forEach(Y=>{R+=`"${Y.patientName}","${Y.patientId}","${Y.date}","${Y.receipt}","${Y.therapistName}"
`})});const B=new Blob([R],{type:"text/csv;charset=utf-8;"}),et=document.createElement("a"),U=URL.createObjectURL(B);et.setAttribute("href",U),et.setAttribute("download",`monthly_report_${t(i)}_${t(o)}.csv`),et.style.visibility="hidden",document.body.appendChild(et),et.click(),document.body.removeChild(et)}function y(){window.print()}Ae();var m=rl(),g=l(n(m),2);{var A=R=>{var B=Jo(),et=n(B),U=n(et),C=l(n(U),2),Y=l(U,2),ot=l(n(Y),2);L(()=>{t(i),Te(()=>{})});var It=n(ot);It.value=It.__value="01";var H=l(It);H.value=H.__value="02";var rt=l(H);rt.value=rt.__value="03";var T=l(rt);T.value=T.__value="04";var S=l(T);S.value=S.__value="05";var F=l(S);F.value=F.__value="06";var Q=l(F);Q.value=Q.__value="07";var $=l(Q);$.value=$.__value="08";var q=l($);q.value=q.__value="09";var G=l(q);G.value=G.__value="10";var K=l(G);K.value=K.__value="11";var it=l(K);it.value=it.__value="12";var mt=l(et,2),yt=n(mt);Jt(C,()=>t(o),xt=>p(o,xt)),Le(ot,()=>t(i),xt=>p(i,xt)),N("click",yt,h),x(R,B)},j=R=>{var B=el(),et=Xt(B),U=n(et),C=l(U,2),Y=l(C,2),ot=l(et,2),It=n(ot),H=n(It),rt=l(It,2);{var T=F=>{var Q=Ko();x(F,Q)},S=F=>{var Q=We(),$=Xt(Q);ne($,1,()=>t(s),de,(q,G)=>{var K=tl(),it=n(K),mt=n(it),yt=n(mt),xt=l(yt),Tt=n(xt),Pt=l(xt,2),dt=n(Pt),lt=l(it,2);{var M=ct=>{var Ft=Xo(),Ot=n(Ft),_t=l(n(Ot));ne(_t,5,()=>t(G).attendance,de,(Nt,Bt)=>{var Vt=Qo(),Qt=n(Vt),te=n(Qt),St=l(Qt),E=n(St),z=l(St),tt=n(z),ft=l(z),Mt=n(ft),ut=l(ft),wt=n(ut);L(()=>{_(te,t(Bt).patientName),_(E,t(Bt).patientId),_(tt,t(Bt).date),_(Mt,t(Bt).receipt),_(wt,t(Bt).therapistName)}),x(Nt,Vt)}),x(ct,Ft)},V=ct=>{var Ft=Zo();x(ct,Ft)};at(lt,ct=>{t(G).attendance.length>0?ct(M):ct(V,!1)})}L(()=>{_(yt,`קבוצה: ${t(G).group.name??""} `),_(Tt,`מנחה: ${t(G).therapistName??""}`),_(dt,`יום: ${t(G).group.when??""}`)}),x(q,K)}),x(F,Q)};at(rt,F=>{t(s).length===0?F(T):F(S,!1)})}L(F=>_(H,`ריכוז חודשי לקבוצות לחודש ${F??""} ${t(o)??""}`),[()=>w(t(i))]),N("click",U,()=>{p(d,!1)}),N("click",C,I),N("click",Y,y),x(R,B)};at(g,R=>{t(d)?R(j,!1):R(A)})}x(e,m),ge()}var nl=k('<div class="bg-white rounded-lg shadow p-4"><p class="text-center text-gray-500 py-8">מטופל לא נמצא</p></div>'),sl=k("<option> </option>"),il=k("<option> </option>"),ol=k("<option> </option>"),ll=k("<option> </option>"),dl=k("<option> </option>"),vl=k('<div class="text-sm text-orange-600"> </div>'),cl=k('<div class="text-sm font-medium text-blue-600"> </div>'),ul=k('<div class="text-right"><h3 class="text-sm font-medium text-gray-600 mb-2">פרטי קבוצה</h3> <div class="space-y-1"><div><span class="font-medium"> </span></div> <div class="text-sm text-gray-600"> </div> <div class="text-sm text-gray-600"> </div> <div class="text-sm text-gray-600"><span dir="ltr" style="display: inline-block;"> </span> :מקומות פנויים</div> <!> <!></div></div>'),pl=k('<div class="flex justify-center pt-4 border-t"><button class="big-green-button"> </button></div>'),fl=k('<div class="flex justify-center pt-4 border-t"><div class="text-green-600 font-medium">✓ התשלום נרשם בהצלחה - מעבר להיסטוריית תשלומים...</div></div>'),hl=k('<div class="bg-white rounded-lg shadow p-4 space-y-4"><div class="flex flex-row-reverse items-center gap-3"><label class="text-sm text-gray-600 whitespace-nowrap" for="group-select">קבוצה</label> <select id="group-select" style="text-align: right;" dir="rtl"><option disabled>בחר/י קבוצה</option><!></select> <label class="text-sm text-gray-600 whitespace-nowrap ml-3">תקופה</label> <div class="flex flex-row-reverse items-center gap-2"><span class="text-xs text-gray-500">:מ</span> <select class="border rounded px-2 h-10" dir="rtl" aria-label="שנת התחלה"></select> <select class="border rounded px-2 h-10" dir="rtl" aria-label="חודש התחלה"></select> <span class="text-xs text-gray-500">:עד</span> <select class="border rounded px-2 h-10" dir="rtl" aria-label="שנת סיום"></select> <select class="border rounded px-2 h-10" dir="rtl" aria-label="חודש סיום"></select></div></div> <div class="grid grid-cols-2 gap-4 p-4 bg-gray-50 rounded"><div class="text-right"><h3 class="text-sm font-medium text-gray-600 mb-2">פרטי מטופל</h3> <div class="space-y-1"><div><span class="font-medium"> </span></div> <div class="text-sm text-gray-600"> </div> <div class="text-sm text-gray-600"> </div></div></div> <!></div> <div><label class="text-sm text-gray-600 whitespace-nowrap" for="amount-input">סכום</label> <input id="amount-input" type="number" style="text-align: right; width: 100px;" dir="rtl"/> <label class="text-sm text-gray-600 whitespace-nowrap" for="payment-method">אופן תשלום</label> <select id="payment-method" style="text-align: right; width: 100px;" dir="rtl"><option>א - אשראי</option><option>ת - מזומן</option><option>ה - הרשאה</option></select> <label class="text-sm text-gray-600 whitespace-nowrap" for="receipt-number">מספר קבלה</label> <input id="receipt-number" type="text" style="text-align: right; width: 150px;" dir="rtl"/> <label class="text-sm text-gray-600 whitespace-nowrap" for="payment-date">תאריך תשלום</label> <input id="payment-date" type="date"/></div> <!></div>'),_l=k('<section class="space-y-6"><div class="bg-white rounded-lg shadow p-4"><div class="flex justify-between items-center mb-4"><button class="text-blue-600 hover:underline text-sm"> </button> <h2 class="text-lg font-semibold">רישום תשלום</h2></div></div> <!></section>');function ml(e,r){xe(r,!1);const a=()=>cr(pr,"$route",i),[i,o]=ur(),s=b(),d=b(),v=b(),c=b(),u=b(),w=b(),h=b(),I=b(),y=b(),m=b(),g=b(),A=b();let j=b(Ut()),R=b(0),B=b(""),et=b(String(new Date().getMonth()+1).padStart(2,"0")),U=b(new Date().getFullYear()),C=b(String(new Date().getMonth()+1).padStart(2,"0")),Y=b(new Date().getFullYear()),ot=b(0),It=b("ק"),H=b(""),rt=b(new Date().toISOString().split("T")[0]),T=b(!1);const S=[{value:"01",label:"ינואר"},{value:"02",label:"פברואר"},{value:"03",label:"מרץ"},{value:"04",label:"אפריל"},{value:"05",label:"מאי"},{value:"06",label:"יוני"},{value:"07",label:"יולי"},{value:"08",label:"אוגוסט"},{value:"09",label:"ספטמבר"},{value:"10",label:"אוקטובר"},{value:"11",label:"נובמבר"},{value:"12",label:"דצמבר"}],F=new Date().getFullYear(),Q=Array.from({length:4},(dt,lt)=>F-2+lt);function $(){if(!t(s)||!t(B)){alert("נא לבחור מטופל וקבוצה");return}const dt=t(j).patientsInGroups.find(Ot=>Ot.patientId===t(s)&&Ot.groupId===t(B)),lt=$t.hasActiveSubscription(t(j),t(s),t(B));let M=!1;if(t(ot)!==null&&t(ot)!==void 0&&t(ot)>=0&&t(H)){const[Ot,_t,Nt]=t(rt).split("-"),Bt=`${Nt}/${_t}/${Ot}`;$t.addPayment(t(j),{patientId:t(s),groupId:t(B),fromMonth:`${t(et)}/${t(U)}`,toMonth:`${t(C)}/${t(Y)}`,paymentDate:Bt,amount:t(ot),paymentMethod:t(It),receiptNumber:t(H)}),M=!0,dt&&$t.updatePatientReceipt(t(j),t(B),t(s),t(H))}const V=$t.getAvailableWithActiveSubscriptions(t(j),t(B))>0;if(!dt&&V&&!M){alert("נא למלא את כל פרטי התשלום");return}dt?dt&&!lt&&M&&dt.enrolled===0&&(dt.enrolled=1,dt.updatedAt=Date.now(),le(t(j))):$t.addPatientToGroup(t(j),t(B),t(s),t(H)||""),p(j,Ut()),zs(R);const ct=t(j).groups.find(Ot=>Ot.id===t(B));!dt&&ct&&ct.available>=0&&ct&&ct.available>0?alert("התשלום והרישום נרשמו בהצלחה"):!dt&&ct&&ct.available===0?alert("נרשם בהצלחה - הקבוצה התמלאה"):alert(dt?"התשלום נרשם בהצלחה":"המטופל נוסף לרשימת המתנה"),p(T,!0),p(ot,0),p(H,""),p(rt,new Date().toISOString().split("T")[0]),setTimeout(()=>{ae(`/history/${t(s)}`)},1500)}function q(){t(d)?ae("/waitlist"):ae("/patients")}Z(()=>a(),()=>{p(s,a().segments[0]||null)}),Z(()=>a(),()=>{p(d,a().segments[1]||null)}),Z(()=>(t(s),t(j)),()=>{p(v,t(s)?t(j).patients.find(dt=>dt.id===t(s)):null)}),Z(()=>(t(d),t(B)),()=>{t(d)&&!t(B)&&p(B,t(d))}),Z(()=>(t(B),t(R),t(j)),()=>{p(c,t(B)&&t(R)>=0?t(j).groups.find(dt=>dt.id===t(B)):null)}),Z(()=>(t(B),t(R),t(j)),()=>{p(u,t(B)&&t(R)>=0?$t.getActiveSubscriptionCount(t(j),t(B)):0)}),Z(()=>(t(B),t(R),t(j)),()=>{p(w,t(B)&&t(R)>=0?t(j).patientsInGroups.filter(dt=>dt.groupId===t(B)&&dt.enrolled===0).length:0)}),Z(()=>(t(B),t(R),t(j)),()=>{p(h,t(B)&&t(R)>=0?$t.getAvailableWithActiveSubscriptions(t(j),t(B)):0)}),Z(()=>(t(B),t(j)),()=>{p(I,t(B)?t(j).patientsInGroups.filter(dt=>dt.groupId===t(B)&&dt.enrolled===1).length:0)}),Z(()=>(t(c),t(I)),()=>{p(y,t(c)?t(c).capacity-t(I):0)}),Z(()=>(t(c),t(h),t(y),t(I),t(u)),()=>{t(c)&&t(h)!==t(y)&&console.warn("Available count mismatch!",{activeSubscriptionBased:t(h),rawEnrollmentBased:t(y),capacity:t(c).capacity,enrolled:t(I),activeCount:t(u)})}),Z(()=>(t(s),t(B),t(j)),()=>{p(m,t(s)&&t(B)?t(j).patientsInGroups.find(dt=>dt.groupId===t(B)&&dt.patientId===t(s)):null)}),Z(()=>(t(s),t(B),t(j)),()=>{p(g,t(s)&&t(B)?$t.hasActiveSubscription(t(j),t(s),t(B)):!1)}),Z(()=>t(d),()=>{p(A,t(d)?"חזרה לממתינים":"חזרה למטופלים")}),Ce(),Ae();var G=_l(),K=n(G),it=n(K),mt=n(it),yt=n(mt),xt=l(K,2);{var Tt=dt=>{var lt=nl();x(dt,lt)},Pt=dt=>{var lt=hl(),M=n(lt),V=l(n(M),2);L(()=>{t(B),Te(()=>{t(d),t(j)})});var ct=n(V);ct.value=ct.__value="";var Ft=l(ct);ne(Ft,1,()=>(t(j),f(()=>t(j).groups)),de,(st,D)=>{var P=sl(),ht=n(P),Gt={};L(()=>{_(ht,(t(D),f(()=>t(D).name))),Gt!==(Gt=(t(D),f(()=>t(D).id)))&&(P.value=(P.__value=(t(D),f(()=>t(D).id)))??"")}),x(st,P)});var Ot=l(V,4),_t=l(n(Ot),2);L(()=>{t(U),Te(()=>{})}),ne(_t,5,()=>Q,de,(st,D)=>{var P=il(),ht=n(P),Gt={};L(()=>{_(ht,t(D)),Gt!==(Gt=t(D))&&(P.value=(P.__value=t(D))??"")}),x(st,P)});var Nt=l(_t,2);L(()=>{t(et),Te(()=>{})}),ne(Nt,5,()=>S,de,(st,D)=>{var P=ol(),ht=n(P),Gt={};L(()=>{_(ht,(t(D),f(()=>t(D).label))),Gt!==(Gt=(t(D),f(()=>t(D).value)))&&(P.value=(P.__value=(t(D),f(()=>t(D).value)))??"")}),x(st,P)});var Bt=l(Nt,4);L(()=>{t(Y),Te(()=>{})}),ne(Bt,5,()=>Q,de,(st,D)=>{var P=ll(),ht=n(P),Gt={};L(()=>{_(ht,t(D)),Gt!==(Gt=t(D))&&(P.value=(P.__value=t(D))??"")}),x(st,P)});var Vt=l(Bt,2);L(()=>{t(C),Te(()=>{})}),ne(Vt,5,()=>S,de,(st,D)=>{var P=dl(),ht=n(P),Gt={};L(()=>{_(ht,(t(D),f(()=>t(D).label))),Gt!==(Gt=(t(D),f(()=>t(D).value)))&&(P.value=(P.__value=(t(D),f(()=>t(D).value)))??"")}),x(st,P)});var Qt=l(M,2),te=n(Qt),St=l(n(te),2),E=n(St),z=n(E),tt=n(z),ft=l(E,2),Mt=n(ft),ut=l(ft,2),wt=n(ut),Dt=l(te,2);{var W=st=>{var D=ul(),P=l(n(D),2),ht=n(P),Gt=n(ht),qt=n(Gt),Kt=l(ht,2),Ct=n(Kt),Et=l(Kt,2),Lt=n(Et),ee=l(Et,2),ve=n(ee),he=n(ve),Se=l(ee,2);{var ue=se=>{var ce=vl(),Ie=n(ce);L(()=>_(Ie,`ממתינים: ${t(w)??""}`)),x(se,ce)};at(Se,se=>{t(w)>0&&se(ue)})}var Ne=l(Se,2);{var re=se=>{var ce=cl(),Ie=n(ce);L(()=>_(Ie,(t(m),f(()=>t(m).enrolled===1?"✓ המטופל רשום בקבוצה":"⏱ המטופל ברשימת המתנה")))),x(se,ce)};at(Ne,se=>{t(m)&&se(re)})}L(()=>{_(qt,(t(c),f(()=>t(c).name))),_(Ct,`מתי: ${t(c),f(()=>t(c).when||"-")??""}`),_(Lt,`קיבולת: ${t(c),f(()=>t(c).capacity)??""}`),ye(ve,1,`font-medium ${t(h)<=0?"text-red-600":t(h)<=3?"text-orange-500":"text-green-600"}`),_(he,t(h)),ve.dir=ve.dir}),x(st,D)};at(Dt,st=>{t(c)&&st(W)})}var J=l(Qt,2),O=l(n(J),2),nt=l(O,4);L(()=>{t(It),Te(()=>{t(h)})});var gt=n(nt);gt.value=gt.__value="א";var kt=l(gt);kt.value=kt.__value="ת";var X=l(kt);X.value=X.__value="ה";var vt=l(nt,4),pt=l(vt,4),At=l(J,2);{var jt=st=>{var D=pl(),P=n(D),ht=n(P);L(()=>_(ht,(t(h),t(m),f(()=>t(h)>0?t(m)&&t(m).enrolled===1?"שמור תשלום":"שמור תשלום והרשמה":"הכנס לרשימת המתנה")))),N("click",P,$),x(st,D)},bt=st=>{var D=fl();x(st,D)};at(At,st=>{t(T)?st(bt,!1):st(jt)})}L(()=>{ye(V,1,`flex-1 border rounded px-3 h-10 ${t(d)?"bg-gray-100":""}`),V.disabled=!!t(d),V.dir=V.dir,_t.dir=_t.dir,Nt.dir=Nt.dir,Bt.dir=Bt.dir,Vt.dir=Vt.dir,_(tt,`${t(v),f(()=>t(v).firstName)??""} ${t(v),f(()=>t(v).lastName)??""}`),_(Mt,`ת.ז: ${t(v),f(()=>t(v).nationalId)??""}`),_(wt,`טלפון: ${t(v),f(()=>t(v).phone)??""}`),ye(J,1,`flex flex-row-reverse items-center gap-3 ${t(h)<=0?"opacity-50":""}`),ye(O,1,`border rounded px-3 h-10 ${t(h)<=0?"bg-gray-100":""}`),O.disabled=t(h)<=0,O.dir=O.dir,ye(nt,1,`border rounded px-3 h-10 ${t(h)<=0?"bg-gray-100":""}`),nt.disabled=t(h)<=0,nt.dir=nt.dir,ye(vt,1,`border rounded px-3 h-10 ${t(h)<=0?"bg-gray-100":""}`),vt.disabled=t(h)<=0,vt.dir=vt.dir,ye(pt,1,`border rounded px-3 h-10 ${t(h)<=0?"bg-gray-100":""}`),pt.disabled=t(h)<=0}),Le(V,()=>t(B),st=>p(B,st)),Le(_t,()=>t(U),st=>p(U,st)),Le(Nt,()=>t(et),st=>p(et,st)),Le(Bt,()=>t(Y),st=>p(Y,st)),Le(Vt,()=>t(C),st=>p(C,st)),Jt(O,()=>t(ot),st=>p(ot,st)),Le(nt,()=>t(It),st=>p(It,st)),Jt(vt,()=>t(H),st=>p(H,st)),Jt(pt,()=>t(rt),st=>p(rt,st)),x(dt,lt)};at(xt,dt=>{t(v)?dt(Pt,!1):dt(Tt)})}L(()=>_(yt,t(A))),N("click",mt,q),x(e,G),ge(),o()}var xl=k('<div class="bg-white rounded-lg shadow p-4"><p class="text-center text-gray-500 py-8">מטופל לא נמצא</p></div>'),gl=k('<p class="text-center text-gray-500 py-8">אין היסטוריית תשלומים</p>'),bl=k('<span class="text-xs" aria-hidden="true"> </span>'),yl=k('<span class="text-xs" aria-hidden="true"> </span>'),wl=k('<span class="text-xs" aria-hidden="true"> </span>'),Il=k('<span class="text-xs" aria-hidden="true"> </span>'),kl=k('<span class="text-xs" aria-hidden="true"> </span>'),$l=k('<span class="text-xs" aria-hidden="true"> </span>'),Ml=k("<option> </option>"),Al=k('<div class="grid grid-cols-7 gap-2 py-2 border-b text-sm text-right bg-blue-50"><select class="border rounded px-2 py-1 text-sm" dir="rtl"></select> <div class="flex gap-1"><input type="text" class="border rounded px-1 py-1 w-16 text-sm text-center" placeholder="MM/YYYY"/> <span>-</span> <input type="text" class="border rounded px-1 py-1 w-16 text-sm text-center" placeholder="MM/YYYY"/></div> <input type="text" class="border rounded px-2 py-1 text-sm text-center" placeholder="DD/MM/YYYY"/> <input type="number" class="border rounded px-2 py-1 text-sm text-right" min="0" step="10"/> <select class="border rounded px-2 py-1 text-sm" dir="rtl"><option>המחאה</option><option>אשראי</option><option>מזומן</option><option>העברה</option></select> <input type="text" class="border rounded px-2 py-1 text-sm"/> <div class="flex justify-center gap-2"><button class="text-green-600 hover:text-green-700" title="שמור">✓</button> <button class="text-red-600 hover:text-red-700" title="ביטול">✕</button></div></div>'),Sl=k('<div class="grid grid-cols-7 gap-2 py-2 border-b text-sm text-right"><div class="font-medium"> </div> <div> </div> <div> </div> <div class="font-medium"> </div> <div> </div> <div> </div> <div class="flex justify-center gap-2"><button class="text-blue-600 hover:text-blue-700" title="עריכה">✏️</button> <button class="text-red-600 hover:text-red-700" title="מחיקה">🗑️</button></div></div>'),Nl=k('<div class="space-y-3"><div class="grid grid-cols-7 gap-2 pb-2 border-b font-semibold text-sm text-gray-700 text-right"><button class="cursor-pointer hover:text-blue-600 text-right w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded" aria-label="מיין לפי קבוצה">קבוצה <!></button> <button class="cursor-pointer hover:text-blue-600 text-right w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded" aria-label="מיין לפי תקופה">תקופה <!></button> <button class="cursor-pointer hover:text-blue-600 text-right w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded" aria-label="מיין לפי תאריך תשלום">תאריך תשלום <!></button> <button class="cursor-pointer hover:text-blue-600 text-right w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded" aria-label="מיין לפי סכום">סכום <!></button> <button class="cursor-pointer hover:text-blue-600 text-right w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded" aria-label="מיין לפי אופן תשלום">אופן תשלום <!></button> <button class="cursor-pointer hover:text-blue-600 text-right w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded" aria-label="מיין לפי מספר קבלה">מספר קבלה <!></button> <div class="text-center">פעולות</div></div> <!> <div class="pt-4 border-t"><div class="flex justify-between"><div class="text-sm text-gray-600"> </div> <div class="font-medium"> </div></div></div></div>'),El=k('<div class="bg-white rounded-lg shadow p-4"><div class="flex justify-between items-center"><button class="big-green-button">רישום תשלום חדש</button> <div class="text-right"><h3 class="text-sm font-medium text-gray-600 mb-2">פרטי מטופל</h3> <div class="flex gap-4"><span class="font-medium"> </span> <span class="text-sm text-gray-600"> </span> <span class="text-sm text-gray-600"> </span></div></div></div></div> <div class="bg-white rounded-lg shadow p-4"><!></div>',1),Pl=k('<section class="space-y-6"><div class="bg-white rounded-lg shadow p-4"><div class="flex justify-between items-center mb-4"><div class="flex gap-3"><button class="text-blue-600 hover:text-blue-700 text-sm font-medium">ייצוא</button> <button class="text-blue-600 hover:underline text-sm">חזרה למטופלים</button></div> <h2 class="text-lg font-semibold">היסטוריית תשלומים</h2></div></div> <!></section>');function Cl(e,r){xe(r,!1);const a=()=>cr(pr,"$route",i),[i,o]=ur(),s=b(),d=b(),v=b(),c=b();let u=b(Ut()),w=b(null),h=b({}),I=b(null),y=b("asc");function m($){t(I)===$?p(y,t(y)==="asc"?"desc":"asc"):(p(I,$),p(y,"asc"))}function g($){switch($){case"ק":return"המחאה";case"א":return"אשראי";case"ת":return"מזומן";case"מ":return"העברה";default:return $}}function A($){confirm("האם למחוק את הרשומה?")&&($t.deletePayment(t(u),$),p(u,Ut()))}function j($){p(w,$.id),p(h,{...$})}function R(){p(w,null),p(h,{})}function B(){if(!t(w)||!t(h))return;const $=t(u).patientPayments.findIndex(q=>q.id===t(w));$!==-1&&(Xe(u,t(u).patientPayments[$]={...t(u).patientPayments[$],...t(h),updatedAt:new Date().toISOString()}),localStorage.setItem("phizio-db-v1",JSON.stringify(t(u))),p(u,Ut()),p(w,null),p(h,{}))}function et(){if(!t(d))return;const $=t(c).map(q=>{const G=t(u).groups.find(K=>K.id===q.groupId);return{"שם פרטי":t(d).firstName,"שם משפחה":t(d).lastName,"ת.ז.":t(d).nationalId,קבוצה:G?.name||"-","תקופה מ":q.fromMonth,"תקופה עד":q.toMonth,"תאריך תשלום":q.paymentDate,סכום:q.amount,"אופן תשלום":g(q.paymentMethod),"מספר קבלה":q.receiptNumber}});fr($,`payment_history_${t(d).firstName}_${t(d).lastName}`)}function U(){ae("/patients")}function C(){t(s)&&ae(`/registration/${t(s)}`)}Z(()=>a(),()=>{p(s,a().segments[0]||null)}),Z(()=>(t(s),t(u)),()=>{p(d,t(s)?t(u).patients.find($=>$.id===t(s)):null)}),Z(()=>(t(s),t(u)),()=>{p(v,t(s)?$t.getPaymentsByPatient(t(u),t(s)):[])}),Z(()=>(t(v),t(I),t(u),t(y)),()=>{p(c,(()=>{const $=[...t(v)];return t(I)?$.sort((q,G)=>{let K=0;if(t(I)==="group"){const it=t(u).groups.find(yt=>yt.id===q.groupId)?.name||"",mt=t(u).groups.find(yt=>yt.id===G.groupId)?.name||"";K=it.localeCompare(mt,"he")}else if(t(I)==="period"){const it=q.fromMonth.split("/").reverse().join(""),mt=G.fromMonth.split("/").reverse().join("");if(K=it.localeCompare(mt),K===0){const yt=q.toMonth.split("/").reverse().join(""),xt=G.toMonth.split("/").reverse().join("");K=yt.localeCompare(xt)}}else if(t(I)==="paymentDate"){const it=q.paymentDate.split("/").reverse().join(""),mt=G.paymentDate.split("/").reverse().join("");K=it.localeCompare(mt)}else t(I)==="amount"?K=q.amount-G.amount:t(I)==="paymentMethod"?K=q.paymentMethod.localeCompare(G.paymentMethod,"he"):t(I)==="receiptNumber"&&(K=q.receiptNumber.localeCompare(G.receiptNumber));return t(y)==="asc"?K:-K}):$})())}),Ce(),Ae();var Y=Pl(),ot=n(Y),It=n(ot),H=n(It),rt=n(H),T=l(rt,2),S=l(ot,2);{var F=$=>{var q=xl();x($,q)},Q=$=>{var q=El(),G=Xt(q),K=n(G),it=n(K),mt=l(it,2),yt=l(n(mt),2),xt=n(yt),Tt=n(xt),Pt=l(xt,2),dt=n(Pt),lt=l(Pt,2),M=n(lt),V=l(G,2),ct=n(V);{var Ft=_t=>{var Nt=gl();x(_t,Nt)},Ot=_t=>{var Nt=Nl(),Bt=n(Nt),Vt=n(Bt),Qt=l(n(Vt));{var te=D=>{var P=bl(),ht=n(P);L(()=>_(ht,t(y)==="asc"?"▲":"▼")),x(D,P)};at(Qt,D=>{t(I)==="group"&&D(te)})}var St=l(Vt,2),E=l(n(St));{var z=D=>{var P=yl(),ht=n(P);L(()=>_(ht,t(y)==="asc"?"▲":"▼")),x(D,P)};at(E,D=>{t(I)==="period"&&D(z)})}var tt=l(St,2),ft=l(n(tt));{var Mt=D=>{var P=wl(),ht=n(P);L(()=>_(ht,t(y)==="asc"?"▲":"▼")),x(D,P)};at(ft,D=>{t(I)==="paymentDate"&&D(Mt)})}var ut=l(tt,2),wt=l(n(ut));{var Dt=D=>{var P=Il(),ht=n(P);L(()=>_(ht,t(y)==="asc"?"▲":"▼")),x(D,P)};at(wt,D=>{t(I)==="amount"&&D(Dt)})}var W=l(ut,2),J=l(n(W));{var O=D=>{var P=kl(),ht=n(P);L(()=>_(ht,t(y)==="asc"?"▲":"▼")),x(D,P)};at(J,D=>{t(I)==="paymentMethod"&&D(O)})}var nt=l(W,2),gt=l(n(nt));{var kt=D=>{var P=$l(),ht=n(P);L(()=>_(ht,t(y)==="asc"?"▲":"▼")),x(D,P)};at(gt,D=>{t(I)==="receiptNumber"&&D(kt)})}var X=l(Bt,2);ne(X,1,()=>t(c),de,(D,P)=>{const ht=ie(()=>(t(u),t(P),f(()=>t(u).groups.find(Et=>Et.id===t(P).groupId))));var Gt=We(),qt=Xt(Gt);{var Kt=Et=>{var Lt=Al(),ee=n(Lt);L(()=>{t(h),Te(()=>{t(u)})}),ne(ee,5,()=>(t(u),f(()=>t(u).groups)),de,(Rt,Ge)=>{var ke=Ml(),De=n(ke),nr={};L(()=>{_(De,(t(Ge),f(()=>t(Ge).name))),nr!==(nr=(t(Ge),f(()=>t(Ge).id)))&&(ke.value=(ke.__value=(t(Ge),f(()=>t(Ge).id)))??"")}),x(Rt,ke)});var ve=l(ee,2),he=n(ve),Se=l(he,4),ue=l(ve,2),Ne=l(ue,2),re=l(Ne,2);L(()=>{t(h),Te(()=>{})});var se=n(re);se.value=se.__value="ק";var ce=l(se);ce.value=ce.__value="א";var Ie=l(ce);Ie.value=Ie.__value="ת";var Ke=l(Ie);Ke.value=Ke.__value="מ";var Qe=l(re,2),hr=l(Qe,2),Re=n(hr),Yt=l(Re,2);L(()=>{ee.dir=ee.dir,re.dir=re.dir}),Le(ee,()=>t(h).groupId,Rt=>Xe(h,t(h).groupId=Rt)),Jt(he,()=>t(h).fromMonth,Rt=>Xe(h,t(h).fromMonth=Rt)),Jt(Se,()=>t(h).toMonth,Rt=>Xe(h,t(h).toMonth=Rt)),Jt(ue,()=>t(h).paymentDate,Rt=>Xe(h,t(h).paymentDate=Rt)),Jt(Ne,()=>t(h).amount,Rt=>Xe(h,t(h).amount=Rt)),Le(re,()=>t(h).paymentMethod,Rt=>Xe(h,t(h).paymentMethod=Rt)),Jt(Qe,()=>t(h).receiptNumber,Rt=>Xe(h,t(h).receiptNumber=Rt)),N("click",Re,B),N("click",Yt,R),x(Et,Lt)},Ct=Et=>{var Lt=Sl(),ee=n(Lt),ve=n(ee),he=l(ee,2),Se=n(he),ue=l(he,2),Ne=n(ue),re=l(ue,2),se=n(re),ce=l(re,2),Ie=n(ce),Ke=l(ce,2),Qe=n(Ke),hr=l(Ke,2),Re=n(hr),Yt=l(Re,2);L(Rt=>{_(ve,(Ht(t(ht)),f(()=>t(ht)?.name||"-"))),_(Se,`${t(P),f(()=>t(P).fromMonth)??""} - ${t(P),f(()=>t(P).toMonth)??""}`),_(Ne,(t(P),f(()=>t(P).paymentDate))),_(se,`₪${t(P),f(()=>t(P).amount)??""}`),_(Ie,Rt),_(Qe,(t(P),f(()=>t(P).receiptNumber)))},[()=>(t(P),f(()=>g(t(P).paymentMethod)))]),N("click",Re,()=>j(t(P))),N("click",Yt,()=>A(t(P).id)),x(Et,Lt)};at(qt,Et=>{t(w),t(P),f(()=>t(w)===t(P).id)?Et(Kt):Et(Ct,!1)})}x(D,Gt)});var vt=l(X,2),pt=n(vt),At=n(pt),jt=n(At),bt=l(At,2),st=n(bt);L(D=>{_(jt,`סה"כ תשלומים: ${t(c),f(()=>t(c).length)??""}`),_(st,`סה"כ: ₪${D??""}`)},[()=>(t(c),f(()=>t(c).reduce((D,P)=>D+P.amount,0)))]),N("click",Vt,()=>m("group")),N("click",St,()=>m("period")),N("click",tt,()=>m("paymentDate")),N("click",ut,()=>m("amount")),N("click",W,()=>m("paymentMethod")),N("click",nt,()=>m("receiptNumber")),x(_t,Nt)};at(ct,_t=>{t(c),f(()=>t(c).length===0)?_t(Ft):_t(Ot,!1)})}L(()=>{_(Tt,`${t(d),f(()=>t(d).firstName)??""} ${t(d),f(()=>t(d).lastName)??""}`),_(dt,`ת.ז: ${t(d),f(()=>t(d).nationalId)??""}`),_(M,`טלפון: ${t(d),f(()=>t(d).phone)??""}`)}),N("click",it,C),x($,q)};at(S,$=>{t(d)?$(Q,!1):$(F)})}N("click",rt,et),N("click",T,U),x(e,Y),ge(),o()}var Gl=k('<div class="bg-white rounded-lg shadow p-4"><p class="text-center text-gray-500 py-8">קבוצה לא נמצאה</p></div>'),Dl=k('<p class="text-center text-gray-500 py-4">אין מטופלים רשומים פעילים</p>'),jl=k('<span class="text-xs" aria-hidden="true"> </span>'),Tl=k('<span class="text-xs" aria-hidden="true"> </span>'),Ll=k('<span class="text-xs" aria-hidden="true"> </span>'),Bl=k('<span class="text-xs" aria-hidden="true"> </span>'),Fl=k('<span class="text-xs" aria-hidden="true"> </span>'),Ol=k('<div class="flex flex-row-reverse items-center py-2 hover:bg-gray-50 rounded transition-colors"><div class="w-10 flex justify-center"><button class="text-red-600 hover:text-red-700 p-1" title="הסר" aria-label="הסר מטופל מהקבוצה"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div> <button class="flex-1 grid cursor-pointer items-center text-left" style="grid-template-columns: 3fr 120px 140px 130px 100px;" title="לחץ לצפייה בהיסטוריית תשלומים"><div class="font-medium text-right px-2"> </div> <div class="text-sm text-gray-600 text-right px-2"> </div> <div class="text-sm text-gray-600 text-right px-2"> </div> <div class="text-sm text-green-700 font-medium text-right px-2"> </div> <div class="text-sm text-gray-500 text-right px-2"> </div></button></div>'),Yl=k('<div class="flex flex-row-reverse items-center py-2 border-b mb-2"><div class="w-10"></div> <div class="flex-1 grid" style="grid-template-columns: 3fr 120px 140px 130px 100px;"><button class="text-gray-700 text-right font-semibold text-sm py-1 px-2 cursor-pointer hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded" aria-label="מיין לפי שם">שם <!></button> <button class="text-gray-700 text-right font-semibold text-sm py-1 px-2 cursor-pointer hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded" aria-label="מיין לפי תעודת זהות">ת.ז. <!></button> <button class="text-gray-700 text-right font-semibold text-sm py-1 px-2 cursor-pointer hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded" aria-label="מיין לפי טלפון">טלפון <!></button> <button class="text-gray-700 text-right font-semibold text-sm py-1 px-2 cursor-pointer hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded" aria-label="מיין לפי תקופה">תקופה <!></button> <button class="text-gray-700 text-right font-semibold text-sm py-1 px-2 cursor-pointer hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded" aria-label="מיין לפי קבלה">קבלה <!></button></div></div> <div class="space-y-2"></div>',1),Rl=k('<div class="flex flex-row-reverse items-center py-2 hover:bg-gray-50 rounded transition-colors"><div class="w-10 flex justify-center"><button class="text-red-600 hover:text-red-700 p-1" title="הסר" aria-label="הסר מרשימת המתנה"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div> <button class="flex-1 grid cursor-pointer items-center text-left" style="grid-template-columns: 3fr 120px 140px 120px;" title="לחץ לצפייה בהיסטוריית תשלומים"><div class="font-medium text-right px-2"> </div> <div class="text-sm text-gray-600 text-right px-2"> </div> <div class="text-sm text-gray-600 text-right px-2"> </div> <div class="text-sm text-orange-600 font-medium text-right px-2">ממתין</div></button></div>'),zl=k('<div class="bg-white rounded-lg shadow p-4"><h3 class="text-base font-semibold mb-4 text-orange-600"> </h3> <div class="flex flex-row-reverse items-center py-2 border-b mb-2"><div class="w-10"></div> <div class="flex-1 grid" style="grid-template-columns: 3fr 120px 140px 120px;"><div class="text-gray-700 text-right font-semibold text-sm py-1 px-2">שם</div> <div class="text-gray-700 text-right font-semibold text-sm py-1 px-2">ת.ז.</div> <div class="text-gray-700 text-right font-semibold text-sm py-1 px-2">טלפון</div> <div class="text-gray-700 text-right font-semibold text-sm py-1 px-2">סטטוס</div></div></div> <div class="space-y-2"></div></div>'),Vl=k('<div class="bg-white rounded-lg shadow p-4"><div class="grid grid-cols-3 gap-4"><div class="text-right"><h3 class="text-sm font-medium text-gray-600 mb-2">פרטי קבוצה</h3> <div class="space-y-1"><div><span class="font-medium text-lg"> </span></div> <div class="text-sm text-gray-600"> </div></div></div> <div class="text-right"><h3 class="text-sm font-medium text-gray-600 mb-2">תפוסה</h3> <div class="space-y-1"><div class="text-2xl font-bold"> </div> <div>מקומות פנויים: <span dir="ltr" style="display: inline-block;"> </span></div></div></div> <div class="text-right"><h3 class="text-sm font-medium text-gray-600 mb-2">מנחה</h3> <div class="text-lg"> </div></div></div></div> <div class="bg-white rounded-lg shadow p-4"><h3 class="text-base font-semibold mb-4"> </h3> <!></div> <!>',1),Hl=k('<section class="space-y-6"><div class="bg-white rounded-lg shadow p-4"><div class="flex justify-between items-center mb-4"><div class="flex gap-3"><button class="text-blue-600 hover:text-blue-700 text-sm font-medium">ייצוא</button> <button class="text-blue-600 hover:underline text-sm">חזרה לקבוצות</button></div> <h2 class="text-lg font-semibold">מטופלים בקבוצה</h2></div></div> <!></section>');function Wl(e,r){xe(r,!1);const a=()=>cr(pr,"$route",i),[i,o]=ur(),s=b(),d=b(),v=b(),c=b(),u=b(),w=b(),h=b(),I=b(),y=b(),m=b(),g=b();let A=b(Ut()),j=b(null),R=b("asc");function B(G){t(j)===G?p(R,t(R)==="asc"?"desc":"asc"):(p(j,G),p(R,"asc"))}function et(G){t(s)&&confirm("להסיר מטופל/ת מהקבוצה?")&&($t.removePatientFromGroup(t(A),t(s),G),p(A,Ut()))}function U(){if(!t(d))return;const G=t(u).map(K=>{const it=t(A).patients.find(yt=>yt.id===K.patientId),mt=it&&t(s)?ot(it.id,t(s)):null;return it?{"שם פרטי":it.firstName,"שם משפחה":it.lastName,"ת.ז.":it.nationalId,טלפון:it.phone,"תקופת תשלום":mt||"-","מספר קבלה":K.receipt||"",סטטוס:"רשום",קבוצה:t(d).name}:null}).filter(Boolean);t(I).forEach(K=>{const it=t(A).patients.find(mt=>mt.id===K.patientId);it&&G.push({"שם פרטי":it.firstName,"שם משפחה":it.lastName,"ת.ז.":it.nationalId,טלפון:it.phone,"מספר קבלה":K.receipt||"",סטטוס:"ממתין",קבוצה:t(d).name})}),fr(G,`patients_in_${t(d).name}`)}function C(){ae("/groupsList")}function Y(G){ae(`history/${G}`)}function ot(G,K){const it=t(A).patientPayments.filter(_t=>_t.patientId===G&&_t.groupId===K);if(it.length===0)return null;const mt=new Date,yt=mt.getMonth()+1,Tt=mt.getFullYear()*12+yt,dt=it.find(_t=>{const[Nt,Bt]=_t.fromMonth.split("/"),Vt=parseInt(Nt),Qt=parseInt(Bt),[te,St]=_t.toMonth.split("/"),E=parseInt(te),z=parseInt(St),tt=Qt*12+Vt,ft=z*12+E;return tt<=Tt&&Tt<=ft})||it.sort((_t,Nt)=>Nt.createdAt-_t.createdAt)[0],lt=dt.fromMonth.split("/"),M=dt.toMonth.split("/"),V=lt[0],ct=lt[1]?.substring(2),Ft=M[0],Ot=M[1]?.substring(2);return`${V}/${ct}-${Ft}/${Ot}`}Z(()=>a(),()=>{p(s,a().segments[0]||null)}),Z(()=>(t(s),t(A)),()=>{p(d,t(s)?t(A).groups.find(G=>G.id===t(s)):null)}),Z(()=>(t(s),t(A)),()=>{p(v,t(s)?t(A).patientsInGroups.filter(G=>G.groupId===t(s)):[])}),Z(()=>(t(s),t(A)),()=>{p(c,t(s)?$t.getPatientsWithActiveSubscriptions(t(A),t(s)):[])}),Z(()=>(t(c),t(j),t(A),t(s),t(R)),()=>{p(u,(()=>{const G=[...t(c)];return t(j)?G.sort((K,it)=>{const mt=t(A).patients.find(Tt=>Tt.id===K.patientId),yt=t(A).patients.find(Tt=>Tt.id===it.patientId);if(!mt||!yt)return 0;let xt=0;if(t(j)==="name"){const Tt=`${mt.firstName||""} ${mt.lastName||""}`,Pt=`${yt.firstName||""} ${yt.lastName||""}`;xt=Tt.localeCompare(Pt,"he")}else if(t(j)==="nationalId")xt=(mt.nationalId||"").localeCompare(yt.nationalId||"");else if(t(j)==="phone")xt=(mt.phone||"").localeCompare(yt.phone||"");else if(t(j)==="period"){const Tt=ot(mt.id,t(s)||"")||"",Pt=ot(yt.id,t(s)||"")||"";xt=Tt.localeCompare(Pt)}else t(j)==="receipt"&&(xt=(K.receipt||"").localeCompare(it.receipt||""));return t(R)==="asc"?xt:-xt}):G})())}),Z(()=>t(v),()=>{p(w,t(v).filter(G=>G.enrolled===1))}),Z(()=>(t(w),t(A),t(s)),()=>{p(h,t(w).filter(G=>!$t.hasActiveSubscription(t(A),G.patientId,t(s)||"")))}),Z(()=>t(v),()=>{p(I,t(v).filter(G=>G.enrolled===0))}),Z(()=>(t(s),t(A)),()=>{p(y,t(s)?$t.getAvailableWithActiveSubscriptions(t(A),t(s)):0)}),Z(()=>(t(s),t(A)),()=>{p(m,t(s)?t(A).therapistsInGroups.find(G=>G.groupId===t(s)):null)}),Z(()=>(t(m),t(A)),()=>{p(g,t(m)?t(A).therapists.find(G=>G.id===t(m).therapistId):null)}),Ce(),Ae();var It=Hl(),H=n(It),rt=n(H),T=n(rt),S=n(T),F=l(S,2),Q=l(H,2);{var $=G=>{var K=Gl();x(G,K)},q=G=>{var K=Vl(),it=Xt(K),mt=n(it),yt=n(mt),xt=l(n(yt),2),Tt=n(xt),Pt=n(Tt),dt=n(Pt),lt=l(Tt,2),M=n(lt),V=l(yt,2),ct=l(n(V),2),Ft=n(ct),Ot=n(Ft),_t=l(Ft,2),Nt=l(n(_t)),Bt=n(Nt),Vt=l(V,2),Qt=l(n(Vt),2),te=n(Qt),St=l(it,2),E=n(St),z=n(E),tt=l(E,2);{var ft=Dt=>{var W=Dl();x(Dt,W)},Mt=Dt=>{var W=Yl(),J=Xt(W),O=l(n(J),2),nt=n(O),gt=l(n(nt));{var kt=Ct=>{var Et=jl(),Lt=n(Et);L(()=>_(Lt,t(R)==="asc"?"▲":"▼")),x(Ct,Et)};at(gt,Ct=>{t(j)==="name"&&Ct(kt)})}var X=l(nt,2),vt=l(n(X));{var pt=Ct=>{var Et=Tl(),Lt=n(Et);L(()=>_(Lt,t(R)==="asc"?"▲":"▼")),x(Ct,Et)};at(vt,Ct=>{t(j)==="nationalId"&&Ct(pt)})}var At=l(X,2),jt=l(n(At));{var bt=Ct=>{var Et=Ll(),Lt=n(Et);L(()=>_(Lt,t(R)==="asc"?"▲":"▼")),x(Ct,Et)};at(jt,Ct=>{t(j)==="phone"&&Ct(bt)})}var st=l(At,2),D=l(n(st));{var P=Ct=>{var Et=Bl(),Lt=n(Et);L(()=>_(Lt,t(R)==="asc"?"▲":"▼")),x(Ct,Et)};at(D,Ct=>{t(j)==="period"&&Ct(P)})}var ht=l(st,2),Gt=l(n(ht));{var qt=Ct=>{var Et=Fl(),Lt=n(Et);L(()=>_(Lt,t(R)==="asc"?"▲":"▼")),x(Ct,Et)};at(Gt,Ct=>{t(j)==="receipt"&&Ct(qt)})}var Kt=l(J,2);ne(Kt,5,()=>t(u),de,(Ct,Et)=>{const Lt=ie(()=>(t(A),t(Et),f(()=>t(A).patients.find(ue=>ue.id===t(Et).patientId)))),ee=ie(()=>(Ht(t(Lt)),t(s),f(()=>t(Lt)&&t(s)?ot(t(Lt).id,t(s)):null)));var ve=We(),he=Xt(ve);{var Se=ue=>{var Ne=Ol(),re=n(Ne),se=n(re),ce=l(re,2),Ie=n(ce),Ke=n(Ie),Qe=l(Ie,2),hr=n(Qe),Re=l(Qe,2),Yt=n(Re),Rt=l(Re,2),Ge=n(Rt),ke=l(Rt,2),De=n(ke);L(()=>{_(Ke,`${Ht(t(Lt)),f(()=>t(Lt).firstName)??""} ${Ht(t(Lt)),f(()=>t(Lt).lastName)??""}`),_(hr,(Ht(t(Lt)),f(()=>t(Lt).nationalId))),_(Yt,(Ht(t(Lt)),f(()=>t(Lt).phone))),_(Ge,t(ee)||"-"),_(De,(t(Et),f(()=>t(Et).receipt||"-")))}),N("click",se,dn(()=>et(t(Lt).id))),N("click",ce,()=>Y(t(Lt).id)),x(ue,Ne)};at(he,ue=>{t(Lt)&&ue(Se)})}x(Ct,ve)}),N("click",nt,()=>B("name")),N("click",X,()=>B("nationalId")),N("click",At,()=>B("phone")),N("click",st,()=>B("period")),N("click",ht,()=>B("receipt")),x(Dt,W)};at(tt,Dt=>{t(u),f(()=>t(u).length===0)?Dt(ft):Dt(Mt,!1)})}var ut=l(St,2);{var wt=Dt=>{var W=zl(),J=n(W),O=n(J),nt=l(J,4);ne(nt,5,()=>t(I),de,(gt,kt)=>{const X=ie(()=>(t(A),t(kt),f(()=>t(A).patients.find(jt=>jt.id===t(kt).patientId))));var vt=We(),pt=Xt(vt);{var At=jt=>{var bt=Rl(),st=n(bt),D=n(st),P=l(st,2),ht=n(P),Gt=n(ht),qt=l(ht,2),Kt=n(qt),Ct=l(qt,2),Et=n(Ct);L(()=>{_(Gt,`${Ht(t(X)),f(()=>t(X).firstName)??""} ${Ht(t(X)),f(()=>t(X).lastName)??""}`),_(Kt,(Ht(t(X)),f(()=>t(X).nationalId))),_(Et,(Ht(t(X)),f(()=>t(X).phone)))}),N("click",D,dn(()=>et(t(X).id))),N("click",P,()=>Y(t(X).id)),x(jt,bt)};at(pt,jt=>{t(X)&&jt(At)})}x(gt,vt)}),L(()=>_(O,`ממתינים (${t(I),f(()=>t(I).length)??""})`)),x(Dt,W)};at(ut,Dt=>{t(I),f(()=>t(I).length>0)&&Dt(wt)})}L(()=>{_(dt,(t(d),f(()=>t(d).name))),_(M,`מתי: ${t(d),f(()=>t(d).when||"open")??""}`),_(Ot,`${t(u),f(()=>t(u).length)??""} / ${t(d),f(()=>t(d).capacity)??""}`),ye(_t,1,`text-sm ${t(y)<=0?"text-red-600 font-medium":t(y)<=3?"text-orange-500":"text-gray-600"}`),_(Bt,t(y)),Nt.dir=Nt.dir,_(te,(t(g),f(()=>t(g)?t(g).name:"-"))),_(z,`רשומים פעילים (${t(u),f(()=>t(u).length)??""})`)}),x(G,K)};at(Q,G=>{t(d)?G(q,!1):G($)})}N("click",S,U),N("click",F,C),x(e,It),ge(),o()}var Ul=k('<div class="bg-white rounded-lg shadow p-4"><p class="text-center text-gray-500 py-8">מטופל לא נמצא</p></div>'),ql=k('<p class="text-center text-gray-500 py-4">אין קבוצות רשומות</p>'),Jl=k('<span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">פעיל</span>'),Kl=k('<span class="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded">לא פעיל</span>'),Ql=k("<span> </span>"),Xl=k('<div><div class="flex items-center justify-between"><div class="flex gap-2"><button class="text-red-600 hover:text-red-700" title="הסר" aria-label="הסר מקבוצה"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button> <button class="text-blue-600 hover:text-blue-700" title="פרטי קבוצה" aria-label="פרטי קבוצה"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button></div> <div class="flex-1 text-right"><div class="flex items-center gap-2 justify-end"><div class="font-medium text-lg"> </div> <!></div> <div class="flex gap-4 text-sm text-gray-600 justify-end"><span> </span> <!> <span> </span> <span> </span></div></div></div></div>'),Zl=k('<div class="grid gap-3"></div>'),td=k('<div class="border border-orange-300 rounded p-3 hover:bg-orange-50"><div class="flex items-center justify-between"><div class="flex gap-2"><button class="text-red-600 hover:text-red-700" title="הסר" aria-label="הסר מרשימת המתנה"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button> <button class="text-blue-600 hover:text-blue-700" title="פרטי קבוצה" aria-label="פרטי קבוצה"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button> <span class="text-orange-600 font-medium text-sm">ממתין</span></div> <div class="flex-1 text-right"><div class="font-medium text-lg"> </div> <div class="flex gap-4 text-sm text-gray-600 justify-end"><span> </span> <span> </span></div></div></div></div>'),ed=k('<div class="bg-white rounded-lg shadow p-4"><h3 class="text-base font-semibold mb-4 text-orange-600"> </h3> <div class="grid gap-3"></div></div>'),rd=k('<div class="bg-white rounded-lg shadow p-4"><div class="grid grid-cols-2 gap-4"><div class="text-right"><h3 class="text-sm font-medium text-gray-600 mb-2">פרטי מטופל</h3> <div class="space-y-1"><div><span class="font-medium text-lg"> </span></div> <div class="text-sm text-gray-600"> </div> <div class="text-sm text-gray-600"> </div></div></div> <div class="text-right"><h3 class="text-sm font-medium text-gray-600 mb-2">סטטיסטיקה</h3> <div class="space-y-1"><div class="text-lg">קבוצות פעילות: <span class="font-bold text-green-600"> </span></div> <div class="text-lg">סה"כ קבוצות: <span class="font-bold text-blue-600"> </span></div> <div class="text-lg">ממתין בקבוצות: <span class="font-bold text-orange-600"> </span></div></div></div></div></div> <div class="bg-white rounded-lg shadow p-4"><h3 class="text-base font-semibold mb-4"> </h3> <!></div> <!>',1),ad=k('<section class="space-y-6"><div class="bg-white rounded-lg shadow p-4"><div class="flex justify-between items-center mb-4"><div class="flex gap-3"><button class="text-blue-600 hover:text-blue-700 text-sm font-medium">ייצוא</button> <button class="text-blue-600 hover:underline text-sm">חזרה למטופלים</button></div> <h2 class="text-lg font-semibold">קבוצות המטופל</h2></div></div> <!></section>');function nd(e,r){xe(r,!1);const a=()=>cr(pr,"$route",i),[i,o]=ur(),s=b(),d=b(),v=b(),c=b(),u=b(),w=b();let h=b(Ut());function I(H){t(s)&&confirm("להסיר מהקבוצה?")&&($t.removePatientFromGroup(t(h),H,t(s)),p(h,Ut()))}function y(){if(!t(d))return;const H=t(c).map(rt=>{const T=t(h).groups.find($=>$.id===rt.groupId),S=t(h).therapistsInGroups.find($=>$.groupId===rt.groupId),F=S?t(h).therapists.find($=>$.id===S.therapistId):null,Q=t(s)?A(t(s),rt.groupId):null;return T?{"שם מטופל":`${t(d).firstName} ${t(d).lastName}`,"ת.ז.":t(d).nationalId,"שם קבוצה":T.name,מתי:T.when||"open",מנחה:F?.name||"-","תקופת תשלום":Q||"-","מספר קבלה":rt.receipt||"",סטטוס:"רשום"}:null}).filter(Boolean);t(u).forEach(rt=>{const T=t(h).groups.find(Q=>Q.id===rt.groupId),S=t(h).therapistsInGroups.find(Q=>Q.groupId===rt.groupId),F=S?t(h).therapists.find(Q=>Q.id===S.therapistId):null;T&&H.push({"שם מטופל":`${t(d).firstName} ${t(d).lastName}`,"ת.ז.":t(d).nationalId,"שם קבוצה":T.name,מתי:T.when||"open",מנחה:F?.name||"-","מספר קבלה":rt.receipt||"",סטטוס:"ממתין"})}),fr(H,`groups_for_${t(d).firstName}_${t(d).lastName}`)}function m(){ae("/patients")}function g(H){ae(`/groups/${H}`)}function A(H,rt){const T=t(h).patientPayments.filter(Pt=>Pt.patientId===H&&Pt.groupId===rt);if(T.length===0)return null;const S=new Date,F=S.getMonth()+1,$=S.getFullYear()*12+F,G=T.find(Pt=>{const[dt,lt]=Pt.fromMonth.split("/"),M=parseInt(dt),V=parseInt(lt),[ct,Ft]=Pt.toMonth.split("/"),Ot=parseInt(ct),_t=parseInt(Ft),Nt=V*12+M,Bt=_t*12+Ot;return Nt<=$&&$<=Bt})||T.sort((Pt,dt)=>dt.createdAt-Pt.createdAt)[0],K=G.fromMonth.split("/"),it=G.toMonth.split("/"),mt=K[0],yt=K[1]?.substring(2),xt=it[0],Tt=it[1]?.substring(2);return`${mt}/${yt}-${xt}/${Tt}`}Z(()=>a(),()=>{p(s,a().segments[0]||null)}),Z(()=>(t(s),t(h)),()=>{p(d,t(s)?t(h).patients.find(H=>H.id===t(s)):null)}),Z(()=>(t(s),t(h)),()=>{p(v,t(s)?t(h).patientsInGroups.filter(H=>H.patientId===t(s)):[])}),Z(()=>t(v),()=>{p(c,t(v).filter(H=>H.enrolled===1))}),Z(()=>t(v),()=>{p(u,t(v).filter(H=>H.enrolled===0))}),Z(()=>(t(s),t(c),t(h)),()=>{p(w,t(s)?t(c).filter(H=>$t.hasActiveSubscription(t(h),t(s),H.groupId)).length:0)}),Ce(),Ae();var j=ad(),R=n(j),B=n(R),et=n(B),U=n(et),C=l(U,2),Y=l(R,2);{var ot=H=>{var rt=Ul();x(H,rt)},It=H=>{var rt=rd(),T=Xt(rt),S=n(T),F=n(S),Q=l(n(F),2),$=n(Q),q=n($),G=n(q),K=l($,2),it=n(K),mt=l(K,2),yt=n(mt),xt=l(F,2),Tt=l(n(xt),2),Pt=n(Tt),dt=l(n(Pt)),lt=n(dt),M=l(Pt,2),V=l(n(M)),ct=n(V),Ft=l(M,2),Ot=l(n(Ft)),_t=n(Ot),Nt=l(T,2),Bt=n(Nt),Vt=n(Bt),Qt=l(Bt,2);{var te=tt=>{var ft=ql();x(tt,ft)},St=tt=>{var ft=Zl();ne(ft,5,()=>t(c),de,(Mt,ut)=>{const wt=ie(()=>(t(h),t(ut),f(()=>t(h).groups.find(X=>X.id===t(ut).groupId)))),Dt=ie(()=>(t(h),t(ut),f(()=>t(h).therapistsInGroups.find(X=>X.groupId===t(ut).groupId)))),W=ie(()=>(Ht(t(Dt)),t(h),f(()=>t(Dt)?t(h).therapists.find(X=>X.id===t(Dt).therapistId):null))),J=ie(()=>(t(s),t(ut),f(()=>t(s)?A(t(s),t(ut).groupId):null))),O=ie(()=>(t(s),Ht($t),t(h),t(ut),f(()=>t(s)?$t.hasActiveSubscription(t(h),t(s),t(ut).groupId):!1)));var nt=We(),gt=Xt(nt);{var kt=X=>{var vt=Xl(),pt=n(vt),At=n(pt),jt=n(At),bt=l(jt,2),st=l(At,2),D=n(st),P=n(D),ht=n(P),Gt=l(P,2);{var qt=re=>{var se=Jl();x(re,se)},Kt=re=>{var se=Kl();x(re,se)};at(Gt,re=>{t(O)?re(qt):re(Kt,!1)})}var Ct=l(D,2),Et=n(Ct),Lt=n(Et),ee=l(Et,2);{var ve=re=>{var se=Ql(),ce=n(se);L(()=>{ye(se,1,`font-medium ${t(O)?"text-green-700":"text-gray-500"}`),_(ce,`תקופה: ${t(J)??""}`)}),x(re,se)};at(ee,re=>{t(J)&&re(ve)})}var he=l(ee,2),Se=n(he),ue=l(he,2),Ne=n(ue);L(()=>{ye(vt,1,`border rounded p-3 hover:bg-gray-50 ${t(O)?"":"opacity-60"}`),_(ht,(Ht(t(wt)),f(()=>t(wt).name))),_(Lt,`קבלה: ${t(ut),f(()=>t(ut).receipt||"-")??""}`),_(Se,`מנחה: ${Ht(t(W)),f(()=>t(W)?.name||"-")??""}`),_(Ne,`מתי: ${Ht(t(wt)),f(()=>t(wt).when||"open")??""}`)}),N("click",jt,()=>I(t(wt).id)),N("click",bt,()=>g(t(wt).id)),x(X,vt)};at(gt,X=>{t(wt)&&X(kt)})}x(Mt,nt)}),x(tt,ft)};at(Qt,tt=>{t(c),f(()=>t(c).length===0)?tt(te):tt(St,!1)})}var E=l(Nt,2);{var z=tt=>{var ft=ed(),Mt=n(ft),ut=n(Mt),wt=l(Mt,2);ne(wt,5,()=>t(u),de,(Dt,W)=>{const J=ie(()=>(t(h),t(W),f(()=>t(h).groups.find(vt=>vt.id===t(W).groupId)))),O=ie(()=>(t(h),t(W),f(()=>t(h).therapistsInGroups.find(vt=>vt.groupId===t(W).groupId)))),nt=ie(()=>(Ht(t(O)),t(h),f(()=>t(O)?t(h).therapists.find(vt=>vt.id===t(O).therapistId):null)));var gt=We(),kt=Xt(gt);{var X=vt=>{var pt=td(),At=n(pt),jt=n(At),bt=n(jt),st=l(bt,2),D=l(jt,2),P=n(D),ht=n(P),Gt=l(P,2),qt=n(Gt),Kt=n(qt),Ct=l(qt,2),Et=n(Ct);L(()=>{_(ht,(Ht(t(J)),f(()=>t(J).name))),_(Kt,`מנחה: ${Ht(t(nt)),f(()=>t(nt)?.name||"-")??""}`),_(Et,`מתי: ${Ht(t(J)),f(()=>t(J).when||"open")??""}`)}),N("click",bt,()=>I(t(J).id)),N("click",st,()=>g(t(J).id)),x(vt,pt)};at(kt,vt=>{t(J)&&vt(X)})}x(Dt,gt)}),L(()=>_(ut,`ממתין בקבוצות (${t(u),f(()=>t(u).length)??""})`)),x(tt,ft)};at(E,tt=>{t(u),f(()=>t(u).length>0)&&tt(z)})}L(()=>{_(G,`${t(d),f(()=>t(d).firstName)??""} ${t(d),f(()=>t(d).lastName)??""}`),_(it,`ת.ז: ${t(d),f(()=>t(d).nationalId)??""}`),_(yt,`טלפון: ${t(d),f(()=>t(d).phone)??""}`),_(lt,t(w)),_(ct,(t(c),f(()=>t(c).length))),_(_t,(t(u),f(()=>t(u).length))),_(Vt,`קבוצות רשומות (${t(c),f(()=>t(c).length)??""})`)}),x(H,rt)};at(Y,H=>{t(d)?H(It,!1):H(ot)})}N("click",U,y),N("click",C,m),x(e,j),ge(),o()}var sd=k('<div class="bg-white rounded-lg shadow p-4"><p class="text-center text-gray-500 py-8">מטופל לא נמצא</p></div>'),id=k('<div class="bg-white rounded-lg shadow p-4"><p class="text-center text-gray-500 py-8">אין רישומי נוכחות</p></div>'),od=k('<div class="bg-white rounded-lg shadow p-4"><p class="text-center text-gray-500 py-8">אין רישומי נוכחות עם תאריכים</p></div>'),ld=k('<div class="flex items-center justify-between py-2 px-3 hover:bg-gray-50 rounded"><div class="flex gap-2"><button class="text-red-600 hover:text-red-700 p-1" title="מחק" aria-label="מחק רישום נוכחות"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button> <button class="text-blue-600 hover:text-blue-700 p-1" title="פרטי קבוצה" aria-label="פרטי קבוצה"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button></div> <div class="flex-1 text-right flex items-center justify-end gap-4"><span class="text-sm text-gray-500"> </span> <span class="font-medium"> </span> <span class="text-sm font-medium text-blue-600"> </span></div></div>'),dd=k('<div class="bg-white rounded-lg shadow p-4"><h3 class="text-base font-semibold mb-3 text-gray-700"> </h3> <div class="space-y-2"></div></div>'),vd=k('<div class="flex items-center justify-between py-2 px-3 hover:bg-gray-50 rounded"><div class="flex gap-2"><button class="text-red-600 hover:text-red-700 p-1" title="מחק" aria-label="מחק רישום נוכחות"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button> <button class="text-blue-600 hover:text-blue-700 p-1" title="פרטי קבוצה" aria-label="פרטי קבוצה"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button></div> <div class="flex-1 text-right flex items-center justify-end gap-4"><span class="text-sm text-gray-500"> </span> <span class="font-medium"> </span> <span class="text-sm font-medium text-gray-400"> </span></div></div>'),cd=k('<div class="bg-white rounded-lg shadow p-4"><h3 class="text-base font-semibold mb-3 text-gray-700"> </h3> <div class="space-y-2"></div></div>'),ud=k("<!> <!> <!>",1),pd=k('<div class="bg-white rounded-lg shadow p-4"><div class="grid grid-cols-2 gap-4"><div class="text-right"><h3 class="text-sm font-medium text-gray-600 mb-2">פרטי מטופל</h3> <div class="space-y-1"><div><span class="font-medium text-lg"> </span></div> <div class="text-sm text-gray-600"> </div> <div class="text-sm text-gray-600"> </div></div></div> <div class="text-right"><h3 class="text-sm font-medium text-gray-600 mb-2">סטטיסטיקה</h3> <div class="space-y-1"><div class="flex justify-end items-baseline gap-2"><span class="text-sm text-gray-600">סה"כ נוכחות:</span> <span class="text-2xl font-bold text-blue-600"> </span></div> <div class="flex justify-end items-baseline gap-2"><span class="text-sm text-gray-600">החודש:</span> <span class="text-lg font-bold text-green-600"> </span></div> <div class="flex justify-end items-baseline gap-2"><span class="text-sm text-gray-600">קבוצות:</span> <span class="text-lg font-bold text-purple-600"> </span></div></div></div></div></div> <!>',1),fd=k('<section class="space-y-6"><div class="bg-white rounded-lg shadow p-4"><div class="flex justify-between items-center mb-4"><div class="flex gap-3"><button class="text-blue-600 hover:text-blue-700 text-sm font-medium">ייצוא</button> <button class="text-blue-600 hover:underline text-sm">חזרה למטופלים</button></div> <h2 class="text-lg font-semibold">היסטוריית נוכחות</h2></div></div> <!></section>');function hd(e,r){xe(r,!1);const a=()=>cr(pr,"$route",i),[i,o]=ur(),s=b(),d=b(),v=b(),c=b(),u=b(),w=b(),h=b(),I=b();let y=b(Ut());function m(T){const S=T.split("-");if(S.length!==2)return T;const[F,Q]=S,$=["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],q=parseInt(Q)-1;return q<0||q>=$.length?T:`${$[q]} ${F}`}function g(){if(!t(d))return;const T=t(c).map(S=>{const F=t(y).groups.find($=>$.id===S.groupId),Q=t(y).therapists.find($=>$.id===S.therapistId);return{תאריך:S.date,קבוצה:F?.name||"-",מנחה:Q?.name||"-","שם מטופל":`${t(d).firstName} ${t(d).lastName}`,"ת.ז.":t(d).nationalId}});fr(T,`attendance_${t(d).firstName}_${t(d).lastName}`)}function A(){ae("/patients")}function j(T){ae(`/groups/${T}`)}function R(T,S,F){t(s)&&confirm("למחוק רישום נוכחות?")&&($t.unmarkAttendance(t(y),S,t(s),F),p(y,Ut()))}Z(()=>a(),()=>{p(s,a().segments[0]||null)}),Z(()=>(t(s),t(y)),()=>{p(d,t(s)?t(y).patients.find(T=>T.id===t(s)):null)}),Z(()=>(t(s),t(y)),()=>{p(v,t(s)?t(y).attendance.filter(T=>T.patientId===t(s)):[])}),Z(()=>t(v),()=>{p(c,t(v).sort((T,S)=>{const F=Q=>{if(!Q)return new Date(0);const $=Q.split("/");if($.length!==3)return new Date(0);const[q,G,K]=$,it=new Date(parseInt(K),parseInt(G)-1,parseInt(q));return isNaN(it.getTime())?new Date(0):it};return F(S.date).getTime()-F(T.date).getTime()}))}),Z(()=>t(c),()=>{p(u,t(c).reduce((S,F)=>{let Q="unknown";if(F.date){if(F.date.includes("/")){const $=F.date.split("/");if($.length===3){const[q,G,K]=$;Q=`${K}-${G.padStart(2,"0")}`}}else if(F.date.includes("-")){const $=F.date.split("-");if($.length===3){const[q,G,K]=$;Q=`${q}-${G.padStart(2,"0")}`}}}return S[Q]||(S[Q]=[]),S[Q].push(F),S},{}))}),Z(()=>t(c),()=>{p(w,t(c).length)}),Z(()=>t(c),()=>{p(h,new Set(t(c).map(T=>T.groupId)).size)}),Z(()=>t(c),()=>{p(I,t(c).filter(T=>{const[S,F,Q]=T.date.split("/"),$=new Date;return parseInt(Q)===$.getFullYear()&&parseInt(F)===$.getMonth()+1}).length)}),Ce(),Ae();var B=fd(),et=n(B),U=n(et),C=n(U),Y=n(C),ot=l(Y,2),It=l(et,2);{var H=T=>{var S=sd();x(T,S)},rt=T=>{var S=pd(),F=Xt(S),Q=n(F),$=n(Q),q=l(n($),2),G=n(q),K=n(G),it=n(K),mt=l(G,2),yt=n(mt),xt=l(mt,2),Tt=n(xt),Pt=l($,2),dt=l(n(Pt),2),lt=n(dt),M=l(n(lt),2),V=n(M),ct=l(lt,2),Ft=l(n(ct),2),Ot=n(Ft),_t=l(ct,2),Nt=l(n(_t),2),Bt=n(Nt),Vt=l(F,2);{var Qt=St=>{var E=id();x(St,E)},te=St=>{var E=ud(),z=Xt(E);{var tt=wt=>{var Dt=od();x(wt,Dt)};at(z,wt=>{t(u),f(()=>Object.keys(t(u)).length===0||Object.keys(t(u)).length===1&&t(u).unknown)&&wt(tt)})}var ft=l(z,2);ne(ft,1,()=>(t(u),f(()=>Object.entries(t(u)).filter(([wt])=>wt!=="unknown").sort((wt,Dt)=>Dt[0].localeCompare(wt[0])))),de,(wt,Dt)=>{var W=Os(()=>ls(t(Dt),2));let J=()=>t(W)[0],O=()=>t(W)[1];var nt=dd(),gt=n(nt),kt=n(gt),X=l(gt,2);ne(X,5,O,de,(vt,pt)=>{const At=ie(()=>(t(y),t(pt),f(()=>t(y).groups.find(ee=>ee.id===t(pt).groupId)))),jt=ie(()=>(t(y),t(pt),f(()=>t(y).therapists.find(ee=>ee.id===t(pt).therapistId))));var bt=ld(),st=n(bt),D=n(st),P=l(D,2),ht=l(st,2),Gt=n(ht),qt=n(Gt),Kt=l(Gt,2),Ct=n(Kt),Et=l(Kt,2),Lt=n(Et);L(()=>{_(qt,`מנחה: ${Ht(t(jt)),f(()=>t(jt)?.name||"-")??""}`),_(Ct,(Ht(t(At)),f(()=>t(At)?.name||"-"))),_(Lt,(t(pt),f(()=>t(pt).date)))}),N("click",D,()=>R(t(pt).id,t(pt).groupId,t(pt).date)),N("click",P,()=>j(t(pt).groupId)),x(vt,bt)}),L(vt=>_(kt,`${vt??""} (${O(),f(()=>O().length)??""} מפגשים)`),[()=>(J(),f(()=>m(J())))]),x(wt,nt)});var Mt=l(ft,2);{var ut=wt=>{var Dt=cd(),W=n(Dt),J=n(W),O=l(W,2);ne(O,5,()=>(t(u),f(()=>t(u).unknown)),de,(nt,gt)=>{const kt=ie(()=>(t(y),t(gt),f(()=>t(y).groups.find(Kt=>Kt.id===t(gt).groupId)))),X=ie(()=>(t(y),t(gt),f(()=>t(y).therapists.find(Kt=>Kt.id===t(gt).therapistId))));var vt=vd(),pt=n(vt),At=n(pt),jt=l(At,2),bt=l(pt,2),st=n(bt),D=n(st),P=l(st,2),ht=n(P),Gt=l(P,2),qt=n(Gt);L(()=>{_(D,`מנחה: ${Ht(t(X)),f(()=>t(X)?.name||"-")??""}`),_(ht,(Ht(t(kt)),f(()=>t(kt)?.name||"-"))),_(qt,(t(gt),f(()=>t(gt).date||"ללא תאריך")))}),N("click",At,()=>R(t(gt).id,t(gt).groupId,t(gt).date)),N("click",jt,()=>j(t(gt).groupId)),x(nt,vt)}),L(()=>_(J,`רישומים ללא תאריך (${t(u),f(()=>t(u).unknown.length)??""} מפגשים)`)),x(wt,Dt)};at(Mt,wt=>{t(u),f(()=>t(u).unknown&&t(u).unknown.length>0)&&wt(ut)})}x(St,E)};at(Vt,St=>{t(c),f(()=>t(c).length===0)?St(Qt):St(te,!1)})}L(()=>{_(it,`${t(d),f(()=>t(d).firstName)??""} ${t(d),f(()=>t(d).lastName)??""}`),_(yt,`ת.ז: ${t(d),f(()=>t(d).nationalId)??""}`),_(Tt,`טלפון: ${t(d),f(()=>t(d).phone)??""}`),_(V,t(w)),_(Ot,t(I)),_(Bt,t(h))}),x(T,S)};at(It,T=>{t(d)?T(rt,!1):T(H)})}N("click",Y,g),N("click",ot,A),x(e,B),ge(),o()}var _d=k('<div class="p-4 max-w-6xl mx-auto"><h1 class="text-2xl font-bold mb-6 text-center">מדדים</h1> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"><div class="bg-blue-50 p-4 rounded-lg border border-blue-200"><div class="text-blue-600 text-sm font-medium">מטופלים פעילים</div> <div class="text-3xl font-bold text-blue-800"> </div> <div class="text-xs text-gray-600 mt-1"> </div></div> <div class="bg-green-50 p-4 rounded-lg border border-green-200"><div class="text-green-600 text-sm font-medium">קבוצות</div> <div class="text-3xl font-bold text-green-800"> </div> <div class="text-xs text-gray-600 mt-1"> </div></div> <div class="bg-purple-50 p-4 rounded-lg border border-purple-200"><div class="text-purple-600 text-sm font-medium">מנחים פעילים</div> <div class="text-3xl font-bold text-purple-800"> </div> <div class="text-xs text-gray-600 mt-1"> </div></div> <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200"><div class="text-yellow-700 text-sm font-medium">מנויים פעילים</div> <div class="text-3xl font-bold text-yellow-800"> </div> <div class="text-xs text-gray-600 mt-1">תשלומים פעילים החודש</div></div></div> <div class="bg-white p-4 rounded-lg border mb-6"><h2 class="text-lg font-semibold mb-3">רישום לקבוצות</h2> <div class="grid grid-cols-2 sm:grid-cols-3 gap-4"><div><div class="text-sm text-gray-600">רשומים</div> <div class="text-2xl font-bold"> </div></div> <div><div class="text-sm text-gray-600">ממתינים</div> <div class="text-2xl font-bold text-orange-600"> </div></div> <div><div class="text-sm text-gray-600">סה"כ רישומים</div> <div class="text-2xl font-bold"> </div></div></div></div> <div class="bg-white p-4 rounded-lg border mb-6"><h2 class="text-lg font-semibold mb-3">נוכחות</h2> <div class="grid grid-cols-2 sm:grid-cols-4 gap-4"><div><div class="text-sm text-gray-600">סה"כ נוכחות</div> <div class="text-2xl font-bold"> </div></div> <div><div class="text-sm text-gray-600">החודש</div> <div class="text-2xl font-bold text-blue-600"> </div></div> <div><div class="text-sm text-gray-600">רגילה</div> <div class="text-2xl font-bold"> </div></div> <div><div class="text-sm text-gray-600">השלמות</div> <div class="text-2xl font-bold text-purple-600"> </div></div></div></div> <div class="bg-white p-4 rounded-lg border mb-6"><h2 class="text-lg font-semibold mb-3">תשלומים</h2> <div class="grid grid-cols-2 sm:grid-cols-3 gap-4"><div><div class="text-sm text-gray-600">סה"כ תשלומים</div> <div class="text-2xl font-bold"> </div></div> <div><div class="text-sm text-gray-600">פעילים החודש</div> <div class="text-2xl font-bold text-green-600"> </div></div> <div><div class="text-sm text-gray-600">סה"כ הכנסות</div> <div class="text-2xl font-bold"> </div></div></div></div> <div class="bg-gray-50 p-4 rounded-lg border" dir="rtl"><h2 class="text-lg font-semibold mb-3 text-right">ספירת רשומות במסד הנתונים</h2> <div class="grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm"><div class="flex items-center gap-2"><span class="text-gray-600">סטטוסים:</span> <span class="font-mono font-bold"> </span></div> <div class="flex items-center gap-2"><span class="text-gray-600">מנחים:</span> <span class="font-mono font-bold"> </span></div> <div class="flex items-center gap-2"><span class="text-gray-600">מטופלים:</span> <span class="font-mono font-bold"> </span></div> <div class="flex items-center gap-2"><span class="text-gray-600">קבוצות:</span> <span class="font-mono font-bold"> </span></div> <div class="flex items-center gap-2"><span class="text-gray-600">מטופלים בקבוצות:</span> <span class="font-mono font-bold"> </span></div> <div class="flex items-center gap-2"><span class="text-gray-600">מנחים בקבוצות:</span> <span class="font-mono font-bold"> </span></div> <div class="flex items-center gap-2"><span class="text-gray-600">נוכחות:</span> <span class="font-mono font-bold"> </span></div> <div class="flex items-center gap-2"><span class="text-gray-600">תשלומים:</span> <span class="font-mono font-bold"> </span></div></div></div> <div class="text-center text-sm text-gray-500 mt-4"> </div></div>');function md(e,r){xe(r,!1);const a=b(),i=b(),o=b(),s=b(),d=b(),v=b(),c=b(),u=b(),w=b(),h=b(),I=b(),y=b(),m=b();let g=b(Ut());Mi(()=>{const Yt=setInterval(()=>{p(g,Ut())},5e3);return()=>clearInterval(Yt)}),Z(()=>t(g),()=>{p(a,t(g).therapists.filter(Yt=>t(g).statuses.find(Rt=>Rt.id===Yt.statusId)?.code==="active").length)}),Z(()=>t(g),()=>{p(i,(()=>{const Yt=new Date,Rt=Yt.getMonth()+1,ke=Yt.getFullYear()*12+Rt,De=new Set;return t(g).patientPayments.forEach(nr=>{const[_a,ma]=nr.fromMonth.split("/"),xa=parseInt(_a),ga=parseInt(ma),[ba,ya]=nr.toMonth.split("/"),wa=parseInt(ba),Ia=parseInt(ya),ka=ga*12+xa,as=Ia*12+wa;ka<=ke&&ke<=as&&De.add(nr.patientId)}),De.size})())}),Z(()=>t(g),()=>{p(o,t(g).patients.filter(Yt=>t(g).statuses.find(Rt=>Rt.id===Yt.statusId)?.code==="active").length)}),Z(()=>t(g),()=>{p(s,t(g).patientsInGroups.filter(Yt=>Yt.enrolled===1).length)}),Z(()=>t(g),()=>{p(d,t(g).patientsInGroups.filter(Yt=>Yt.enrolled===0).length)}),Z(()=>t(g),()=>{p(v,(()=>{const Yt=new Date,Rt=Yt.getMonth(),Ge=Yt.getFullYear();return t(g).attendance.filter(ke=>{const De=new Date(ke.date);return De.getMonth()===Rt&&De.getFullYear()===Ge}).length})())}),Z(()=>t(g),()=>{p(c,t(g).attendance.filter(Yt=>!Yt.isMakeup).length)}),Z(()=>t(g),()=>{p(u,t(g).attendance.filter(Yt=>Yt.isMakeup).length)}),Z(()=>t(g),()=>{p(m,(()=>{const Yt=new Date,Rt=Yt.getMonth()+1,ke=Yt.getFullYear()*12+Rt;return t(g).patientPayments.filter(De=>{const[nr,_a]=De.fromMonth.split("/"),ma=parseInt(nr),xa=parseInt(_a),[ga,ba]=De.toMonth.split("/"),ya=parseInt(ga),wa=parseInt(ba),Ia=xa*12+ma,ka=wa*12+ya;return Ia<=ke&&ke<=ka}).length})())}),Z(()=>t(m),()=>{p(w,t(m))}),Z(()=>t(g),()=>{p(h,t(g).patientPayments.reduce((Yt,Rt)=>Yt+Rt.amount,0))}),Z(()=>(t(g),$t),()=>{p(I,t(g).groups.filter(Yt=>$t.getAvailableWithActiveSubscriptions(t(g),Yt.id)>0).length)}),Z(()=>(t(g),$t),()=>{p(y,t(g).groups.filter(Yt=>$t.getAvailableWithActiveSubscriptions(t(g),Yt.id)===0).length)}),Ce(),Ae();var A=_d(),j=l(n(A),2),R=n(j),B=l(n(R),2),et=n(B),U=l(B,2),C=n(U),Y=l(R,2),ot=l(n(Y),2),It=n(ot),H=l(ot,2),rt=n(H),T=l(Y,2),S=l(n(T),2),F=n(S),Q=l(S,2),$=n(Q),q=l(T,2),G=l(n(q),2),K=n(G),it=l(j,2),mt=l(n(it),2),yt=n(mt),xt=l(n(yt),2),Tt=n(xt),Pt=l(yt,2),dt=l(n(Pt),2),lt=n(dt),M=l(Pt,2),V=l(n(M),2),ct=n(V),Ft=l(it,2),Ot=l(n(Ft),2),_t=n(Ot),Nt=l(n(_t),2),Bt=n(Nt),Vt=l(_t,2),Qt=l(n(Vt),2),te=n(Qt),St=l(Vt,2),E=l(n(St),2),z=n(E),tt=l(St,2),ft=l(n(tt),2),Mt=n(ft),ut=l(Ft,2),wt=l(n(ut),2),Dt=n(wt),W=l(n(Dt),2),J=n(W),O=l(Dt,2),nt=l(n(O),2),gt=n(nt),kt=l(O,2),X=l(n(kt),2),vt=n(X),pt=l(ut,2),At=l(n(pt),2),jt=n(At),bt=l(n(jt),2),st=n(bt),D=l(jt,2),P=l(n(D),2),ht=n(P),Gt=l(D,2),qt=l(n(Gt),2),Kt=n(qt),Ct=l(Gt,2),Et=l(n(Ct),2),Lt=n(Et),ee=l(Ct,2),ve=l(n(ee),2),he=n(ve),Se=l(ee,2),ue=l(n(Se),2),Ne=n(ue),re=l(Se,2),se=l(n(re),2),ce=n(se),Ie=l(re,2),Ke=l(n(Ie),2),Qe=n(Ke),hr=l(pt,2),Re=n(hr);L((Yt,Rt)=>{_(et,t(i)),_(C,`עם מנוי פעיל | ${t(o)??""} רשומים פעילים`),_(It,(t(g),f(()=>t(g).groups.length))),_(rt,`${t(I)??""} עם מקום | ${t(y)??""} מלאות`),_(F,t(a)),_($,`מתוך ${t(g),f(()=>t(g).therapists.length)??""} רשומים`),_(K,t(m)),_(Tt,t(s)),_(lt,t(d)),_(ct,(t(g),f(()=>t(g).patientsInGroups.length))),_(Bt,(t(g),f(()=>t(g).attendance.length))),_(te,t(v)),_(z,t(c)),_(Mt,t(u)),_(J,(t(g),f(()=>t(g).patientPayments.length))),_(gt,t(w)),_(vt,`₪${Yt??""}`),_(st,(t(g),f(()=>t(g).statuses.length))),_(ht,(t(g),f(()=>t(g).therapists.length))),_(Kt,(t(g),f(()=>t(g).patients.length))),_(Lt,(t(g),f(()=>t(g).groups.length))),_(he,(t(g),f(()=>t(g).patientsInGroups.length))),_(Ne,(t(g),f(()=>t(g).therapistsInGroups.length))),_(ce,(t(g),f(()=>t(g).attendance.length))),_(Qe,(t(g),f(()=>t(g).patientPayments.length))),pt.dir=pt.dir,_(Re,`עדכון אחרון: ${Rt??""}`)},[()=>(t(h),f(()=>t(h).toLocaleString())),()=>f(()=>new Date().toLocaleTimeString("he-IL"))]),x(e,A),ge()}var xd=k('<!> <main class="container px-4 py-6"><!></main>',1);function gd(e,r){xe(r,!1);const a=()=>cr(pr,"$route",i),[i,o]=ur(),s=b(),d=b(),v={therapists:Yi,patients:Ji,groups:po,groupsList:Sa,groupAttendance:Fo,waitlist:qo,monthlyReport:al,registration:ml,history:Cl,patientsInGroup:Wl,groupsForPatient:nd,patientAttendance:hd,indicators:md};Z(()=>a(),()=>{p(s,a())}),Z(()=>(t(s),Sa),()=>{p(d,v[t(s).name]??Sa)}),Ce();var c=xd(),u=Xt(c);Gi(u,{});var w=l(u,2),h=n(w);_i(h,()=>t(d),(I,y)=>{y(I,{})}),x(e,c),ge(),o()}ci(gd,{target:document.getElementById("app")});</script>
    <style rel="stylesheet" crossorigin>/*! tailwindcss v4.1.16 | MIT License | https://tailwindcss.com */@layer properties{@supports ((-webkit-hyphens:none) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-space-y-reverse:0;--tw-border-style:solid;--tw-font-weight:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-50:oklch(97.1% .013 17.38);--color-red-200:oklch(88.5% .062 18.334);--color-red-600:oklch(57.7% .245 27.325);--color-red-700:oklch(50.5% .213 27.518);--color-red-800:oklch(44.4% .177 26.899);--color-orange-50:oklch(98% .016 73.684);--color-orange-300:oklch(83.7% .128 66.29);--color-orange-500:oklch(70.5% .213 47.604);--color-orange-600:oklch(64.6% .222 41.116);--color-yellow-50:oklch(98.7% .026 102.212);--color-yellow-200:oklch(94.5% .129 101.54);--color-yellow-700:oklch(55.4% .135 66.442);--color-yellow-800:oklch(47.6% .114 61.907);--color-green-50:oklch(98.2% .018 155.826);--color-green-100:oklch(96.2% .044 156.743);--color-green-200:oklch(92.5% .084 155.995);--color-green-600:oklch(62.7% .194 149.214);--color-green-700:oklch(52.7% .154 150.069);--color-green-800:oklch(44.8% .119 151.328);--color-blue-50:oklch(97% .014 254.604);--color-blue-100:oklch(93.2% .032 255.585);--color-blue-200:oklch(88.2% .059 254.128);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-blue-800:oklch(42.4% .199 265.638);--color-indigo-600:oklch(51.1% .262 276.966);--color-indigo-700:oklch(45.7% .24 277.023);--color-purple-50:oklch(97.7% .014 308.299);--color-purple-200:oklch(90.2% .063 306.703);--color-purple-600:oklch(55.8% .288 302.321);--color-purple-700:oklch(49.6% .265 301.924);--color-purple-800:oklch(43.8% .218 303.724);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-900:oklch(21% .034 264.665);--color-white:#fff;--spacing:.25rem;--container-sm:24rem;--container-md:28rem;--container-6xl:72rem;--container-7xl:80rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height: 1.5 ;--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--font-weight-normal:400;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--radius-md:.375rem;--radius-lg:.5rem;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::-moz-placeholder{opacity:1}::placeholder{opacity:1}@supports (not (-webkit-appearance:-apple-pay-button)) or (contain-intrinsic-size:1px){::-moz-placeholder{color:currentColor}::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::-moz-placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.sticky{position:sticky}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.mx-4{margin-inline:calc(var(--spacing)*4)}.mx-auto{margin-inline:auto}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-6{margin-top:calc(var(--spacing)*6)}.mt-8{margin-top:calc(var(--spacing)*8)}.mr-2{margin-right:calc(var(--spacing)*2)}.mr-3{margin-right:calc(var(--spacing)*3)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.ml-1{margin-left:calc(var(--spacing)*1)}.ml-2{margin-left:calc(var(--spacing)*2)}.ml-3{margin-left:calc(var(--spacing)*3)}.ml-6{margin-left:calc(var(--spacing)*6)}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline{display:inline}.inline-flex{display:inline-flex}.table{display:table}.h-3{height:calc(var(--spacing)*3)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-9{height:calc(var(--spacing)*9)}.h-10{height:calc(var(--spacing)*10)}.h-12{height:calc(var(--spacing)*12)}.h-14{height:calc(var(--spacing)*14)}.w-3{width:calc(var(--spacing)*3)}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-10{width:calc(var(--spacing)*10)}.w-16{width:calc(var(--spacing)*16)}.w-20{width:calc(var(--spacing)*20)}.w-40{width:calc(var(--spacing)*40)}.w-full{width:100%}.w-px{width:1px}.max-w-6xl{max-width:var(--container-6xl)}.max-w-7xl{max-width:var(--container-7xl)}.max-w-md{max-width:var(--container-md)}.max-w-sm{max-width:var(--container-sm)}.min-w-0{min-width:calc(var(--spacing)*0)}.min-w-\[80px\]{min-width:80px}.min-w-\[90px\]{min-width:90px}.min-w-\[200px\]{min-width:200px}.min-w-full{min-width:100%}.flex-1{flex:1}.border-collapse{border-collapse:collapse}.cursor-pointer{cursor:pointer}.list-inside{list-style-position:inside}.list-disc{list-style-type:disc}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}.grid-cols-7{grid-template-columns:repeat(7,minmax(0,1fr))}.flex-row-reverse{flex-direction:row-reverse}.items-baseline{align-items:baseline}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.gap-1{gap:calc(var(--spacing)*1)}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-6>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*6)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-y-reverse)))}.overflow-x-auto{overflow-x:auto}.rounded{border-radius:.25rem}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.border{border-style:var(--tw-border-style);border-width:1px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-blue-200{border-color:var(--color-blue-200)}.border-gray-100{border-color:var(--color-gray-100)}.border-gray-200{border-color:var(--color-gray-200)}.border-gray-300{border-color:var(--color-gray-300)}.border-green-200{border-color:var(--color-green-200)}.border-orange-300{border-color:var(--color-orange-300)}.border-purple-200{border-color:var(--color-purple-200)}.border-red-200{border-color:var(--color-red-200)}.border-yellow-200{border-color:var(--color-yellow-200)}.bg-blue-50{background-color:var(--color-blue-50)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-100{background-color:var(--color-gray-100)}.bg-gray-300{background-color:var(--color-gray-300)}.bg-green-50{background-color:var(--color-green-50)}.bg-green-100{background-color:var(--color-green-100)}.bg-purple-50{background-color:var(--color-purple-50)}.bg-red-50{background-color:var(--color-red-50)}.bg-white{background-color:var(--color-white)}.bg-yellow-50{background-color:var(--color-yellow-50)}.p-1{padding:calc(var(--spacing)*1)}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-6{padding:calc(var(--spacing)*6)}.p-8{padding:calc(var(--spacing)*8)}.px-1{padding-inline:calc(var(--spacing)*1)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.py-1{padding-block:calc(var(--spacing)*1)}.py-2{padding-block:calc(var(--spacing)*2)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-6{padding-block:calc(var(--spacing)*6)}.py-8{padding-block:calc(var(--spacing)*8)}.pt-4{padding-top:calc(var(--spacing)*4)}.pt-6{padding-top:calc(var(--spacing)*6)}.pb-2{padding-bottom:calc(var(--spacing)*2)}.pb-6{padding-bottom:calc(var(--spacing)*6)}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.font-mono{font-family:var(--font-mono)}.font-sans{font-family:var(--font-sans)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-normal{--tw-font-weight:var(--font-weight-normal);font-weight:var(--font-weight-normal)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.whitespace-nowrap{white-space:nowrap}.text-blue-600{color:var(--color-blue-600)}.text-blue-800{color:var(--color-blue-800)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-gray-700{color:var(--color-gray-700)}.text-gray-900{color:var(--color-gray-900)}.text-green-600{color:var(--color-green-600)}.text-green-700{color:var(--color-green-700)}.text-green-800{color:var(--color-green-800)}.text-indigo-600{color:var(--color-indigo-600)}.text-orange-500{color:var(--color-orange-500)}.text-orange-600{color:var(--color-orange-600)}.text-purple-600{color:var(--color-purple-600)}.text-purple-800{color:var(--color-purple-800)}.text-red-600{color:var(--color-red-600)}.text-red-800{color:var(--color-red-800)}.text-yellow-700{color:var(--color-yellow-700)}.text-yellow-800{color:var(--color-yellow-800)}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.shadow{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.file\:mr-4::file-selector-button{margin-right:calc(var(--spacing)*4)}.file\:rounded-full::file-selector-button{border-radius:3.40282e38px}.file\:border-0::file-selector-button{border-style:var(--tw-border-style);border-width:0}.file\:bg-blue-50::file-selector-button{background-color:var(--color-blue-50)}.file\:px-4::file-selector-button{padding-inline:calc(var(--spacing)*4)}.file\:py-2::file-selector-button{padding-block:calc(var(--spacing)*2)}.file\:text-sm::file-selector-button{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.file\:font-semibold::file-selector-button{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.file\:text-blue-700::file-selector-button{color:var(--color-blue-700)}.last\:border-b-0:last-child{border-bottom-style:var(--tw-border-style);border-bottom-width:0}@media (hover:hover){.hover\:bg-gray-50:hover{background-color:var(--color-gray-50)}.hover\:bg-orange-50:hover{background-color:var(--color-orange-50)}.hover\:bg-white:hover{background-color:var(--color-white)}.hover\:text-blue-600:hover{color:var(--color-blue-600)}.hover\:text-blue-700:hover{color:var(--color-blue-700)}.hover\:text-green-700:hover{color:var(--color-green-700)}.hover\:text-indigo-700:hover{color:var(--color-indigo-700)}.hover\:text-purple-700:hover{color:var(--color-purple-700)}.hover\:text-red-700:hover{color:var(--color-red-700)}.hover\:underline:hover{text-decoration-line:underline}.hover\:file\:bg-blue-100:hover::file-selector-button{background-color:var(--color-blue-100)}}.focus\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\:ring-blue-500:focus{--tw-ring-color:var(--color-blue-500)}.focus\:outline-none:focus{--tw-outline-style:none;outline-style:none}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-50:disabled{opacity:.5}@media (min-width:40rem){.sm\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.sm\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.sm\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}@media (min-width:64rem){.lg\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}@media print{.print\:hidden{display:none}}}.ml-1{margin-inline-start:.25rem}.ml-2{margin-inline-start:.5rem}.ml-3{margin-inline-start:.75rem}.ml-4{margin-inline-start:1rem}.ml-6{margin-inline-start:1.5rem}.ml-auto{margin-inline-start:auto}.mr-1{margin-inline-end:.25rem}.mr-2{margin-inline-end:.5rem}.mr-3{margin-inline-end:.75rem}.mr-4{margin-inline-end:1rem}.pl-2{padding-inline-start:.5rem}.pl-3{padding-inline-start:.75rem}.pl-4{padding-inline-start:1rem}.pr-2{padding-inline-end:.5rem}.pr-3{padding-inline-end:.75rem}.pr-4{padding-inline-end:1rem}.text-left{text-align:start}.text-right{text-align:end}.justify-end{justify-content:flex-end}.justify-start{justify-content:flex-start}.float-left{float:inline-start}.float-right{float:inline-end}.border-l{border-inline-start-width:1px}.border-r{border-inline-end-width:1px}.rounded-l{border-start-start-radius:.25rem;border-end-start-radius:.25rem}.rounded-r{border-start-end-radius:.25rem;border-end-end-radius:.25rem}[dir=rtl] .rtl\:text-right{text-align:right!important}[dir=rtl] .rtl\:text-left{text-align:left!important}[dir=rtl] .rtl\:ml-auto{margin-left:auto!important}[dir=rtl] .rtl\:mr-auto{margin-right:auto!important}:root{color-scheme:light dark;color:#ffffffde;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:#242424;font-family:system-ui,Avenir,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.5}a{color:#646cff;-webkit-text-decoration:inherit;text-decoration:inherit;font-weight:500}a:hover{color:#535bf2}body{place-items:center;min-width:320px;min-height:100vh;margin:0;display:flex}h1{font-size:3.2em;line-height:1.1}.card{padding:2em}#app{text-align:center;max-width:1280px;margin:0 auto;padding:2rem}button{cursor:pointer;background-color:#1a1a1a;border:none;outline:none;padding:.6em 1.2em;font-family:inherit;font-size:1em;font-weight:500}button:focus,button:focus-visible{outline:none}.big-blue-button{color:#fff;background-color:#2563eb;border-radius:.375rem;justify-content:center;align-items:center;height:2.5rem;padding:.5rem 1rem;font-weight:500;transition:background-color .2s;display:flex}.big-blue-button:hover{background-color:#1d4ed8}.big-green-button{color:#fff;background-color:#10b981;border-radius:.375rem;justify-content:center;align-items:center;height:2.5rem;padding:.5rem 1rem;font-weight:500;transition:background-color .2s;display:flex}.big-green-button:hover{background-color:#059669}.big-gray-button{color:#fff;background-color:#6b7280;border-radius:.375rem;justify-content:center;align-items:center;height:2.5rem;padding:.5rem 1rem;font-weight:500;transition:background-color .2s;display:flex}.big-gray-button:hover{background-color:#4b5563}.big-red-button{color:#fff;background-color:#dc2626;border-radius:.375rem;justify-content:center;align-items:center;height:2.5rem;padding:.5rem 1rem;font-weight:500;transition:background-color .2s;display:flex}.big-red-button:hover{background-color:#b91c1c}.big-orange-button{color:#fff;background-color:#f97316;border-radius:.375rem;justify-content:center;align-items:center;height:2.5rem;padding:.5rem 1rem;font-weight:500;transition:background-color .2s;display:flex}.big-orange-button:hover{background-color:#ea580c}@media (prefers-color-scheme:light){:root{color:#213547;background-color:#fff}a:hover{color:#747bff}button{background-color:#f9f9f9}}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@media print{@page{margin:1cm}body{print-color-adjust:exact;-webkit-print-color-adjust:exact}}</style>
  </head>
  <body class="font-sans bg-gray-50 text-gray-900">
    <div id="app"></div>
  </body>
</html>

